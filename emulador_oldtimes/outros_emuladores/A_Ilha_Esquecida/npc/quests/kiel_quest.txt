//===== Cronus Script ======================================= 
//= Quest de Kiel
//===== By: ================================================== 
//= L0ne_W0lf (Script), DZeroX (Timer)
//===== Versão Atual: ========================================
//= 3.9
//===== Compatível com: ====================================== 
//= Cronus SVN
//===== Descrição: ===========================================
//= Quest para abrir a fábrica de rôbos level 1 e 2
//= Créditos da tradução á Murkalael.
//= Correções no texto por Cardoso.
//= Adaptado os digits para bRO [TET]
//= Retirados alguns erros de tradução [TET]
//= Atualizado esquema de variáveis do Receptor e dos Robôs [Pudim]
//===== Comentários Adicionais: ==============================
//= 1.0 First version, needs testing [Playtester]
//= 1.1 Copied over some changes made by -Tsuyuki- [L0ne_W0lf]
//=	Reworked variables slightly so that the permenents ones aside from the 
//=	main tracking variable, are deleted when no longer needed. Renamed
//=	several variables that handle strings to @KHInput$. [L0ne_W0lf]
//= 1.2 Removed duplicate NPCs. [Toms]
//= 1.3 More Bug fixes, fixed typo. Updated Additional comments. [L0ne_W0lf]
//= 1.4 Fixed doors not resetting in kh_kiehl01 after 30 second timer is up. [L0ne_W0lf]
//= 1.5 Another bug fixed (&& instead of ||). [L0ne_W0lf]
//= 1.6 More squashed bugs with if checking. [L0ne_W0lf]
//= 1.7 Corrected some spelling mistakes. [Balish]
//	Corrected Exploit with the pub man, giving infinite wine and money.
//	Corrected pool and map not showing text for some states of the quest.
//	Corrected Elly showing cutin but not text for some states of the quest (causing players to log off to continue).
//	Let fisherman talk to you when you have 10 fishes OR MORE.
//	Corrected not letting you enter the tombstone after finishing the quest.
//= 1.8 Elly now deletes the Steel_box, and Kiel Hyre deletes the Pin. [L0ne_W0lf]
//= 	More security on the 5th Big Door, now makes sure no one outside of who-
//=	acticated it initially can use it. Resets after 10 minutes to make it.
//=	Made it so that you need to be at least step 84 to activate the final door.
//=	Corrected not deleting Allysia's Ring from inventory.
//= 1.9 Exit will now enable if you are just retrieving the Ring, keeps you from getting stuck. [L0ne_W0lf]
//=	Corrected "KH_Kielh02", was setting off a debug, invalid map index. Should have been "kh_Kiehl02"
//=	Made .KHQuestBusy$ into a temp global variable. $@KHQuestBusy$. 
//= 2.0 Changed the labels on the "Big Doors" to "Identifier Names" to prevent an error with using getvariableofnpc [L0ne_W0lf]
//= 2.1 Fifth door now checks for a variable HIGHER or EQUAL to 74 not 84, as pointed out by Stollen. [L0ne_W0lf]
//= 2.2 Another fix for Elly, no longer RESETS to 26 when you talk to her. [L0ne_W0lf]
//= 2.3 Should NOT have been setting .KHQuestBusy at all. It's not used or accessed anymore. Removed. [L0ne_W0lf]
//= 2.4 Lots of fixes (4ish) from Valandi. [L0ne_W0lf]
//=	Added a getmapuser check to the mapwarp in KHTimerEnd so it's not trying to warp out 0 users. [L0ne_W0lf]
//= 2.5 Fixed several small issues (and large one) such as typos in cutins, typos in dialog, etc. [L0ne_W0lf]
//=	Added some of the missing dialogs for several NPCs, and fixed a few NPC locations.
//=	ALL books can now trigger the wall.
//=	Allysia will now summon 4 (was 2) G_CONSTANTS instead of REGULAR constants.
//=	Fixed where Golden_Key and Exquisite_Button are deleted.
//=	Removed KHTimerEnd, and instead use OnReset.
//=	Fixed typo in the second NPC that gives Black Keycards.
//=	Added Monster Warps. (Keeps monsters from being in dungeon quest area.) [Non-functional]
//= 2.6 Stupid mistake, accidentally had 4 copies of the same script in 1... [L0ne_W0lf the bonehead]
//= 2.7 Fixed the wrong name being displayed for Kiel Hyre in one dialog. 
//=	Removed $@KH_DoorInvoker entirely. The quest is now working like it should according to iRO.
//=	Fixed up a few more NPC headers. Facing direction fixes mostly this time.
//=	More progression changes to Kiehl Hyre. He no longer stops dialog after the agents appear.
//= 2.8 Fixed the weight checking in Vandt, and added official dialog. [L0ne_W0lf]
//=	Added weight checks for all NPCs that give items. Semi-official dialog.
//=	Got the missing portion of dialog for Mills'.
//=	Will add further proper dialogs as I get to them on the second runthrough of the quest.
//= 2.8a minor optimization with extra goto, else or empty switch [Lupus]
//= 2.9 Fixed the "enablenpc" problem with the missing spaces. No idea how it happened. [L0ne_W0lf]
//= 3.0 Fixed a typo in Elly, in her room. (was <= should have been <) [L0ne_W0lf]
//=	Added an 'end;' to the cookie basket. Kiel Hyre's final dialog will now delete all quest-related items.
//= 3.1 Moved the "delitem" for all related quest items to the proper NPC. [L0ne_W0lf]
//= 3.2 Fixed error with Allysia teling you to "Go away." maybe. [L0ne_W0lf]
//= 3.2b Fixed some typos and grammar mistakes. [SinSloth]
//= 3.3 Fixed the receiver log out bugs. [L0ne_W0lf]
//= 3.4 Fixed bug when u can't get a Yellow Keycard if u got the Blue one at first [Lupus]
//=		Note: There are many condition checks that should be omitted in the future fixed item names in item_db.txt / txt resources according the quest
//=		for items, should be used bitwise methods in a single variable. So let's fix the rest possible bugs (if they exist) and then optimize ^_-		
//= 3.5 Changed the way the Black Keycard distibuting NPCs work slighty. [L0ne_W0lf]
//= 3.6 Keil Hyre removes ALL outstanding quest items when he is talked [L0ne_W0lf]
//=	to after finishing the quest.
//= 3.7 Corrected NPC names to fall within proper restrictions. [L0ne_W0lf]
//= 3.8 Corrected some delitems. (bugreport:690) [Samuray22]
//= 3.9 Fixed a cutin not being erased. (bugreport:1539) [L0ne_W0lf]
//============================================================ 
//============================================================================
// Kiel Hyre Quest/Robotic Lab Dungeon
//
// Script Dialog Obtained and Copied Down by L0ne_W0lf
// Timer work and some variable dances by DZeroX
// Based on [iRO Sakray] as of [03/29/2007]
//============================================================================
//----------------------------------------------------------------------------
// [Notes]
//  - Let it be noted that ALL DIALOG IS OFFICIAL TO IRO UNLESS SPECIFIED.
//  - I've fixed a few of iRO's mistakes, but I'm sure I made some of my own. 
//  - Will probably require a major optimizing.
//  - Accidentally progressed Elly's dialog while reading 'Letter to Elly'. Improvising.
//  - Possible missing dialog for some getitem weight checks.
//  - Possible missing dialog for "Test Tube" if you haven't read the second poem.
//  - Possible missing dialog for Elly in Dromitory if you don't have "Steel Box"
//  - Possible missing dialog for "Grave" if you don't have "Yellow Keycard"
//  - Not going to list ALL of the more usless NPCs. (Doors + Empty "Beautiful Ladies")
//  - Accidently progressed Kiel Hyre's dialog. Improvising.
//  - Improvising for getting back in to see Mitchell if you butterfly wing and need to get back in.
//  - Possible missing dialog for "Odd Grandma"
//  - Possible missing dialog for "Shelf"
//  - Near the end I finshed the quest with some people. Used packet logging to get dialog.
//    Because of the above mentioned, NPC placement and dialog is a little sloppier.
//  - Possible missing dialog for "Kiel Hyre" (Accept and Okay responses)
//  - Parties are *NOT REQUIRED* as per Doddler's Wiki information.
//  - Possible missing dialog for "Kiel Hyre" if you don't have Allysia's Ring.
//
//----------------------------------------------------------------------------
// [Maps]                [Use]
//  yuno_in01 ........... Start quest in pub
//  kh_school ........... Deliver Wine here, Meet Elly
//  yuno ................ Get Delivery for/from "Little Kid"
//  lighthalzen ......... Get Delivery package for "Little Kid"
//  kh_vila ............. Kiel Hyre cottage.
//  kh_dun01 ............ Robot Factory; Save Kiel Hyre
//  kh_mansion .......... Kiel Hyre's Mansion in Lighthalzen
//  kh_kiehl01 .......... Kiehl's room/Cave
//  kh_kiehl02 .......... Kiehl's room/Boss Room
//
//----------------------------------------------------------------------------
// [Variables in Use]
//  KielHyreQuest 	- Main quest tracking variable (Quest finished at 106)
//
//  KHPubMasterEnd	- Finished with Pun Master if set to 1
//			- Deleted once no longer needed.
//
//  KHToastGirlEnd	- Pick up delivery if set to 1, 
//			- picked up delivery if set to 2
//			- finished if set to 3 
//			- Deleted once no longer needed.
//
//  KHCottagePoem1	- Tracks Poem 1 quest in cottage. (finished = 5)
//			- Deleted once no longer needed.
//
//  KHCottagePoem2	- Tracks Poem 2 quest in cottage. (finished = 3)
//			- Deleted once no longer needed.
//
//  @KHInput$		- Used with "Security Guard"
//  			- Used with "Test Tube"
//  			- Used when "Elly" (inputing string in attempt to wake her)
//  			- Used with "Grave", (twice)
//  			- Used with "Heavy Door"
//  			- Used with "Mechanical Device"
//  			- Used for opening various doors in Kiehl's area.
//
//  @KHFirstKeyhole	- Holds 1 (green keycard) or 2 (cottage key)
//  @KHSecondKeyhole	- Holds 1 (green keycard) or 2 (cottage key)
//
//  @KHPotionColor$	- Holds 'red', 'green', or 'yellow' depending on what wrong potion is selected.
//
//  @KHFirstSword 	- holds 1, 2, 3 or 4. Used to keep track of swords and snakes.
//  @KHSecondSword 	- holds 1, 2, 3 or 4. Used to keep track of swords and snakes.
//  @KHThirdSword	- holds 1, 2, 3 or 4. Used to keep track of swords and snakes.
//  @KHFourthSword	- holds 1, 2, 3 or 4. Used to keep track of swords and snakes.
//
//  @KHClimbAttempt	- Set to random (1-5) to determine if you fail at climbing the water pipe.
//
//  @KHQ1Read		- Make sure player has asked question 1 to Kiel Hyre
//  @KHQ2Read		- Make sure player has asked question 2 to Kiel Hyre
//  @KHQ3Read		- Make sure player has asked question 3 to Kiel Hyre
//
//  @KHTitle$		- Holds "Mr", "Mrs", or "Miss"
//
//  @KHDoorPushAttempt	- Keeps track of how many times a person has attmepted pushed the door open.
//
//  @KHPryingItem$	- Used for incorrect options when prying open last door.
//
//  .KHKilled		- Tracks how many monsters have been killed. Used with "Receiver", "Robots", and "Kiehl" NPCs
//
//  .KHDoor1Open	- 0/1 Depending on if the first door is opened.
//  .KHDoor2Open	- 0/1 Depending on if the second door is opened.
//  .KHDoor3Open	- 0/1 Depending on if the third door is opened.
//  .KHDoor4Open	- 0/1 Depending on if the fourth door is opened.
//  .KHDoor5Open	- 0/1 Depending on if the fifth door is opened.
//
//  .KHKilledBoss	- 0/1 depending on if the boss has been killed.
//
//  $@KHQuestBusy	- 0/1 depending on if the boss room has been set in motion.
//
//----------------------------------------------------------------------------
// [NPCs]			 [Location]
//  Pub Master .................. yuno_in01	[ 35,178]
//  Hanie ....................... yuno_fild08	[196,196]
//  Security Guard .............. yuno_fild08	[158,194]
//  Security Guard .............. yuno_fild08	[158,183]
//  Student ..................... kh_school	[ 57,142]
//  Student ..................... kh_school	[ 57,139]
//  Lady ........................ kh_school	[176, 60]
//  Cute Student ................ kh_school	[179, 39]
//  Little Kid .................. yuno		[217,114]
//  Windmill Owner .............. lighthalzen	[365,300]
//  Cottage Keeper .............. yuno_fild02	[ 93,210]
//  Door ........................ yuno_fild02	[ 75,218]
//  Door ........................ yuno_fild02	[109,218]
//  Wall ........................ kh_vila	[191, 14]
//  Book ........................ kh_vila	[184, 20]
//  Book ........................ kh_vila	[181, 20]
//  Book ........................ kh_vila	[178, 20]
//  Book ........................ kh_vila	[175, 19]
//  KH_Letter_Trigger ........... kh_vila	[179, 11]
//  Box ......................... kh_vila	[ 16,175]
//  Apple Box ................... kh_vila	[ 30,184]
//  Map ......................... kh_vila	[ 44,125]
//  Pot ......................... kh_vila	[ 33,148]
//  Calabash .................... kh_vila	[ 14, 55]
//  Pool ........................ kh_vila	[ 39, 39]
//  Vicious Dog ................. kh_vila 	[180,178]
//  Drawer ...................... kh_vila 	[115,186]
//  Box ......................... kh_vila 	[107,126]
//  Bookshelf ................... kh_vila 	[181,138]
//  Sword Hilt .................. kh_vila 	[136, 69]
//  Test Tube ................... kh_vila	[179, 69]
//  Test Tube ................... kh_vila	[185, 69]
//  Window ...................... yuno_fild08	[ 69,185]
//  Elly ........................ kh_school	[178,180]
//  Cookie Basket ............... kh_school	[175,175]
//  Window ...................... kh_school	[188,185]
//  Grave ....................... yuno_fild08	[ 72,170]
//  Heavy Door .................. kh_dun01	[236, 48]
//  Beautiful lady .............. kh_school	[119,149]
//  Beautiful lady .............. kh_school	[122,186]
//  Signboard ................... kh_dun01	[163,223]
//  Mechanical Device ........... kh_dun01	[166,223]
//  Mechanical Device ........... kh_dun01	[162,206]
//  Kiel_Hyre_Door .............. kh_dun01	[224,232]
//  Steward ..................... kh_mansion	[ 78, 55]
//  Kiel Hyre ................... kh_mansion	[ 22, 27]
//  Allysia ..................... kh_mansion	[ 22, 27]
//  Abduction_trigger ........... lighthalzen	[188,200]
//  Mysterious Woman ............ kh_mansion	[ 25, 79]
//  Odd Granma .................. yuno		[250,132]
//  Old Lady .................... yuno 		[250,132]
//  Rosimmir_Entrance ........... yuno		[273,141]
//  Table ....................... kh_rossi	[ 23, 23]
//  Shelf ....................... kh_rossi	[ 92, 40]
//  Desk ........................ kh_rossi	[144,146]
//  Bookshelf ................... kh_rossi	[144,146]
//  Old Fisherman ............... yuno_fild12	[232,222]
//  Wooden Board ................ yuno_fild09	[158,217]
//  Kiehl_Room_Warp ............. kh_mansion	[ 29, 27]
//  Entrance Device#KHEntry1 .... kh_dun01	[ 44, 20]
//  Entrance Device#KHEntry2 .... kh_dun01	[ 44,203]
//  Security Guard .............. yuno_fild08	[158,194]
//  Receiver .................... kh_kiehl01	[ 17, 39]
//  Flower Vase ................. kh_kiehl01	[ 13, 40]
//  Box ......................... kh_kiehl01	[ 19, 25]
//  Big Door .................... kh_kiehl01	[ 44, 33]
//  Big_Door_1_Warp ............. kh_kiehl01	[ 43, 33]
//  Big Door .................... kh_kiehl01	[174, 40]
//  Big_Door_2_Warp ............. kh_kiehl01	[174, 39]
//  Big Door .................... kh_kiehl01	[ 77,108]
//  Big_Door_3_Warp ............. kh_kiehl01	[ 68,108]
//  Big Door .................... kh_kiehl01	[ 41,177]
//  Big_Door_4_Warp ............. kh_kiehl01	[ 78,177]
//  Robots ...................... kh_kiehl01	[ 15,181]
//  Big Door .................... kh_kiehl01	[166,187]
//  Big_Door_5_Warp ............. kh_kiehl01	[166,186]
//  Kiehl_Room_Trap ............. kh_kiehl02	[ 49, 15]
//  Kiehl#Original .............. kh_kiehl02	[ 50, 52]
//  KiehlRoom ................... kh_kiehl02	[  1,  1]
//  Floating NPC (Agent#KHAgent0::KHAgent)
//  Mitchell#KiehlRoom .......... kh_kiehl02	[ 49, 55]
//  Agent#KHAgent1 ....   ....... kh_kiehl02	[ 53, 52]
//  Agent#KHAgent2 .............. kh_kiehl02	[ 51, 49]
//  Agent#KHAgent3 .............. kh_kiehl02	[ 47, 50]
//  Agent#KHAgent4 .............. kh_kiehl02	[ 46, 53]
//  Kiehl#Copy .................. kh_kiehl02	[ 48, 53]
//  Kiehl_Roomn_Exit ............ kh_kiehl01	[ 50, 59]
//
//----------------------------------------------------------------------------
// [Functions]
//  None
//
//----------------------------------------------------------------------------
// [Conflicts]
//   Resolved
//
//============================================================================


//============================================================================
// Affiliated NPCs
//============================================================================

//----------------------------------------------------------------------------
// Juno Pub Master/Starting point.
//----------------------------------------------------------------------------
yuno_in01,35,179,1	script	Dono de Bar	46,4,4,{
	if (checkweight(7487,1) == 0) {
		show "[Vandt]";
		show "Só um segundo! Você está";
		show "carregando muitos itens";
		show "no momento. É melhor você";
		show "colocar suas coisas no armazen da";
		show "Kafra ou você não será";
		show "capaz de pegar nada novo...";
		close;
	}

	if (KielHyreQuest == 1) {
		show "[Vandt]";
		show "Olá, bem vindo";
		show "ao meu bar. Então o que";
		show "gostaria de tomar?";
		next;

		switch(select("Cerveja, por favor","Um coquetel, por favor","Soju, por favor.","você parece preocupado, o que houve?","Cancelar")) {
 
		case 1:
			show "[Vandt]";
			show "Certo, deixe-me pegar";
			show "um copo de cerveja para você";
			show "Aqui está, esta é";
			show "a cerveja espacial Schwaltz.";
			next;
			show "^3355FF*Gulp gulp gulp*^000000";
			percentheal 5,-5;
			next;
			show "["+strcharinfo(0)+"]";
			show "Ahhh, isso é realmente";
			show "bom! Realmente acerta";
			show "lá embaixo!!";
			close;

		case 2:
			show "[Vandt]";
			show "Me desculpe, mas tenho de";
			show "entregar todos os ingredientes do";
			show "nosso coquetel à outros fregueses.";
			show "Talvez eu tenha o suficiente para fazer-lhe";
			show "algo na próxima vez, okay?";
			close;

		case 3:
			show "[Vandt]";
			show "S-soju? Desculpe,";
			show "mas não servimos isso";
			show "aqui. É um muita coisa de machão";
			show "num drink para mim...";
			close;

		case 4:
			show "[Vandt]";
			show "Oh, você por acaso ouviu?";
			show "Desculpe, é que um dos meus";
			show "empregados sofreu um";
			show "acidente e se machucou muito,";
			show "então não tenho ninguém que possa";
			show "entregar essa mercadoria.";
			next;
			show "[Vandt]";
			show "Eu tenho um pedido urgente";
			show "que preciso enviar para";
			show "a Academia de Kiel Hyre,";
			show "mas não consigo encontrar alguém";
			show "disponível para esse";
			show "tipo de trabalho temporário.";
			next;

			switch(select("Sinto por saber disso","Quer que eu te ajude?")) {

			case 1:
				show "[Vandt]";
				show "Bem, com certeza irei";
				show "pensar em alguma coisa.";
				show "Você conhece alguém";
				show "que esteja interessado em";
				show "algum trabalho meio período?";
				close;

			case 2:
				show "[Vandt]";
				show "Mesmo? Que ótimo!";
				show "Mas antes, acho que é justo lhe";
				show "dizer que esse serviço pode não";
				show "ser tão simples quanto você pensa.";
				show "Espero que você complete a";
				show "entrega não importa o que aconteça.";
				next;

				switch(select("Claro, eu farei", "Espere, deixe-me pensar...")) {

				case 1:
					show "[Vandt]";
					show "Estou contente de ouvir isso.";
					show "Bem, então, por favor leve essa";
					show "garrafa de Vinho Para Culinária para";
					show "Senhora. ^ff0000Lecollane^000000 na academia";
					show "de Kiel Hyre. Lhe pagarei";
					show "assim que você termine o serviço, okay?";
					additem 7487,1; //Culinary_Wine
					set KielHyreQuest,2;
					close;

				case 2:
					show "[Vandt]";
					show "Certamente. Eu preciso";
					show "fazer isso logo, então se você";
					show "não pode fazer, mas conhece alguém";
					show "capaz, responsável que possa";
					show "então por favor";
					show "avise-o sobre minha situação.";
					close;

				}

			}

		case 5:
			show "[Vandt]";
			show "Certamente, leve o";
			show "tempo que quiser, relaxa,";
			show "e peça algo";
			show "quando estiver pronto.";
			close;
		}

	}

	else if ((KielHyreQuest >= 2) && (KielHyreQuest < 6)) {
		show "[Vandt]";
		show "Por favor entreque aquela garrafa";
		show "de vilho que lhe dei para Senhora.";
		show "^ff0000Lecollane^000000, que deve estar";
		show "dentro da Academia de Kiel Hyre.";
		show "Rápido e leve a ela antes que ela";
		show "possa reclamar sobre a entrega.";
		close;
	}

	else if ((KielHyreQuest == 6) && (KHPubMasterEnd != 1)) {
		show "[Vandt]";
		show "Oh, você voltou.";
		show "Obrigado por fazer aquela";
		show "entrega. Só me dá um";
		show "um instante ,então eu posso";
		show "pagar seu zeny, okay?";
		next;
		switch(select("Eu preciso de mais vinho...")) {

		case 1:
			show "[Vandt]";
			show "Oh, você precisa entregar";
			show "outra garrafa? Certo,";
			show "deixe-me olhar por aqui, e";
			show "lhe darei o vinho";
			show "e seu pagamento.";
			next;
			show "^3355FFRummage Rummage^000000";
			show "^3355FFRummage Rummage^000000";
			next;
			show "[Vandt]";
			show "Aqui está!";
			show "Muitíssimo obrigado";
			show "por me ajudar~";
			additem 7487,1; //Culinary_Wine
			set zeny,zeny+1000;
			set KHPubMasterEnd,1;
			close;
		}
	}

	else if ((KielHyreQuest > 6) || (KHPubMasterEnd == 1)) {
		show "[Vandt]";		
		show "Ei, muitíssimo obrigado";
		show "por ter me ajudado de";
		show "última hora. Eu sabia que tinha pedido";
		show "bem em cima da hora, mas";
		show "você acabou enviar um salvador";
		show "de vida! Eu realmente apreciei isso!";
		close;
	}

OnTouch:
	if (KielHyreQuest < 1) {
		show "[Vandt]";
		show "Arrrggghhh...";
		show "Isso não pode ser bom...";
		show "Isso não é nada bom!";
		show "O que eu posso fazer?";
		set KielHyreQuest,1;
		close;
	} 
}

//----------------------------------------------------------------------------
// Juno Toast Sales Girl.
//----------------------------------------------------------------------------
yuno,217,114,4	script	Criancinha	96,{
	if (KielHyreQuest < 6) {
		show "[Cezu]"; 
		show "Torrada Crocante, Fresca!";
		show "Se você quiser alguma, venha";
		show "e compre algumas torradaaaaasss~";
		close;
	}

	else if ((KielHyreQuest == 6) && (KHToastGirlEnd != 3)) {
		if (KHToastGirlEnd < 1) {
			show "[Cezu]"; 
			show "Torrada Crocante, Fresca!";
			show "Se você quiser alguma, venha";
			show "e compre algumas torradaaaaasss~";
			show "Oh! Hi hi~ Você quer";
			show "comprar algumas torradas deliciosas?";
			next;

			switch(select("Estou aqui por Elly","Não, obrigado")) {

			case 1:
				show "[Cezu]"; 
				show "Oh, Entendo. Elly deve ter";
				show "desperdiçado outro lote de";
				show "ingredientes novamente. bem,";
				show "ela é uma freguesa regular,";
				show "então eu realmente quero ajudar, mas";
				show "não posso fazer nada mesmo.";
				next;
				show "[Cezu]"; 
				show "Veja, eu simplesmente fiquei";
				show "sem ingredientes também!";
				show "Mas eu não posso mesmo sair";
				show "para buscar mais. E se";
				show "pessoas precisarem comprar torradas?";
				show "Ei, você pode me ajudar?";
				next;
				show "[Cezu]"; 
				show "você poderia pegar por favor";
				show "alguma farinha e ovos para mim";
				show "no ^3355FFMoinho de Lighthalzen^000000";
				show "Quando você voltar eu posso";
				show "dividir os ingredientes e você";
				show "pode entregar algum para Elly.";
				next;
				show "[Cezu]"; 
				show "Eu sei que estou basicamente";
				show "fazendo você fazer tudo";
				show "por sua conta, mas por favor tente";
				show "entender que minhas mãos";
				show "estão atadas. N-Não me pergunte";
				show "porque, elas simplesmente estão!";
				set KHToastGirlEnd,1;
				close;

			case 2:
				show "[Cezu]";
				show "Okay okay~";
				show "Por favor volte novamente!";
				close;
			}
		}

		else if (KHToastGirlEnd == 1) {
			show "[Cezu]";
			show "Você poderia ir por favor";
			show "ao Moinho de Lighthalzen";
			show "e dizer-lhes que Cezu precisa";
			show "de muita farinha e muitos ovos!";
			show "Então, traga tudo";
			show "prá mim o mais rápido que puder~";
			close;
		}

		else if (KHToastGirlEnd == 2) {
			show "[Cezu]";
			show "Hey, você voltou com os";
			show "ingredientes! Muitíssimo obrigada";
			show "eu realmente precisava deles!";
			show "Agora por favor leve essa farinha";
			show "e esses ovos para Elly, e";
			show "envie lembranças. Até mais~";
			delitem 7488,1; //Delivery_Package
			additem 7488,1; //Delivery_Package
			set KHToastGirlEnd,3;
			close;
		}

	}

	else if ((KielHyreQuest >= 6) || (KHToastGirlEnd == 3)) {
		//KHToastGirlEnd no longer needed-- deleting.
		set KHToastGirlEnd,0;
		show "[Cezu]";
		show "Quente , fresca e";
		show "crocaaaaannnnteeee torrada!";
		show "Venham peguem alguma!";
		close;
	}

}

//----------------------------------------------------------------------------
// Lighthalzen WindMill Owner.
//----------------------------------------------------------------------------
lighthalzen,365,300,2	script	Dono do Moinho	46,{
	if (checkweight(7488,1) == 0) {
		show "[Mills]";
		show "Hey, você está carregando muitas";
		show "coisas com você agora. ";
		show "Ponha sua tralha no Armazen da Kafra";
		show "se estiver esperando que eu lhe dê";
		show "alguma coisa. É por isso que você veio";
		show "aqui ao moinho, não foi?";
		close;
	}

	if (KHToastGirlEnd < 1) {
		show "[Mills]";
		show "Ei, que você que?";
		show "Estou muito ocupado agora";
		show "então, se importa de voltar";
		show "mais tarde? Então conversaremos.";
		close;
	}

	else if (KHToastGirlEnd == 1) {
		show "[Mills]";
		show "Ei, que cê qué?";
		show "Você simplesmente me pegou";
		show "em boa hora,";
		show "mas se você precisa de algo,";
		show "é melhor cuspir rápido, antes";
		show "que as coisas fiquem agitadas de novo.";
		next;

		switch(select("Estou aqui por  Cezu","......")) {

		case 1:
			show "[Mills]";
			show "Oh, Cezu da barraca";
			show "de torradas? Okay,";
			show "Tenho tudo que";
			show "aquela garota precisa";
			show "bem aqui. Tem ovos dentro,";
			show "então tenha muito cuidado com isso.";
			show "está pronto prá você...";
			next;
			show "[Mills]";
			show "A garota é uma dos meus";
			show "clientes regulares então você não";
			show "tem de me pagar ou fazer nenhuma";
			show "missão extra prá mim. Yeah,";
			show "Eu sei como outras pessoas tratam";
			show "vocês aventureiros. Bem até mais.";
			additem 7488,1; //Delivery_Package
			set KHToastGirlEnd,2;
			close;

		case 2:
			show "[Mills]";
			show "......";
			show "Hm, okay, bem se";
			show "você precisa de algo,";
			show "simplesmente faça, eu acho.";
			show "Cutz, Cutz onde você está?";
			show "É melhor você não estar enrolando!";
			close;

		}

	}

	else if (KHToastGirlEnd >= 2) {
		show "[Mills]";
		show "Aquele Cutz é um pirralho";
		show "tão preguiçoso. O cara";
		show "pensa que pode perambular por aí";
		show "quando ele está em cima da hora...!";
		show "Ah bem, ele sabe que eu posso achar";
		show "um assistente melhor. Ele vai aprender...";
		close;
	}

}

//============================================================================
//Kiel Hyre Academy NPCs
//============================================================================

//----------------------------------------------------------------------------
// Girl (Talks about the academy)
//----------------------------------------------------------------------------
yuno_fild08,196,196,5	script	Hanie	102,{
	show "[Hanie]";
	show "Oh, eu gostaria de poder estudar";
	show "na Academia de Kiel Hyre...";
	show "Todos os formandos conseguem";
	show "excelentes empregos! Estou quase";
	show "com ciúmes dos estudantes!";
	next;

	switch(select("Academia Kiel Hyre?")) {

	case 1:
		show "[Hanie]";
		show "Oh, a Academia de Kiel Hyre";
		show "é uma escola fundada por Kiel";
		show "Hyre, um inventor que se tornou";
		show "rico por suas estranhas máquinas.";
		show "Ele decidiu devolver à sociedade";
		show "construindo essa Academia particular.";
		next;
		show "[Hanie]";
		show "De qualquer forma, a escola somente";
		show "aceitará órfãos que são tão";
		show "pobres para entrar em qualquer outra";
		show "escola. Algumas vezes me faz";
		show "desejar que eu fosse um órfão também!";
		show "Bem, nem tanto, mas sabe...";
		close;
	}
}


//----------------------------------------------------------------------------
// Academy Security Guards
//----------------------------------------------------------------------------
yuno_fild08,158,194,5	script	Segurança#1::KHAGuard	852,{
	if ((KielHyreQuest < 2) && (KielHyreQuest >= 30)) { 
		show "[Segurança]";
		show "Desculpe, mas você não está";
		show "associado à essa instituição,";
		show "portanto você não está autorizado a";
		show "entrar na ^FF0000Academia Kiel Hyre^000000.";
		show "Por favor vá embora se você não tiver";
		show "horário marcado com a Staff.";
		close;
	}


	else if (KielHyreQuest == 2) { 
		show "[Segurança]";
	show "Desculpe, mas você não está";
		show "associado à essa instituição,";
		show "portanto você não está autorizado a";
		show "entrar na ^FF0000Academia Kiel Hyre^000000.";
		show "Por favor vá embora se você não tiver";
		show "horário marcado com a Staff.";
		next;
		switch(select("Estou aqui para uma entrega.","......")) {
		case 1:
			show "[Segurança]";
			show "Você está aqui para entregar";
			show "algo? Okay, simplesmente me dê";
			show "o ^FF0000nome^000000 do recipiente,";
			show "seguido pelo ^FF0000item^000000 a ser";
			show "entregue, e eu irei verificar";
			show "antes de lhe deixar entrar.";
			next;

			digit @KHDelivery$;
			if (@KHDelivery$ != "Lecollane") {
				show "[Segurança]";
				show "Você veio entregar algum";
				show "vinho para...para quem? Qual era";
				show "o nome? Eu...Eu não acho";
				show "que tenhamos alguém na";
				show "academia chamado "+@KHDelivery$+"";
				close;
			}

			digit @KHDelivery$ ;
			if (@KHDelivery$ != "Vinho de Culinária") {
				show "[Segurança]";
				show "Então você está aqui para fazer";
				show "uma entrega à Sra. Lecollane?";
				show "O que você trouxe para";
				show "ela? Algum ^3355FF"+@KHDelivery$+"^000000?";
				next;
				show "[Segurança]";
				show "Deixe-me bipá-la antes,";
				show "e checar para ter certeza";
				show "de que ela está esperando";
				show "você. Deixe-me ver agora...";
				next;
				show "......";
				show ".........";
				show "............";
				next;
				show "[Segurança]";
				show "Huh. Mrs Lecollane";
				show "está esperando uma entrega,";
				show "mas não o item que você";
				show "disse que trouxe para";
				show "ela. você deveria checar";
				show "para ver se não houve alguma confusão...";
				close;
			}

			show "[Segurança]";
			show "Muito bem....";
			show "Então você está aqui para";
			show "entregar uma garrafa de";
			show "Vinho para a Sra. Lecollane?";
			show "Deixe-me bipá-la e";
			show "confirmar isso rapidamente.";
			next;
			show "......";
			show ".........";
			show "............";
			next;
			show "[Segurança]";
			show "Okay, tudo parece";
			show "certo. Sra. Lecollane";
			show "está esperando você.";
			show "Acho que você pode entrar.";
			close2;
			warp "kh_school",71,155;
			end;

		case 2:
			show "[Segurança]";
			show "Se você não tiver";
			show "um agendamento, então";
			show "não fique vadiando em";
			show "frente da academia!";
			close;

		}

	}

	else if (KielHyreQuest >= 4) { 
		show "[Segurança]";
		show "Oh, você tinha";
		show "outros negócios dentro";
		show "da academia? Eu lembro de";
		show "você de antes, então não";
		show "deve haver nenhum problema em";
		show "deixar você voltar lá dentro...";
		close2;
		warp "kh_school",71,155;
		end;
	}

}

yuno_fild08,158,183,7	duplicate(KHAGuard)	Segurança#2	852

//----------------------------------------------------------------------------
// Gossiping Teenagers/Story NPCs
//----------------------------------------------------------------------------
kh_school,57,142,7	script	Estudante::StudentKHQ1	893,3,3,{
	show "[Laci]";
	show "Oh, wow! nós normalmente";
	show "não temos muitos visitantes no";
	show "campus! Um, você não é";
	show "um novo membro da faculdade, é?";
	close;

OnTouch:
	show "[Laci]";
	show "Hey, Nesha...!";
	show "você ouviu por quê";
	show "Aaci não tem vindo";
	show "para aula por enquanto?";
	next;
	show "[Gui Nesha]";
	show "Isso mesmo eu não tenho";
	show "visto Aaci faz um tempo.";
	show "Algo aconteceu?";
	next;
	show "[Laci]";
	show "É porque....";
	show "Aaci viu um fantasma assustador!";
	show "É cem por cento verdade";
	show "Ouvi sobre isso de,";
	show "bem, você conhece minhas fontes.";
	next;
	show "[Gui Nesha]";
	show "...Quê...?";
	show "Ah, vai!!!";
	show "Cai fora da cidade.";
	close;
}

kh_school,57,139,1	script	Estudante::StudentKHQ2	893,{
	show "[Gui Nesha]";
	show "Não estamos um pouquinho";
	show "velhos para ficar falando";
	show "desse tipo de coisa? Você";
	show "sabe, rumores e fantasmas";
	show "estórias que não fazem sentido?";
	show "Qualé, Laci, sai dessa!";
	emotion e_swt2;
	close;
}

//----------------------------------------------------------------------------
// Mrs. Lecollane
//----------------------------------------------------------------------------
kh_school,176,60,4	script	Senhora::LadyKHQ	101,{
	if (KielHyreQuest < 2) {
		show "[Srs. Lecollane]";
		show "Algum problema?";
		show "Pessoas de fora não são permitidas";
		show "a vir aqui, por favor saia.";
		close;
	}

	else if (KielHyreQuest == 2) { 
		show "[Sra. Lecollane]";
		show "Oh, Olá. Ah!";
		show "você veio para";
		show "trazer meu vinho? O";
		show "segurança chamou e";
		show "mencionou que você estava vindo.";
		next;

		switch(select("Sim, é isso mesmo!","Er, d-desculpe!")) {

		case 1:
			show "[Sra. Lecollane]";
			show "Bem, você veio um pouquinho";
			show "mais tarde do que eu imaginava, mas";
			show "acho que não adianta nada.";
			show "Acho que a espera simplesmente";
			show "alegrou minha antecipação";
			show "por essa garrafa de vi--";
			next;
			show "^3355FF*Cling! Crrrack!*^000000";
			next;
			show "[Sra. Lecollane]";
			show "Elly? Elly você";
			show "quebrou algo novamente?!";
			show "Você tem de ter mais cuidado!";
			show "Se você não terminar de cozinhar aqueles";
			show "biscoitos até o fim do dia, suas";
			show "notas semestrais irão sofrer!";
			next;
			show "[Elly]";
			show "M-Mas eu só...";
			next;
			show "[Mrs. Lecollane]";
			show "^FF0000Elly^000000!!";
			next;
			show "[Elly]";
			show "......";
			show "Sim, Sra. Lecollane.";
			next;
			show "[Sra. Lecollane]";
			show "*Ahem* Com licença.";
			show "Você poderia deixar";
			show "o vinho ali? você";
			show "pode ir agora, e por favor";
			show "não fique vagando desnecessáriamente";
			show "pela academia.";
			delitem 7487,1; //Culinary_Wine
			set KielHyreQuest,4;
			close;

		case 2:
			show "[Sra. Lecollane]";
			show "Hm...?";
			show "Acho que devo";
			show "estar enganada. Me";
			show "desculpe, Achei que você";
			show "fosse outra pessoa.";
			close;
		}
		return;
	}

	else if (KielHyreQuest == 4) {
		show "[Mrs Lecollane]";
		show "Bem, nosso negócios está";
		show "completo, então você poderia";
		show "por favor deixar o campus";
		show "assim que puder? *Sigh*";
		show "Não acredito que nosso futuro";
		show "está nas mãos dessas garotas...";
		close;
	}
}

//----------------------------------------------------------------------------
// Elly (In school)
//----------------------------------------------------------------------------
kh_school,179,39,1	script	Estudante Bonita	895,{
	set @now_weight,MaxWeight-Weight;
	if (@now_weight < 2000) {
		show "[Elly]";
		show "Desculpe, mas você poderia";
		show "colocar algumas das suas coisas no";
		show "seu Armazen da kafra antes ou";
		show "algo assim? Eu não posso mesmo";
		show "te ajudar enquanto você estiver";
		show "carregando tanta coisa.";
		close;
	}

	cutin "kh_elly01",2;
	if (KielHyreQuest < 4) { 
		cutin "kh_elly03",2;
		show "[Elly]";
		show "W-wah! Oh...!";
		show "*Phew* Essa foi por pouco,";
		show "eu quase os derrubei";
		show "novamente! Por quê eu tenho tanta";
		show "dificuldade em manusear ingredientes?";
		goto KH_Elly_end;
	}

	else if (KielHyreQuest == 4) { 
		cutin "kh_elly03",2;
		show "[Elly]";
		show "Oh não, o que eu devo";
		show "fazer? *Sob* O-o quê";
		show "eu vou fazer? *sniff*";
		next;
		switch(select("O que aconteceu?","......")) {

		case 1:
			show "[Elly]";
			show "Eu...Eu tenho de terminar de assar";
			show "essa leva de biscoitos até";
			show "o fim do dia, mas então eu derrubei";
			show "todos os ingredientes no";
			show "chão. Eu não sei como eu posso";
			show "assar aqueles biscoitos agora...";
			next;
			switch(select("O que posso fazer para ajudar-lhe?","Oh, Sinto muito.")) {

			case 1: 
				cutin "kh_elly02",2;
				show "[Elly]";
				show "O que foi...?";
				show "Você realmente me ajudará?";
				show "Isso é maravilhoso!";
				show "Obrigada! Muitíssimo obrigada!";
				next;
				L_Accept:
				cutin "kh_elly04",2;
				show  "[Elly]";
				show "Bem, acho que a única maneira";
				show "de eu assar esses biscoitos é";
				show "conseguir alguns ingredientes novos.";
				show "Desculpe eu ser um peso,";
				show "mas se você não se oferecesse para me";
				show "ajudar, então eu não teria a quem pedir!";
				next;
				show "[Elly]";
				show "Você não entende o quão";
				show "importante é de eu assar";
				show "esses biscoitos... Se eu não";
				show "terminar essa tarefa, então";
				show "a Sra. Crank vai me reprovar por";
				show "todo o semestre!";
				next;
				cutin "kh_elly03",2;
				show "[Elly]";
				show "Okay, eu preciso me acalmar";
				show "Acho que posso fazer";
				show "isso com sua ajuda.";
				show "Você poderia me fazer";
				show "esse enorme favor e me trazer";
				show "todos esses ingredientes?";
				next;
				cutin "kh_elly01",2;
				show "[Elly]";
				show "^3355FF1 Vinho de Culinária^000000";
				show "^3355FF7 Leites^000000";
				show "^3355FF5 Cacaos^000000";
				show "^3355FF2 Queijos^000000";
				show "^3355FF1 Ovo^000000, e";
				show "^3355FF1 Saco de Farinha^000000";
				next;
				show "[Elly]";
				show "Vejamos...Você pode";
				show "conseguir o vinho no bar em";
				show "Juno, Cacaos caçando";
				show "Yoyos, e pode pegar a farinha";
				show "e ovos da garota que tem uma";
				show "barraca de torradas em Juno.";
				next;
				show "[Elly]";
				show "boa sorte em pegar";
				show "tudo, e espero que";
				show "você volte logo com esses";
				show "ingredientes de biscoitos";
				show "o mais rápido que puder, okay?";
				set KielHyreQuest,6;
				goto KH_Elly_end;

			Case 2:
				show "[Elly]";
				show "O que, você não vai";
				show "para essa escola, você";
				show "vai? V-Você é um";
				show "daqueles aventureiros, certo?";
				next;
				switch(select("Sim, está correto.")) {

					show "Escuta, eu acredito que você";
					show "provavelmente tem seus próprios";
					show "planos, mas não acha que";
					show "você pode me ajudar com esse";
					show "enorme problema que eu tenho?";
					next;
					switch(select("Aceito","Recuso")) {
		
					case 1:
						//bigsmile
						show "Que maravilhoso!";
						show "Obrigada! Obrigada";
						show "mesmo! Era para eu";
						show "terminar de assar esse lote de";
						show "biscoitos logo, mas eu derrubei";
						show "todos os ingredientes...";
						next;
						goto L_Accept;

					case 2:
						show "["+strcharinfo(0)+"]";
						show "Vou cair fora daqui.";
						next;
						emotion e_sob;
						show "E-Espere...!";
						show "volte, você";
						show "n-não...! Eu realmente";
						show "preciso de uma ajuda!";
						goto KH_Elly_end;

					}

				}

			}

		case 2:
			show "*Sob*...";
			goto KH_Elly_end;
		}

	}

	else if (KielHyreQuest == 6) {
		//519 - Milk; 548 - Cheese; 7182 - Cacao; 7487 - Culinary_Wine; 7488 - Delivery_Package
		if ((countitem(519) < 7) || (countitem(548) < 2) || (countitem(7182) < 5) || (countitem(7487) < 1) || (countitem(7488) < 1)) {
			show "[Elly]";
			show "Deixe-me ver, você gostaria";
			show "que eu lhe lembrasse";
			show "quais ingredientes eu preciso?";
			show "Por favor traga essas coisas o";
			show "mais rápido que puder para eu";
			show "assar rapidamente esses biscoitos~";
			next;
			show "[Elly]";
			show "^3355FF1 vinho de Culinária^000000";
			show "^3355FF7 Leites^000000";
			show "^3355FF5 Cacaos^000000";
			show "^3355FF2 Queijos^000000";
			show "^3355FF1 Ovo^000000, and";
			show "^3355FF1 Saco de Farinha^000000";
			next;
			show "[Elly]";
			show "Vejamos...Você pode";
			show "pegar o vinho no bar em";
			show "Juno, Cacaos caçando";
			show "Yoyos, e vocÊ pode pegar farinha";
			show "e ovos da garota que tem";
			show "uma barraca de torradas em Juno.";
			goto KH_Elly_end;
		}
		else {
			emotion e_ho;
			cutin "kh_elly02",2;
			show "[Elly]";
			show "Hooray! Finalmente eu tenho";
			show "tudo que eu preciso! Isso é";
			show "ótimo! Oh, você poderia por favor";
			show "aguardar um instante enquanto eu asso";
			show "esses biscoitos?  Não deve demorar";
			show "muito, então aguenta mais um pouco.";
			set KielHyreQuest,8;
			//KHPubMasterEnd no longer needed-- deleting.
			set KHPubMasterEnd,0;
			delitem 519,7; //Milk
			delitem 548,2; //Cheese
			delitem 7182,5; //Cacao
			delitem 7487,1; //Culinary_Wine
			delitem 7488,1; //Delivery_Package
			goto KH_Elly_end;

		}

	}

	else if (KielHyreQuest == 8) {
		cutin "kh_elly01",2;
		show "[Elly]";
		show "Tadanh! Consegui!";
		show "Estão finalmente prontos!";
		show "''Biscoitos Especiais da Elly~''";
		show "Eu gostaria que você pegasse alguns";
		show "como agradecimento por ter me ajudado";
		next;
		show "[Elly]";
		show "Desculpe, mas eu estava tão";
		show "preocupada em assar";
		show "esses biscoitos que eu nem";
		show "perguntei pelo seu nome. Eu sou";
		show "^FF0000Ellyja^000000, mas todos me chamam,";
		show "''Elly.'' Qual o seu nome?";
		next;
		show "["+strcharinfo(0)+"]";
		show "^3355FF"+strcharinfo(0)+"^000000.";
		show "É ^3355FF"+strcharinfo(0)+"^000000.";
		next;
		cutin "kh_elly02",2;
		show "[Elly]";
		show ""+strcharinfo(0)+"?";
		show "...que nome! É maravilhoso!";
		set KielHyreQuest,10;
		additem 538,5; //Well_Baked_Cookie
		goto KH_Elly_end;
	}

	else if (KielHyreQuest == 10) {
		cutin "kh_elly01",2;
		show "[Elly]";
		show "Desculpe, mas eu tenho";
		show "outro favor para lhe pedir";
		show "se você não se importar em me ajudar";
		show "novamente. Não se preocupe,";
		show "você não precisa se apressar";
		show "tanto como fez da outra vez.";
		next;

		switch(select("O que você precisa?","Desculpe, mas estou muito ocupado...")) {

		case 1:
			show "[Elly]";
			show "Sabe como você me ajudou";
			show "a assar esses biscoitos?";
			show "É a primeira vez que fui capaz";
			show "de fazer sem queimá-los!";
			show "Sei que meu avô ficaria";
			show "orgulhoso de mim!";
			next;
			show "[Elly]";
			show "Eu realmente quero que meu avô";
			show "experimente esses biscoitos que eu assei,";
			show "mas os biscoitos já estarão estragados";
			show "na hora que eu puder sair do";
			show "campus. você entregaria esses";
			show "biscoitos pro meu avô prá mim?";
			next;

			switch(select("Claro","Estou ocupado.")) {

			case 1:
				cutin "kh_elly02",2;
				show "[Elly]";
				show "Oh, "+strcharinfo(0)+"!";
				show "Muitíssimo obrigada, eu sabia";
				show "que você entenderia! Voce poderia";
				show "por favor levar esses biscoitos para";
				show "ele na ^FF0000Cabana de Kiel Hyre^000000?";
				next;
				show "[Elly]";
				show "Ah, sim! Eles são realmente";
				show "cuidadosos sobre visitantes e";
				show "mantendo estranhos fora da";
				show "propriedade, mas se você mencionar";
				show "meu nome, eles lhe deixarão entrar.";
				show "Certo então, até mais~";
				set KielHyreQuest,12;
				goto KH_Elly_end;

			case 2:
				cutin "kh_elly03",2;
				show "[Elly]";
				show "Oh, um...";
				show "okay, Desculpe se";
				show "lhe aborreci...";
				goto KH_Elly_end;
			}


		case 2:
			cutin "kh_elly03",2;
			show "[Elly]";
			show "Oh, um...";
			show "okay, Desculpe se";
			show "lhe aborreci...";
			goto KH_Elly_end;
		}
	}

	else if (KielHyreQuest == 12) {
		show "[Elly]";
		show "Oh, você não sabe onde";
		show "encontrar a cabana de Kiel Hyre?";
		show "É bem ao norte dessa";
		show "academia. Por favor entregue meus";
		show "biscoitos para meu avô, e";
		show "diga a ele que tenho muitas saudades.";
		goto KH_Elly_end;

	}

	else if (KielHyreQuest == 14) {
		show "[Elly]";
		show "Hm? avô não está em";
		show "casa? Que estranho, ele";
		show "não mencionou nada sobre";
		show "nenhuma viagem de negócios.Achei";
		show "que estaria em casa o dia todo...";
		next;
		cutin "kh_elly04",2;
		show "[Elly]";
		show "você voltaria na";
		show "cabana dele mais uma vez? Aqui,";
		show "você pode usar essa chave da cabana.";
		show "Assim, você pode simplesmente";
		show "entrar e falar com ele~";
		additem 7489,1; //Cottage Key
		set KielHyreQuest,16;
		goto KH_Elly_end;
	}

	else if ((KielHyreQuest >= 14) && (KielHyreQuest < 20)) {
		show "[Elly]";
		show "Isso é tão estranho...";
		show "Achei que meu avô";
		show "disse que ficaria em";
		show "casa o dia todo...";
		goto KH_Elly_end;
	}

	else if (KielHyreQuest == 20) {
		show "[Elly]";
		show "Hmmm...?";
		show "O que é isso,";
		show "uma carta para mim?";
		next;
		show "^3355FFElly abriu o envelope^000000";
		show "^3355FFe começou a ler a carta^000000";
		next;
		show "Querida Elly";
		show "^FFFFFF_^000000";
		show "Tenho algo a conversar";
		show "com meu filho Kiehl, então estou";
		show "partindo para encontrá-lo.";
		show "Se não ouvir falar de mim";
		show "em 7 dias após eu lhe ter escrito";
		show "é possível que eu esteja";
		show "em perigo. Não confie em ninguém";
		show "na Academia, Elly.";
		show "Deixei algo para você";
		show "no Escritório.";
		next;
		cutin "kh_elly03",2;
		show "[Elly]";
		show "O quê? Oh não, fazem";
		show "dez dias desde que ele escreveu";
		show "essa carta! Ah, então isso";
		show "quer dizer que ele está em perigo?!";
		show "Oh não, o que devo fazer?";
		delitem 7490,1; //Letter_to_Elly
		set KielHyreQuest,22;
		goto KH_Elly_end;
	}

	else if (KielHyreQuest == 22) {
		show "[Elly]";
		show "......";
		show ".........";
		show "............";
		next;
		switch(select("Sobre seu Avô","Me fale sobre Kiehl","O que há com essa academia?")) {

		case 1:
			show "[Elly]";
			show "Oh! Meu avó é";
			show "fundador de Kiel Hyre, e";
			show "o Diretor Executivo da fundação";
			show "Kiel Hyre. Ele parece";
			show "fechado e de coração frio";
			show "mas na verdade é muito bom!";
			next;
			show "[Elly]";
			show "Nós não temos relação de";
			show "sangue, mas ele tem cuidado";
			show "de mim desde que";
			show "eu perdi meus pais. Oh,";
			show "Vovô, onde você está?";
			show "Estou ficando preocupada!";
			goto KH_Elly_end;

		case 2:
			show "[Elly]";
			show "Kiehl? É o filho";
			show "do meu avô...";
			show "Eu não o conheço muito";
			show "bem, e somente o vi";
			show "uma vez num evento da academia.";
			next;
			show "[Elly]";
			show "Mmm, ele é um rapaz";
			show "bonitão, com pele clara, cabelos";
			show "brancos, e seu frio, feroz olhar";
			show "Muitas de minhas colegas de classe";
			show "veneram Kiehl porque ele é";
			show "também um gênio dos negócios~";
			next;
			show "[Elly]";
			show "É estranho pensar...";
			show "Não tenho nem idéia porque meu";
			show "avô e Kiehl não saem";
			show "juntos. Ambos são realmente";
			show "bons no que eles fazem.";
			goto KH_Elly_end;

		case 3:
			show "[Elly]";
			show "Bem, eu sei que a segurança";
			show "aqui é bem rígida, mas";
			show "é porque tudo aqui";
			show "é tão luxuoso e";
			show "caro, sabe~";
			next;
			show "[Elly]";
			show "Também temos um currículo";
			show "bem especial onde";
			show "você aprende mais sobre o que";
			show "você quer. Pessoalmente, eu quero";
			show "me tornar uma mulher de grande carreira,";
			show "como ^3355FFSenhorita Allysia^000000. Heh heh~";
			next;
			show "[Elly]";
			show "Esse lugar certamente";
			show "não é como outras escolas.";
			show "Você já sabe disso";
			show "Sim, tudo é feito para se";
			show "encaixar às necessidades dos estudantes.";
			next;
			show "[Elly]";
			show "Recentemente, achava?";
			show "Algo realmente estranho";
			show "tem acontecido. Todas minhas colegas";
			show "de classe têm medo de sair";
			show "sozinhas por aí.";
			next;
			cutin "kh_elly02",2;
			show "[Elly]";
			show "Mas eu ficarei bem!";
			show "Você estará lá para";
			show "me resgatar do perigo";
			show "certo, "+strcharinfo(0)+"?";
			next;
			switch(select("Quem é Senhorita Allysia?","Incidentes estranhos?")) {

			case 1:
				show "[Elly]";
				show "Oh, Senhorita Allysia é";
				show "a secretária do vovô~";
				show "Ela é tão linda e";
				show "meu avô realmente";
				show "confia tudo à ela!";
				goto KH_Elly_end;

			case 2:
				cutin "kh_elly04",2;
				show "[Elly]";
				show "Bem, "+strcharinfo(0)+"...";
				show "Eu não deveria dizer";
				show "à ninguém fora da escola,";
				show "mas posso confiar em você! Sabe...";
				show "Estamos assombrados por um fantasma!";
				next;
				show "[Elly]";
				show "Sei que parece doido,";
				show "mas esse fantasma vaga pelo";
				show "campus, e amaldiçoa suas vítimas,";
				show "deixando-as tão fracas e sem vida.";
				show "Aconteceu com minha colega de quarto,";
				show "biquine. É como se ela fosse uma estátua.";
				next;
				show "[Elly]";
				show "Eu escapei para a enfermaria";
				show "para vê-la e ela...";
				show "Ela não podia fazer nada!";
				show "O que aconteceria se o";
				show "fantasma decidisse me amaldiçoar?!";
				next;
				cutin "kh_elly02",2;
				show "[Elly]";
				show "Sabe o quê...?";
				show "Se eu for amaldiçoada";
				show "por aquele fantasma, simplesmente grite";
				show "''^FF0000ACORDE, ELLY!^000000''";
				show "Que vai me acordar com certeza!";
				set KielHyreQuest,24;
				goto KH_Elly_end;

			}

		}

	}

	else if (KielHyreQuest == 24) {
		cutin "kh_elly04",2;
		show "[Elly]";
		show "Arg, Estou numa má situação!";
		show "Tenho de terminar meu";
		show "dever de casa antes do combinado!";
		show "Sim, tenho de ir ver";
		show "a Sra. Lecollane agora.";
		next;		
		goto KH_Step26;
	}

	else if (KielHyreQuest == 26) {
	KH_Step26:
		show "[Elly]";
		show "Diga, "+strcharinfo(0)+",";
		show "se estiver tudo be, você poderia";
		show "descobrir o que meu";
		show "avô deixou para mim no";
		show "^FF0000depósito da cabana^000000?";
		show "Você é o único que posso confiar!";
		next;
		show "[Elly]";
		show "De qualquer forma, te vejo mais tarde";
		show "ao anoitecer. Por favor venha";
		show "ao meu ^FF0000dormitório^000000. Um, os";
		show "dormitórios são na igreja bem";
		show "atrás da academia, okay?";
		next;
		show "[Elly]";
		show "Meu quarto é nos fundos,";
		show "e é no ^FF0000Segundo Andar^000000";
		show "^FF0000no lado esquerdo^000000. Por favor use";
		show "uma escada para subir, okay?";
		show "Deixarei minha janela aberta";
		show "para você, então venha, okay?";
		next;
		show "[Elly]";
		show "Rápido, rápido, a";
		show "professora está vindo!";
		set KielHyreQuest,26;
		goto KH_Elly_end;
	}

	else if (KielHyreQuest > 26) {
		show "[Elly]";
		show "Diga, "+strcharinfo(0)+",";
		show "se está tudo bem, você poderia";
		show "por favor encontrar o que meu";
		show "avô deixou para mim no";
		show "^FF0000escritório da cabana^000000?";
		show "você é o único que posso confiar!";
		next;
		show "[Elly]";
		show "De qualquer forma, te vejo mais tarde";
		show "ao anoitecer. Por favor venha";
		show "ao meu ^FF0000dormitório^000000. Um, os";
		show "dormitórios são na igreja bem";
		show "atrás da academia, okay?";
		next;
		show "[Elly]";
		show "Meu quarto é nos fundos,";
		show "e é no ^FF0000Segundo Andar^000000";
		show "^FF0000no lado esquerdo^000000. Por favor use";
		show "uma escada para subir, okay?";
		show "Deixarei minha janela aberta";
		show "para você, então venha, okay?";
		next;
		show "[Elly]";
		show "Rápido, rápido, a";
		show "professora está vindo!";
		goto KH_Elly_end;
	}

	KH_Elly_end:
		close2;
		cutin "",255;
		end;
}

//----------------------------------------------------------------------------
// Elly's Window 
//----------------------------------------------------------------------------
yuno_fild08,69,185,0	script	Janela::WindowKHQ1	111,{
	if ((KielHyreQuest <= 28) || (KielHyreQuest >= 46)){
		show "^3355FFEsse deve ser o quarto de Elly.^000000";
		show "^3355FFParece que não há ninguém^000000";
		show "^3355FFlá dentro então provavelmente^000000";
		show "^3355FFela ainda não voltou. Por enquanto^000000";
		show "^3355FFvocê poderia tentar encontrar o que^000000";
		show "^3355FFo avô dela deixou para ela^000000";
		show "^3355FFno escritóro da cabana deles.^000000";
		close;
	}

	if (KielHyreQuest >= 30) {
		show "^3355FFEssa janela um pouco aberta^000000";
		show "^3355FFdeve levar ao quarto de Elly.^000000";
		show "^3355FFAinda que ela tenha lhe pedido para^000000";
		show "^3355FFencontrar uma escada e entrar pela^000000";
		show "^3355FFjanela dela, você provavelmente não vai^000000";
		show "^3355FFachar nenhuma. Você pode ser capaz^000000";
		show "^3355FFde subir por aquele cano de água...^000000";
		next;
		switch(select("Subir pelo cano de água","Encontrar outra maneira")) {

		case 1:
			set @KHClimbAttempt,rand(1,5);
			if (@KHClimbAttempt == 1) {
				show "^3355FFVocê subiu pelo^000000";
				show "^3355FFcano de água e se esgueirou^000000";
				show "^3355FFno quarto de Elly com sucesso.^000000";
				close2;
				warp "kh_school",185,185;
				end;
			}

			else {
				show "^3355FFVocê tentou subir^000000";
				show "^3355FFno cano de água, mas^000000";
				show "^3355FFacabou falhando^000000";
				show "^3355FFe batendo sua cabeça^000000";
				percentheal -10,0;
				close;
			}

		case 2:
			show "^3355FFDeve haver alguma^000000";
			show "^3355FFoutra maneira de entrar no^000000";
			show "^3355FFQuarto de Elly, além de^000000";
			show "^3355FFsubindo por esse cano de água...^000000";
			close;

		}

	}

}

//----------------------------------------------------------------------------
// Elly (In Dormitory)
//----------------------------------------------------------------------------
kh_school,178,180,5	script	Elly	895,{
	set @now_weight,MaxWeight-Weight;
	if (@now_weight < 2000) {
		show "^3355FF- Espere!! -";
		show "- Você está carregando muitos itens";
		show "- e etá incapaz de aceitar mais nenhum. -";
		show "- Por favor abra algum espaço";
		show "- no seu inventario antes de retornar. -^000000";
		close;
	}

	if (KielHyreQuest < 30) {
		show "[Elly]";
		show "Oh~!";
		show "Quem é você!";
		show "como chegou aqui? Por favor saia";
		close2;
		percentheal -99,0;
		warp "yuno_fild08",100,100;
		end;
	}

	else if (KielHyreQuest == 32) {
		show "[Elly]";
		show "......";
		show ".........";
		show "............";
		next;
		show "^3355FFElly parece ter sido^000000";
		show "^3355FFamaldiçoada e está^000000";
		show "^3355FFcompletamente imóvel e^000000";
		show "^3355FFsem vida. Você tem de^000000";
		show "^3355FFtentar algo, mas o quê?^000000";
		next;

		switch(select("Acordá-la sacodindo-a.","Acordá-la gritando.","Ignorar")) {

		case 1:
			show "^3355FFVocê pega Elly pelos^000000";
			show "^3355FFombros e tenta fazer com que^000000";
			show "^3355FFela responda com uma sacodida^000000";
			show "^3355FFviolenta de todo o corpo dela.^000000";
			next;
			show "["+strcharinfo(0)+"]";
			show "Elly? Elly? não!";
			show "Volte para nós!";
			next;
			show "^3355FFElly não está respondendo...^000000";
			close;

		case 2:
			digit @KHInput$;
			if (@KHInput$ == "Acorde Elly!") {
				show "[Elly]";
				show ".........";
				show "^3355FFAssim que você disse aquelas^000000";
				show "^3355FFpalavras, uma ^000000Pequena Chave Dourada^000000";
				show "^3355FFe um ^000000Broche^3355FF caíram das mãos de^000000";
				show "^3355FFElly. Parece que ela acordou^000000";
				show "^3355FFmas somente por um instante.^000000";
				additem 7493,1; //Golden_Key
				additem 7494,1; //Exquisite_Button
				set KielHyreQuest,34;
				close;
			}

			else {
				show "[Elly]";
				show "......";
				show ".........";
				show "............";
				next;
				show "^3355FFElly não está respondendo...^000000";
				close;
			}

		case 3:
			show "^3355FFTudo bem.^000000";
			show "^3355FFMas cedo ou tarde,^000000";
			show "^3355FFvocê deve tentar quebrar^000000";
			show "^3355FFa maldição jogada em Elly.^000000";
			close;

		}

	}

	else if (KielHyreQuest == 34) {
		if (countitem(7491) < 1) {
			//Missing text, needs another run through.
			show "^3355FFTalvez a chave dourada^000000";
			show "destranque algo no^000000";
			show "escritório. Vamos dar uma olhada.^000000";
			close;
		}

		else {
			show "^3355FFParece que a chave dourada^000000";
			show "^3355FFde Elly cabe na^000000";
			show "^3355FFfechadura em uma^000000";
			show "^3355FFCaixa Cinza que você achou dentro^000000";
			show "^3355FFDa cabana em Kiel Hyre.^000000";
			next;
			show "^3355FFVocê conseguiu abrir a^000000";
			show "^3355FFCaixa cinza, com a Chave Dourada,^000000";
			show "^3355FFe encontrou um Cartão de Acesso Azul,^000000";
			show "^3355FFjunto com um bilhete dobrado dentro^000000";
			show "^3355FFda Caixa Cinza. Você rapidamente lê^000000";
			show "^3355FFo conteúdo do bilhete...^000000";
			next;
			show "Querida Elly,";
			show "Kiehl finalmente quebrou o tabu,";
			show "e tentou transformar vocês";
			show "em algo horrível.";
			show "^FFFFFF_^000000";
			show "Quando você ler isso,";
			show "minha vida provavelmente está em perigo.";
			show "Até onde viverei, dependerá de você.";
			show "^FFFFFF_^000000";
			show "Você já vai descobrir se você";
			show "encontrar Puppet, mas quero lhe dizer";
			show "eu mesmo: você não é humana.";
			show "Você descobrirá os detalhes se você";
			show "entrar na fábrica usando a";
			show "entrada perto da sepultura próxima";
			show "da igreja. Então quero";
			show "que você encontre Allysia dentro";
			show "da sala secreta da fábrica.";
			show "Eu registrei seu nome no";
			show "sistema de segurança dela, então não";
			show "se preocupe. Felizmente, Allysia virá";
			show "então me salvar...";
			show "^FFFFFF_^000000";
			show "Desculpe por isso,";
			show "Vovô";
			additem 7495,1; //Blue_Keycard
			delitem 7491,1; //Iron_Box
			set KielHyreQuest,36;
			close;
		}

	}

	else if (KielHyreQuest >= 36) {
		show "^3355FFAqui é onde você^000000";
		show "^3355FFdescobriu o bilhete^000000";
		show "^3355FFtrancado dentro da Caixa Cinza.^000000";
		show "^3355FFA seguinte mensagem estava^000000";
		show "^3355FFescrita no bilhete pelo avô^000000";
		show "^3355FFde Elly, Kiel Hyre.^000000";
		next;
		show "Querida Elly,";
		show "Kiehl finalmente quebrou o tabu,";
		show "e tentou transformar vocês";
		show "em algo horrível.";
		show "^FFFFFF_^000000";
		show "Quando você ler isso,";
		show "minha vida provavelmente está em perigo.";
		show "Até onde viverei, dependerá de você.";
		show "^FFFFFF_^000000";
		show "Você já vai descobrir se você";
		show "encontrar Puppet, mas quero lhe dizer";
		show "eu mesmo: você não é humana.";
		show "Você descobrirá os detalhes se você";
		show "entrar na fábrica usando a";
		show "entrada perto da sepultura próxima";
		show "da igreja. Então quero";
		show "que você encontre Allysia dentro";
		show "da sala secreta da fábrica.";
		show "Eu registrei seu nome no";
		show "sistema de segurança dela, então não";
		show "se preocupe. Felizmente, Allysia virá";
		show "então me salvar...";
		show "^FFFFFF_^000000";
		show "Desculpe por isso,";
		show "Vovô";
		close;
	}

}

//----------------------------------------------------------------------------
// Cookie Basket
//----------------------------------------------------------------------------
kh_school,175,175,0	script	Cesta de Biscoitos	111,{
	if (KielHyreQuest == 30) {
		show "^3355FFEssa deve ser^000000";
		show "^3355FFa Cesta de Biscoitos de Elly.^000000";
		show "^3355FFParece que há um^000000";
		show "^3355FFbilhete dobrado dentro^000000";
		show "^3355FFno meio dos biscoitos.^000000";
		next;

		switch(select("Ler o Bilhete","Ignorar")) {

		case 1:
			show ""+strcharinfo(0)+", socorro!";
			show "Tem esse cara vestido de";
			show "preto que está andando por aí,";
			show "e jogando essa magia estranha!";
			show "É ele que tem feito as";
			show "pessoas frias e sem vida como";
			show "bonecos! Estou assustada!";
			show "^FFFFFF_^000000";
			show "Espero que você pegue esse bilhete...";
			show "ele correu atrás de mim,mas me tranquei";
			show "no meu quarto. Vou deixar";
			show "minha janela aberta assim";
			show "você ainda pode me encontrar. Espero que";
			show "ele não jogue a maldição dele em mim!";
			set KielHyreQuest,32;
			close;

		case 2:
			show "^3355FFAquele bilhete provavelmente^000000";
			show "^3355FFnão foi escrito para^000000";
			show "^3355FFvocê de qualquer forma.^000000";
			close;

		}
	}

	else if (KielHyreQuest >= 32) {
		show "^3355FFEsses biscoitos não estão^000000";
		show "^3355FFestragados ainda, mas eles não^000000";
		show "^3355FFestão mais quentes. Se eles não^000000";
		show "^3355FFestão na temperatura do quarto,^000000";
		show "^3355FFentão estão um pouco frios.^000000";
		close;
	}
	end;
}

//----------------------------------------------------------------------------
// Elly's Window (In Dormitory)
//----------------------------------------------------------------------------
kh_school,188,185,0	script	Janela::WindowKHQ2	111,{
	warp "yuno_fild08",69,183;
	end;
}

//----------------------------------------------------------------------------
// Grave/Kiel Hyre dungeon entry
//----------------------------------------------------------------------------
yuno_fild08,72,170,0	script	Sepultura	111,{
	if (KielHyreQuest < 36) {
		//Missing text, needs another run through.
		show "^3355FFÉ só uma sepultura.^000000";
		show "^3355FFPode ser importante^000000";
		show "^3355FFpara você mais tarde, mas agora^000000";
		show "^3355FFnão é lá aquela^000000";
		show "^3355FFajuda para você.^000000";
		close;
	}

	else if (KielHyreQuest == 36) {
		if (countitem(7492) < 1) {
			
			show "^3355FFHá uma porta secreta^000000";
			show "^3355FFpróxima à essa sepultura. Parece^000000";
			show "^3355FFque há algum tipo de^000000";
			show "^3355FFslot e um teclado numérico^000000";
			show "^3355FFinstalado na porta.^000000";
			close;
		}

		else {
			show "^3355FFHá uma porta secreta^000000";
			show "^3355FFpróxima à essa sepultura. Parece^000000";
			show "^3355FFque há algum tipo de of^000000";
			show "^3355FFslot e um teclado numérico^000000";
			show "^3355FFinstalado na porta.^000000";
			next;
			show "^3355FFO que você deveria^000000";
			show "^3355FFinserir no slot?^000000";
			next;

			digit @KHInput$;

			if (@KHInput$ == "Cartão de Acesso Amarelo") {
				show "^3355FFUm barulho de confirmação eletrônica^000000";
				show "^3355FFaciona-se assim que você insere^000000";
				show "^3355FFo Cartão de Acesso Amarelo, seguido por^000000";
				show "^3355FFuma voz anônima que pergunta:^000000";
				next;
				show "[Sistema de Segurança]";
				show "Por favor entre a senha.";
				next;

				digit @KHInput$;

				next;

				if (@KHInput$ == "4772961") {
					show "[Sistema de Segurança]";
					show "Senha confirmada.";
					show "Bem vindo(a), Kiel Hyre.";
					next;
					show "^3355FFVocê ouve outro^000000";
					show "^3355FFbeep agradável e^000000";
					show "^3355FFum caminho secreto se abre.^000000";
					set KielHyreQuest,38;
					close;
				}

				else {
					show "[Sistema de Segurança]";
					show "Senha incorreta.";
					show "Por favor tente novamente.";
					close;
				}
			}

			else {
				show "^3355FFO que quer que você estiver^000000";
				show "^3355FFtentando inserir no slot^000000";
				show "^3355FFnão está funcionando...^000000";
				close;
			}

		}

	}

	else if ((KielHyreQuest >= 38) && (KielHyreQuest < 106)) {
		show "^3355FFA porta para a^000000";
		show "^3355FFfábrica está escancarada.^000000";
		next;

		switch(select("Entrar","Cancelar")) {

		case 1:
			warp "kh_dun01",3,230;
			end;
		case 2:
			show "......";
			show ".........";
			show "............";
			close;
		}

	}

	else if (KielHyreQuest >= 106) {
		if (countitem(7509) < 1) {
			show "^3355FFA entrada secreta";
			show "agora está selada.^000000";
			close;
		}

		else {
			show "Conforme você se aproxima da";
			show "sepultura, ela começa a";
			show "emitir flashes de luz.^000000";
			next;

			switch(select("Usar o ^0000FFCartão de Acesso Exuberante^000000","Ignorar")) {

			case 1:
				show "Uma vez que você usou o";
				show "Cartão de Acesso Exuberante,";
				show "um caminho secreto se abre^000000";
				next;

				switch(select("Entrar","cancelar")) {

				case 1:
					warp "kh_dun01",3,230;
					end;

				case 2:
					show "......";
					show ".........";
					show "............";
					close;

				}

			case 2:
				show "......";
				show ".........";
				show "............";
				close;

			}

		}

	}

}

//============================================================================

//============================================================================
//Kiel Hyre Cottage NPCs
//============================================================================

//----------------------------------------------------------------------------
// Cottage Keeper
//----------------------------------------------------------------------------
yuno_fild02,93,210,3	script	Guarda da Cabana	85,{
	if ((KielHyreQuest < 12) || (KielHyreQuest > 12)) {
		show "[Guarda da Cabana]";
		show "Isso é uma propriedade particular,";
		show "então por favor não entre nessa";
		show "área a não ser que seja autorizado.";
		close;
	}

	else if (KielHyreQuest == 12) {
		show "[Guarda da Cabana]";
		show "Isso é uma propriedade particular,";
		show "então por favor não entre nessa";
		show "área a não ser que seja autorizado.";
		next;

		switch(select("Tenho horário marcado com Kiel Hyre.","Certo.")) {

		case 1:
			show "[Guarda da Cabana]";
			show "Você tem um";
			show "horário marcado com";
			show "o Senhor Kiel Hyre?";
			show "Um, tem certeza?";
			next;
			switch(select("Sim","Não")) {

			case 1:
				show "[Guarda da Cabana]";
				show "Deve haver algum tipo";
				show "de engano. Senhor Hyre";
				show "não sairia se ele";
				show "supostamente tivesse de ter";
				show "um horário marcado...";
				set KielHyreQuest,14;
				close;

			case 2:
				show "[Guarda da Cabana]";
				show "Bem, a não ser que você tenha";
				show "um horário marcado, não";
				show "acho que você poderá";
				show "encontrar-se com Senhor yre.";
				close;
			}

		case 2:
			show "[Guarda da Cabana]";
			show "Até Mais.";
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage Door (left)
//----------------------------------------------------------------------------
yuno_fild02,75,218,0	script	Porta::DoorKHQ1	111,{
	if (KielHyreQuest < 16) {
		show "^3355FFEssa porta está trancada.^000000";
		show "^3355FFSe alguém por dentro não^000000";
		show "^3355FFabrir para você então você precisará^000000";
		show "^3355FFda chave certa para destrancá-la.^000000";
		close;
	}

	if (KielHyreQuest == 16) {
		show "^3355FFEssa porta está trancada.^000000";
		show "^3355FFSe alguém por dentro não^000000";
		show "^3355FFabrir para você então você precisará^000000";
		show "^3355FFda chave certa para destrancá-la.^000000";
		next;

		switch(select("Destrancar","Cancelar")) {

		case 1:
			show "^3355FFVocê destrancou a porta com a.^000000";
			show "^3355FFchave que Elly lhe deu, e.^000000";
			show "^3355FFassim que você a abre, um bilhete.^000000";
			show "^3355FFdobrado cai do topo da.^000000";
			show "^3355FFporta. As seguintes palavras.^000000";
			show "^3355FFestão escritas nessa nota rudimentar.^000000";
			next;
			show "6 Frente,";
			show "3 Esquerda,";
			show "3 Frente,";
			show "4 Esquerda";
			close2;
			set KielHyreQuest,18;
			warp "kh_vila",188,18;
			end;

		case 2:
			show "......";
			show ".........";
			show "............";
			close;
		}
	}

	if (KielHyreQuest >= 18) {
		show "^3355FFA porta está aberta.^000000";
		next;

		switch(select("Entrar","Cancelar")) {

		case 1:
			warp "kh_vila",188,18;
			end;

		case 2:
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage Door (Right)
//----------------------------------------------------------------------------
yuno_fild02,109,218,0	script	Porta::DoorKHQ2	111,{
	if (KielHyreQuest < 16) {
		show "^3355FFEssa porta está trancada.^000000";
		show "^3355FFSe alguém por dentro não^000000";
		show "^3355FFabrir para você então você precisará^000000";
		show "^3355FFda chave certa para destrancá-la.^000000";
		close;
	}

	if (KielHyreQuest >= 16) {
		show "^3355FFEssa porta está trancada.^000000";
		show "^3355FFSe alguém por dentro não^000000";
		show "^3355FFabrir para você então você precisará^000000";
		show "^3355FFda chave certa para destrancá-la.^000000";
		next;

		switch(select("Abrir","Cancelar")) {

		case 1:
			show "^3355FFVocê não tem^000000";
			show "^3355FFa chave que pode^000000";
			show "^3355FFdestrancar esta porta.^000000";
			close;

		case 2:
			show "......";
			show ".........";
			show "............";
			close;
		}
	}
}


//----------------------------------------------------------------------------
// Store room interior; Wall
//----------------------------------------------------------------------------
kh_vila,191,14,0	script	Parede	111,{
	if (KielHyreQuest < 28) {
		show "^3355FFÉ só uma parede.^000000";
		show "^3355FFNão está particularmente^000000";
		show "^3355FFatrapalhando seu caminho.^000000";
		close;
	}

	if (KielHyreQuest >= 28) {
		show "^3355FFA parede está agora^000000";
		show "^3355FFaberta, revelando^000000";
		show "^3355FFum caminho secreto.^000000";
		next;

		switch(select("Entrar","Cancelar")) {

		case 1:
			warp "kh_vila",17,177;
			end;

		case 2:
			close;
		}

	}

OnOpenDoor:
	misceffect 316;
	end;
}

//----------------------------------------------------------------------------
// Store room interior; books
//----------------------------------------------------------------------------
kh_vila,184,20,0	script	Livro#1::BookKHQ1	111,{
	if ((KielHyreQuest < 26) || (KielHyreQuest > 26)) {
		show "^3355FFEssa estante está^000000";
		show "^3355FFestufada com tantos^000000";
		show "^3355FFlivros largos e de capa dura^000000";
		close;
	}
	else if (KielHyreQuest == 26) {
		if (rand(1,10) == 8) {
			show "^3355FFSem pensar, você^000000";
			show "^3355FFapanha um livro da^000000";
			show "^3355FFestante. Assim que você^000000";
			show "^3355FFo puxa, a^000000";
			show "^3355FFparede desliza abrindo-se^000000";
			show "^3355FFrevelando um caminho secreto.^000000";
			donpcevent "Parede::OnOpenDoor";
			set KielHyreQuest,28;
			close;
		}

		else {
			show "^3355FFEsta estante, está^000000";
			show "^3355FFestufada com tantos^000000";
			show "^3355FFlivros largos e de capa dura^000000";
			close;
		}

	}

}

kh_vila,181,20,0	duplicate(BookKHQ1)	Livro#2::BookKHQ2	111

kh_vila,178,20,0	duplicate(BookKHQ1)	Livro#3::BookKHQ3	111

kh_vila,175,19,0	duplicate(BookKHQ1)	Livro#4::BookKHQ4	111

//----------------------------------------------------------------------------
// Store room interior; Letter to Elly on the floor.
//----------------------------------------------------------------------------
kh_vila,179,11,0	script	KH_Letter_Trigger	-1,2,2,{
OnTouch:
	if (KielHyreQuest == 18) {
		if (checkweight(7490,1) == 0) {
			show "^3355FF- Espere!! -";
			show "- Você está carregando muitos itens";
			show "- e está incapaz de aceitar mais algum. -";
			show "- Por favor libere algum espaço";
			show "- no seu inventário antes de retornar. -^000000";
			close;
		}
		show "^3355FFvocê encontrou uma carta^000000";
		show "^3355FFno chão. Naturalmente,,^000000";
		show "^3355FFvocê a pegou, apesar^000000";
		show "^3355FFdo fato de que ela não está^000000";
		show "^3355FFendereçada à você.^000000";
		additem 7490,1; //Letter to Elly
		set KielHyreQuest,20;
		close;
	} 
	end; 
}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Box (Pet Food vending machine)
//----------------------------------------------------------------------------
kh_vila,16,175,0	script	Caixa::BoxKHQ1	111,{
		show "^FFFFFF##^000000*Saboroso-Nutricional-Delicioso*";
		show "*Máquina de venda de ração para Bichinhos*";
		show "A melhor comida para o seu Bichinho de estimação";
		show "que é superior à ração para bichinho";
		show "que você pode comprar no mercado!";
		show "^FFFFFF_^000000";
		show "Preço: 1,100 zeny (barato!)";
		next;

		switch(select("Comprar!","Cancelar")) {

		case 1:
			show "^3355FF1,100 zeny parecer ser";
			show "^3355FFmeio caro para ração de bichinho,";
			show "^3355FFmas se é melhor que a";
			show "^3355FFcoisa normal, pode";
			show "^3355FFvaler a tentativa.";
			next;
			if (zeny < 1100) {
				//Adlibbed dialog. Need weight check, too.
				show "^3355FFVocê não tem zeny suficiente...^000000";
				close;
			}
			else {
				show "^3355FFOh não...!^000000";
				show "^3355FFNão tem nada de^000000";
				show "^3355FFespecial nisso^000000";
				show "^3355FFpor fim! É só uma^000000";
				show "^3355FFração normal!^000000";
				set zeny,zeny-1100;
				additem 537,1;	//Pet_Food
				close;
			}

		case 2:
			show "^3355FFEssa máquina de vender^000000";
			show "^3355FFparece realmente duvidosa e^000000";
			show "^3355FFsuspeita por alguma razão^000000";
			close;
		}

}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Apple Box (Useless?)
//----------------------------------------------------------------------------
kh_vila,30,184,0	script	Caixa de Maçã	111,{
	show "^3355FFYou find a box filled with^000000";
	show "^3355FFripe, delicious apples.^000000";
	next;

	switch(select("Take the box","Leave it")) {

	case 1:
		show "^3355FFNão...! Espere!^000000";
		show "^3355FFAlgo está errado!^000000";
		show "^3355FFO que quer que faça,^000000";
		show "^3355FFnão pegue essa caixa!^000000";
		next;
		show "^3355FFE assim, sua voz^000000";
		show "^3355FFinterior, sua sombra^000000";
		show "^3355FFJungiana lhe previne,^000000";
		show "^3355FFde pegar aquela^000000";
		show "^3355FFcaixa.^000000";
		close;

	case 2: 
		show "^3355FFAlgo está errado^000000";
		show "^3355FFcom essa caixa de maçãs.^000000";
		close;

	}

}

//----------------------------------------------------------------------------
// Cottage interior, dining room; Map
//----------------------------------------------------------------------------
kh_vila,44,126,0	script	Mapa	111,{
	if ((KHCottagePoem1 < 2) && (KielHyreQuest < 30)) {
		show "^3355FFUm magnífico mapa mundial,^000000";
		show "^3355FFdetalhando o reino de^000000";
		show "^3355FFRune Midgard, República Schwaltzvalt,^000000";
		show "^3355FFassim como um outro pais ao^000000";
		show "^3355FFoeste, cujo nome não é familiar^000000";
		show "^3355FFpara você, está colado na parede.^000000";
		next;
		show "^3355FFAssim que você examina o^000000";
		show "^3355FFmapa mundial mais de perto,^000000";
		show "^3355FFvocê descobre que algo foi^000000";
		show "^3355FFescondido debaixo dele.^000000";
		next;

		switch(select("Ignorar","Examinar")) {

		case 1:
			show "^3355FFO que quer que possa estar^000000";
			show "^3355FFescondido debaixo desse^000000";
			show "^3355FFmapa provavelmente não é^000000";
			show "^3355FFimportante o suficiente para^000000";
			show "^3355FFvocê investigar.^000000";
			close;

		case 2:
			show "^3355FFInfelizmente, você não pode^000000";
			show "^3355FFver o que está sob o mapa^000000";
			show "^3355FFjá que está colado na parede.^000000";
			show "^3355FFVocê precisará encontrar alguma^000000";
			show "^3355FFforma de soltar a cola^000000";
			show "^3355FFsem danificar o mapa.^000000";
			set KHCottagePoem1,1;
			close;

		}

	}

	else  if ((KHCottagePoem1 == 2) && (KielHyreQuest < 30)) {
		show "^3355FFVocê leva o pote de^000000";
		show "^3355FFum líquido fumegante^000000";
		show "^3355FFpróximo do mapa do mundo.^000000";
		show "^3355FFAssim que a cola na parede ^000000";
		show "^3355FFamolece, o mapa lentamente^000000";
		show "^3355FFcomeça a se soltar.^000000";
		next;
		show "^3355FFO mapa solto revelou^000000";
		show "^3355FFum pedaço de papel dobrado^000000";
		show "^3355FFoculto sob ele. você^000000";
		show "^3355FFpega o papel, e alisa^000000";
		show "^3355FFo mapa para colá-lo na^000000";
		show "^3355FFparede novamente. Uma mensagen está^000000";
		show "^3355FFescrita no pedaço de papel.^000000";
		next;
		show "^808080Ela morrerá em um lugar^000000";
		show "^808080tão frio quanto os polos.^000000";
		show "^808080Quando o poço está seco^000000";
		show "^808080e o chão está rachado,^000000";
		show "^808080o caminho para o coração dela, um^000000";
		show "^808080coração tão transparente quanto^000000";
		show "^808080cristal, se abrirá.^000000";
		next;
		show "^808080Terei de lutar com quatro^000000";
		show "^808080serpentes com quatro espadas^000000";
		show "^808080para encontrá-la. A primeira espada^000000";
		show "^808080é o amor. A segunda espada^000000";
		show "^808080é o desespero. A terceira espada^000000";
		show "^808080é a fúria. A quarta espada é^000000";
		show "^808080a esperança. De encontrá-la, de salvá-la.^000000";		
		next;
		show "^3355FF......................^000000";
		show "^3355FFO significado profundo^000000";
		show "^3355FFdesse poema, é que mesmo^000000";
		show "^3355FFa existência, lhe engana.^000000";
		set KHCottagePoem1,3;
		close;
	}

	else  if ((KHCottagePoem1 > 2) || (KielHyreQuest >= 30)) {
		show "^3355FFAqui é onde você encontrou^000000";
		show "^3355FFo papel no qual o^000000";
		show "^3355FFpoema estava escrito. Talvez^000000";
		show "^3355FFseja uma boa idéia^000000";
		show "^3355FFrefrescar sua memória e^000000";
		show "^3355FFler aquele poema novamente.^000000";
		next;

		switch(select("Ler","Cancelar")) {

		case 1:
			show "^808080Ela morrerá em um lugar^000000";
		 	show "^808080tão frio quanto os pólos.^000000";
			show "^808080Quando o poço está seco^000000";
			show "^808080e o chão está rachado,^000000";
			show "^808080o caminho para o coração dela, um^000000";
			show "^808080coração tão transparente quanto^000000";
			show "^808080cristal, se abrirá.^000000";
			next;
			show "^808080Terei de lutar com quatro^000000";
			show "^808080serpentes com quatro espadas^000000";
			show "^808080para encontrá-la. A primeira espada^000000";
			show "^808080é o amor. A segunda espada^000000";
			show "^808080é o desespero. A terceira espada^000000";
			show "^808080é a fúria. A quarta espada é^000000";
			show "^808080a esperança. De encontrá-la, de salvá-la.^000000";
			next;
			show "^3355FF......................^000000";
			show "^3355FFO significado profundo^000000";
			show "^3355FFdesse poema, é que mesmo^000000";
			show "^3355FFa existência, lhe engana.^000000";
			close;

		case 2:
			show "^3355FFNão há necessidade para^000000";
			show "^3355FFvocê reler esse poema.^000000";
			show "^3355FFVocê é um grande gênio!^000000";
			close;

		}

	}

}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Pot
//----------------------------------------------------------------------------
kh_vila,33,184,0	script	Pote	111,{
	if (KHCottagePoem1 < 1) {
		show "^3355FFVocê encontrou um pote^000000";
		show "^3355FFcheio de liquido^000000";
		show "^3355FFfervente esfumaçante.^000000";
		close;
	}

	else if (KHCottagePoem1 == 1) {
		show "^3355FFVocê encontrou um pote^000000";
		show "^3355FFcheio de liquido^000000";
		show "^3355FFfervente esfumaçante.^000000";
		show "^3355FFVapor... Que você poderia^000000";
		show "^3355FFusar para soltar a cola no^000000";
		show "^3355FFmapa... Você é um gênio!^000000";
		next;

		switch(select("Tentar.","Aquilo? Aquilo não funciona!")) {

		case 1:
			show "^3355FFVocê pegou o^000000";
			show "^3355FFpote fervente, mas^000000";
			show "^3355FFqueimou levemente suas^000000";
			show "^3355FFmãos acidentalmente.^000000";
			set KHCottagePoem1,2;
			close;

		case 2:
			show "^3355FFNão, não...^000000";
			show "^3355FFMelhor tentarmos^000000";
			show "^3355FFoutra coisa.^000000";
			close;

		}

	}

	else if ((KHCottagePoem1 > 1) || (KielHyreQuest >= 30)){
		show "^3355FFAqui é onde você^000000";
		show "^3355FFpegou o pote cheio^000000";
		show "^3355FFde líquido fervente.^000000";
		close;
	}

}

//----------------------------------------------------------------------------
// Cottage interior, fire place; Calabash
//----------------------------------------------------------------------------
kh_vila,14,55,0	script	Cabaça	111,{
	if ((countitem(7329) < 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		if (checkweight(7329,1) == 0) {
			show "^3355FFAquilo é uma bela";
			show "cabaça. Você pode até";
			show "achar algo nela...";
			show "Mas antes é melhor";
			show "se livrar de todo seu peso extra.";
			show "E por peso, quero dizer itens.^000000";
			close;
		}

		show "^3355FFParece ser uma cabaça^000000";
		show "^3355FFmuito cara--^000000";
		show "^3355FFEm palavras menos^000000";
		show "^3355FFenfeitadas, uma abóbora.'^000000";
		show "^3355FFO que você vai fazer?^000000";
		next;

		switch(select("Quebrar a cabaça","Olhar dentro da cabaça","ignorar")) {

		case 1:
			show "^3355FFVocê não pode quebrar^000000";
			show "^3355FFabra aquela cabaça...^000000";
			show "^3355FFVocê é um herói, não um vândalo.^000000";
			show "^3355FFAgora se esse ato de vandalismo^000000";
			show "^3355FFpuder ser considerado um ato de^000000";
			show "^3355FFheroismo, então tudo bem.^000000";
			close;

		case 2:
			show "^3355FFVocê gentilmente coloca^000000";

			show "^3355FFSua mão dentro^000000";
			show "^3355FFcabaça, e gentilmente^000000";
			show "^3355FFtateia com seus^000000";
			show "^3355FFdedos até que você recuperar^000000";
			show "^3355FFuma Velha Chave de Bronze^000000";
			additem 7329,1; //Old_Bronze_Key
			close;

		case 3:
			show "^3355FFProvavelmente não há^000000";
			show "^3355FFnada dentro mesmo^000000";
			close;

		}

	}

	else {
		show "^3355FFEssa é aparentemente caríssima^000000";
		show "^3355FFcabaça de onde^000000";
		show "^3355FFvocê obteve^000000";
		show "^3355FFa Velha Chave de Bronze.^000000";
		show "^3355FFÉ inútil para você agora.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, garden; Pool
//----------------------------------------------------------------------------
kh_vila,39,41,0	script	Piscina	111,{
	if ((KHCottagePoem1 < 3) && (KielHyreQuest < 30)) {
		show "^3355FFVocê encontrou uma piscina pomposa^000000";
		show "^3355FFcheia com água fresca.^000000";
		close;
	}

	else if ((KHCottagePoem1 == 3) && (KielHyreQuest < 30)) {
		show "^3355FFVocê encontrou uma piscina pomposa^000000";
		show "^3355FFcheia com água fresca.^000000";
		show "^3355FFjunto com uma evidente^000000";
		show "^3355FFestátua de leão com duas alavancas^000000";
		next;

		switch(select("Puxar as alavancas","cancelar")) {

		case 1:
			show "Qual alavanca você gostaria^000000";
			show "de puxar primeiro?^000000";
			next;

			switch(select("Alavanca da Direita","Alavanca da Esquerda")) {

			case 1:
				show "^3355FFVocê puxou a alavanca da^000000";
				show "^3355FFdireita, fazendo com que a água^000000";
				show "^3355FFjorrasse da boca do leão^000000";
				show "^3355FFÉ bem legal~^000000";
				close;
				
			case 2:
				show "^3355FFAssim que você puxa a^000000";
				show "^3355FFalavanca da esquerda, a água^000000";
				show "^3355FFda piscina é drenada. Com a^000000";
				show "^3355FFpiscina vazia, você pode^000000";
				show "^3355FFver uma escada de musgo verde^000000";
				show "^3355FFcobrindo o fundo da piscina.^000000";
				next;

				switch(select("Ignorar","Investigar")) {

				case 1:
					show "^3355FFVocê decide que^000000";
					show "^3355FFé um pouco mais que^000000";
					show "^3355FFum buraco sem^000000";
					show "^3355FFágua alguma para enchê-la.^000000";
					close;

				case 2:
					show "^3355FFAssim que você olha através^000000";
					show "^3355FFdo musgo molhado no^000000";
					show "^3355FFfundo da piscina,^000000";
					show "^3355FFvocê esbarra em um^000000";
					show "^3355FFpequeno botão peculiar.^000000";
					next;

					switch(select("Pressionar o Botão","Não Pressionar o Botão")) {

					case 1:
						show "^3355FFVocê pressionou o botão^000000";
						show "^3355FFo que parece acionar^000000";
						show "^3355FFum som estranho vindo^000000";
						show "^3355FFdas escadas no corredor.^000000";
						set KHCottagePoem1,4;
						close;

					case 2:
						show "^3355FFÉ melhor você não apertar^000000";
						show "^3355FFesse botão. Seus inimigos^000000";
						show "^3355FFdeve estar cudadosamente escondidos^000000";
						show "^3355FFpara lhe encontrar. Deve ser^000000";
						show "^3355FFalgum tipo de armadilha maléfica.^000000";
						close;

					}

				}

			}

		case 2:
			show "^3355FFVocê decidiu não^000000";
			show "^3355FFpuxar as alavancas.^000000";
			close;

		}

	}

	else if ((KHCottagePoem1 > 3) || (KielHyreQuest >= 30)) {
		show "^3355FFAqui é onde você pressionou^000000";
		show "^3355FFo pequeno botão causando^000000";
		show "^3355FFum estranho barulho que veio^000000";
		show "^3355FFdas escadas próximas do corredor.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Vicious Dog
//----------------------------------------------------------------------------
kh_vila,181,178,4	script	Cão Bravo	81,7,3,{
OnTouch:
	show "*Grrr~*";
	next;
	show "^3355FFUm cachorro aparentemente^000000";
	show "^3355FFextremamente bravo está olhando^000000";
	show "^3355FFprá você. Será que você^000000";
	show "^3355FFconsegue passar por essa criatura^000000";
	show "^3355FFsem se machucar?^000000";
	next;

	switch(select("Seguir em Frente","Fugir")) {

	case 1:
		if (countitem(537) >= 1) {
			show "^3355FFEspere! Talvez você possa^000000";
			show "^3355FFusar comida para acalmar a^000000";
			show "^3355FFbesta selvagem! Por quê você não^000000";
			show "^3355FFo alimenta com um pouco da sua ração^000000";
			show "^3355FFde bichinho e vê o que acontece?^000000";
			next;

			switch(select("Dar ração de bichinho","Não vai funcionar!")) {

			case 1:
				show "^3355FFVocê cuidadosamente arremessa a^000000";
				show "^3355FFração de bichinho para o cachorro.^000000";
				show "^3355FFSua cauda balança violentamente enquanto^000000";
				show "^3355FFele devora a comida, melhor^000000";
				show "^3355FFpassar por esse cachoro agora^000000";
				show "^3355FFenquanto você tem chance!^000000";
				delitem 537,1; //Pet_Food
				close2;
				warp "kh_vila",173,182;
				end;

			case 2:
				NoPetFood:
				show "^3355FFVocê se aproxima lentamente do^000000";
				show "^3355FFcachorro, mas ele não^000000";
				show "^3355FFpara de rosnar prá você.^000000";
				show "^3355FFVocê tenta passar correndo pelo^000000";
				show "^3355FFcachorro, mas ele bloqueia todos^000000";
				show "^3355FFseus movimentos. O que fazer?^000000";
				next;
				show "[Cão Bravo]";
				show "BOW WOW!";
				show "BOW WOW!";
				show "BOW WOW WOW!";
				next;
				show "^3355FFO cachorro lhe persegue^000000";
				show "^3355FFescada abaixo, quão^000000";
				show "^3355FFingênuo você é^000000";
				close2;
				warp "kh_vila",126,70;
				end;

			}
		}

		else {
			goto NoPetFood;
		}

	case 2:
		show "^3355FFVamos sair daqui!^000000";
		close2;
		warp "kh_vila",126,70;
		end;

	}

}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Drawer, first room nightstand
//----------------------------------------------------------------------------
kh_vila,115,186,0	script	Gaveta::DrawerKHQ1	111,{
	if (checkweight(7492,1) == 0) {
		show "^3355FFHá algo dentro";
		show "dessa gaveta, mas você não pode";
		show "pegar já que está carregando";
		show "muitos ítens com você. Talvez";
		show "você deva visitar o seu";
		show "confiável armazem da Kafra antes.^000000";
		close;
	}
	if ((countitem(7492) < 1) && (KielHyreQuest < 36)) {
		show "^3355FFVocê encontrou uma velha gaveta^000000";
		show "^3355FFque estava fechada.^000000";
		show "^3355FFSe você a abrir, então você^000000";
		show "^3355FFpode encontrar alguma coisa^000000";
		show "^3355FFdentro. Ou pode estar^000000";
		show "^3355FFvazia. Quem sabe?^000000";
		next;

		switch(select("Abrir a gaveta","Ignorar")) {

		case 1:
			show "^3355FFVocê obteve o Cartão^000000";
			show "^3355FFde Acesso Amarelo de dentro da^000000";
			show "^3355FFgaveta. Abrir aquela gaveta^000000";
			show "^3355FFtornou-se útil.^000000";
			additem 7492,1; //Yellow_Keycard
			close;

		case 2:
			show "^3355FFEsquece de abrir aquela^000000";
			show "^3355FFgaveta. Digo, poxa,^000000";
			show "^3355FFque sentido teria?^000000";
			close;
		}
	}

	else {
		show "^3355FFAqui é onde você^000000";
		show "^3355FFencontrou o Cartão De Acesso Amarelo.^000000";
		show "^3355FFEsta gaveta está vazia agora.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Box
//----------------------------------------------------------------------------
kh_vila,107,126,0	script	Caixa::BoxKHQ2	111,{
	if ((countitem(7329) < 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		show "^3355FFUma caixa sólida está jogada^000000";
		show "^3355FFno chão onde se encontra^000000";
		show "^3355FFuma pequena caixa trancada^000000";
		show "^3355FFque foi colocada dentro.^000000";
		close;
	}

	else if ((countitem(7329) >= 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		show "^3355FFUma caixa sólida está jogada^000000";
		show "^3355FFno chão onde se encontra^000000";
		show "^3355FFuma pequena caixa trancada^000000";
		show "^3355FFque foi colocada dentro.^000000";
		show "^3355FFTalvez você possa usar sua^000000";
		show "^3355FFVelha Chave de Bronze para destrancá-la.^000000";
		next;

		switch(select("Usar a Velha Chave de Bronze","Não, nunca vai funcionar.")) {

		case 1:
			show "^3355FFSeu palpite valeu a pena!^000000";
			show "^3355FFA velha chave de bronze realmente^000000";
			show "^3355FFdestrancou aquela caixa! Você^000000";
			show "^3355FFabre a caixa interior e^000000";
			show "^3355FFobtem o Cartão de Acesso Verde^000000";
			show "^3355FFque estava trancado dentro.^000000";
			additem 7516,1;	//Green_Keycard
			delitem 7329,1;	//Old_Bronze_Key
			close;


		case 2:
			show "^3355FFO quê...?^000000";
			show "^3355FFO quê? Usando uma chave^000000";
			show "^3355FFpara destrancar uma fechadura?^000000";
			show "^3355FFQualé, isso é^000000";
			show "^3355FFtotalmente loucura total.^000000";
			close;

		}

	}

	else {
		show "^3355FFEssa é a caixa de^000000";
		show "^3355FFonde você obteve^000000";
		show "^3355FFo Cartão de Acesso Verde.^000000";
		close;
	}

}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Bookshelf.
//----------------------------------------------------------------------------
//----------------------------------------------------------------------------
// Cottage interior, upstairs; Bookshelf.
//----------------------------------------------------------------------------
kh_vila,181,138,0	script	Estante::BookshelfKHQ1	111,{
	if (checkweight(7492,1) == 0) {
		show "^3355FFVocê encontrou uma";
		show "estante que está";
		show "estufada com livros.^000000";
		close;
	}

	if ((countitem(7491) < 1) && (countitem(7329) >= 1) || (countitem(7516) >= 1)) {
		show "^3355FFUm dos livros nessa^000000";
		show "^3355FFestante estufada^000000";
		show "^3355FFestá intitulado com o bilhete,^000000";
		show "^3355FFpara Elly. Deve ter^000000";
		show "^3355FFsido deixado prá trás pelo avô dela^000000";
		next;
		switch(select("Examinar o Livro","Ignorar")) {

		case 1:
			show "^3355FFVocê espia pelas^000000";
			show "^3355FFpáginas do livro e não^000000";
			show "^3355FFencontra nada particularmente^000000";
			show "^3355FFinteressante. No entanto, você^000000";
			show "^3355FFpercebe uma superfície de aço atrás^000000";
			show "^3355FFda estante quando você devolve o livro.^000000";
			next;

			switch(select("Examinar a superfície de Aço","Ignorar")) {

			case 1:
				show "^3355FFVocê remove mais dos^000000";
				show "^3355FFlivros da estante, revelando^000000";
				show "^3355FFque a superfície de aço é^000000";
				show "^3355FFparte de um cofre escondido atrás^000000";
				show "^3355FFda estante. Há duas^000000";
				show "^3355FFfechaduras no cofre de aço.^000000";
				next;

				switch(select("Tentar todas suas chaves","Cancelar")) {

				case 1:
					show "^3355FFQual chave você irá^000000";
					show "^3355FFinserir na primeira^000000";
					show "^3355FFfechadura?^000000";
					next;

					if (countitem(7329) >= 1) {
						switch(select("Velha Chave de Bronze","Chave da Cabana")) {

						case 1:
							break;

						case 2:
							break;

						}

						show "^3355FFQual chave você irá^000000";
						show "^3355FFinserir na segunda^000000";
						show "^3355FFfechadura?^000000";
						next;

						switch(select("Velha Chave de Bronze","Chave da Cabana")) {

						case 1:
							break;

						case 2:
							break;

						}

					}


					else if (countitem(7516) >= 1) {

						switch(select("Cartão de Acesso Verde","Chave da Cabana")) {

						case 1:
							set @KHFirstKeyhole,1;
							break;

						case 2:
							set @KHFirstKeyhole,2;
							break;

						}

						show "^3355FFQual chave você irá^000000";
						show "^3355FFinserir na segunda^000000";
						show "^3355FFfechadura?^000000";;
						next;

						switch(select("Cartão de Acesso Verde","Chave da Cabana")) {

						case 1:
							set @KHSecondKeyhole,1;
							break;

						case 2:
							set @KHSecondKeyhole,2;
							break;

						}

						if (@KHFirstKeyhole == 2) && (@KHSecondKeyhole == 1) {
							show "^3355FFO cofre abre com^000000";
							show "^3355FFum estalido e você vê^000000";
							show "^3355FFuma Caixa Cinza dentro.^000000";
							show "^3355FFVocê leva a Caixa Cinza^000000";
							show "^3355FFcom você, esperando que^000000";
							show "^3355FFse torne útil mais tarde.^000000";
							delitem 7489,1; //Cottage Key
							delitem 7516,1; //Green_Keycard
							additem 7491,1; //Iron_Box
							close;
						}

					}

					show "^3355FFO cofre não abre.^000000";
					close;


				case 2:
					show "^3355FFProvavelmente é uma idéia^000000";
					show "^3355FFmelhor investigar a^000000";
					show "^3355FFcabana por chaves que^000000";
					show "^3355FFpossam abrir esse cofre...^000000";
					close;

				}

			case 2:
				show "^3355FFVocê colocou os livros^000000";
				show "^3355FFde volta na estante.^000000";
				close;

			}
	
		case 2:
			show "^3355FFvocê pode provavelmente^000000";
			show "^3355FFencontrar melhores pistas^000000";
			show "^3355FFem algum outro lugar^000000";
			show "^3355FFpor aqui.^000000";
			close;

		}
	}

	else {
		show "^3355FFvocê encontrou uma";
		show "estante que está";
		show "estufada com livros.^000000";
		close;
	}

}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Desk
//----------------------------------------------------------------------------
kh_vila,118,143,0	script	Mesa::DeskKHQ1	111,{
	if (KHCottagePoem2 < 1) {
		show "^3355FFHá pilhas de papel^000000";
		show "^3355FFe livros amontoados sobre^000000";
		show "^3355FFa mesa cobrindo assuntos^000000";
		show "^3355FFcomo poder artificial, pesquisa^000000";
		show "^3355FFdo sábio Varmundt, robotização^000000";
		show "^3355FFda fábrica, e pergaminhos mágicos...^000000";
		next;
		show "^3355FFEnquanto explorando no meio^000000";
		show "^3355FFdos livros e papéis, você^000000";
		show "^3355FFencontra um pedaço de papel com^000000";
		show "^3355FFo selo oficial da Fundação ^000000";
		show "^3355FFKiel Hyre. Você decide que^000000";
		show "^3355FFpode ser útil algum dia.^000000";
		next;
		show "^3355FFVocê obteve^000000";
		show "^3355FFum pedaço em branco de^000000";
		show "^3355FFpapel com o selo da Fundação^000000";
		show "^3355FFde Kiel Hyre.^000000";
		set KHCottagePoem2,1;
		close;
	}

	else if (KHCottagePoem2 >= 1) {
		show "^3355FFHá várias pilhas de papel^000000";
		show "^3355FFe livros, cobrindo vários^000000";
		show "^3355FFassuntos científicos e mágica,^000000";
		show "^3355FFempilhados sobre essa mesa.^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Medicine Chest
//----------------------------------------------------------------------------
kh_vila,123,170,0	script	Baú de Poções	111,{
	if ((KHCottagePoem2 < 1) && (KielHyreQuest < 30)) {
		show "^3355FFEssa cabine médica^000000";
		show "^3355FFestá cheia de garrafas de^000000";
		show "^3355FFvárias cores. Que tipo de^000000";
		show "^3355FFpoções pode ser encontrado aqui?^000000";
		close;
	}

	else if ((KHCottagePoem2 == 1) && (KielHyreQuest < 30)) {
		show "^3355FFEssa cabine médica^000000";
		show "^3355FFestá cheia de garrafas de^000000";
		show "^3355FFvárias cores. Que tipo de^000000";
		show "^3355FFpoções pode ser encontrado aqui?^000000";
		next;
		show "^3355FFEspere, você tem um pedaço de papel^000000";
		show "^3355FFem branco com o selo da fundação de^000000";
		show "^3355FFKiel Hyre! É estranho^000000";
		show "^3355FFque o selo foi colocado num pedaço^000000";
		show "^3355FFde papel em branco. Talvez algo^000000";
		show "^3355FFfoi escrito nele com tinta especial?^000000";
		next;
		show "^3355FFÉ um palpite doido, mas^000000";
		show "^3355FFtalvez, só talvez, você possa^000000";
		show "^3355FFusar algo de dentro dessa^000000";
		show "^3355FFcabine médica que possa^000000";
		show "^3355FFrevelar alguma tinta invisível^000000";
		show "^3355FFescrita nesse documento!^000000";
		next;

		switch(select("O quê? Isso é loucura!","Claro! Vamos tentar!")) {

		case 1:
			show "^3355FFDesculpe.^000000";
			show "^3355FFPensei que^000000";
			show "^3355FFfosse uma boa idéia...^000000";
			close;

		case 2:
			switch(select("Tentar Líquido Vermelho","Tentar Líquido Azul","Tentar Líquido Amarelo","Tentar Líquido Verde","Cancelar")) {

			case 1:
				set @KHPotionColor$,"Vermelho";
				break;

			case 2:
				show "^3355FFFunciona!^000000";
				show "^3355FFO líquido azul está^000000";
				show "^3355FFrevelando um pequeno^000000";
				show "^3355FFtexto escrito no papel.^000000";
				show "^3355FFParece algum^000000";
				show "^3355FFtipo de poema longo...^000000";
				next;
				show "[Poema]";
				show "A primeira serpente é feita de";
				show "aço, mas eu usei minha fúria";
				show "para destruí-la. A segunda";
				show "serpente é feita de mágica,";
				show "mas meu amor perfurou seu coração.";
				next;
				show "[Poema]";
				show "A terceira serpente é carne";
				show "e sangue, mas minha esperança";
				show "a derrotou no final.";
				show "Ainda assim, a quarta e";
				show "derradeira serpente é sem forma, e";
				show "ninguém sabe sua aparência.";
				next;
				show "[Poema]";
				show "Eu joguei meu desespero para o ar,";
				show "mas ninguém sabe se isso matou";
				show "a serpente. Eu meramente um ^3355FFpequeno";
				show "demônio perdido^000000 com quatro espadas e";
				show "quatro serpentes, em busca daquela";
				show "garota nas trevas.";
				next;
				show "^3355FFEsse é um poema^000000";
				show "^3355FFmuito estranho. O quê^000000";
				show "^3355FFpoderia possivelmente significar?^000000";
				set KHCottagePoem2,2;
				close;

			case 3:
				set @KHPotionColor$,"Amarelo";
				break;

			case 4:
				set @KHPotionColor$,"Verde";
				break;

			case 5:
				show "^3355FFEsquece.^000000";
				show "^3355FFEssa idéia parece^000000";
				show "^3355FFmuito doida prá funcionar...^000000";
				show "^3355FFComo levar o homem^000000";
				show "^3355FFna Lua, Você acredita^000000";
				show "^3355FFnessa asneira?^000000";
				close;
			}

			show "^3355FFVocê tentou borrifar^000000";
			show "^3355FFo líquido "+@KHPotionColor$+" do^000000";
			show "^3355FFcabinete médico no^000000";
			show "^3355FFpapel em branco com o^000000";
			show "^3355FFselo da Fundação Kiel Hyre.^000000";
			show "^3355FFMesmo assim, nada aconteceu...^000000";
			close;

		}
	}

	else if ((KHCottagePoem2 >= 2) || (KielHyreQuest >= 30)) {
		show "^3355FFAqui é onde você derramou^000000";
		show "^3355FFalgum líquido azul para ler^000000";
		show "^3355FFum poema escrito com tinta^000000";
		show "^3355FFinvisível num pedaço de papel em branco^000000";
		show "^3355FFcom o selo da Fundação Kiel Hyre^000000";
		show "^3355FFVocê gostaria de lê-lo?^000000";
		next;

		switch(select("Sem Tempo!","Ler")) {

		case 1:
			show "^3355FFSeu tempo está acabando!^000000";
			show "^3355FFPor enquanto seria^000000";
			show "^3355FFmelhor você procurar^000000";
			show "^3355FFcada canto da cabana.^000000";
			close;

		case 2:
				show "[Poema]";
				show "A primeira serpente é feita de";
				show "aço, mas eu usei minha fúria";
				show "para destruí-la. A segunda";
				show "serpente é feita de mágica,";
				show "mas meu amor perfurou seu coração.";
				next;
				show "[Poema]";
				show "A terceira serpente é carne";
				show "e sangue, mas minha esperança";
				show "a derrotou no final.";
				show "Ainda assim, a quarta e";
				show "derradeira serpente é sem forma, e";
				show "ninguém sabe sua aparência.";
				next;
				show "[Poema]";
				show "Eu joguei meu desespero para o ar,";
				show "mas ninguém sabe se isso matou";
				show "a serpente. Eu meramente um ^3355FFpequeno";
				show "demônio perdido^000000 com quatro espadas e";
				show "quatro serpentes, em busca daquela";
				show "garota nas trevas.";
			close;

		}
	}
}

//----------------------------------------------------------------------------
// Cottage interior, stair case; Sword hilt
//----------------------------------------------------------------------------
kh_vila,136,68,0	script	Punho da Espada	111,{
	if ((KHCottagePoem1 < 3) || (KHCottagePoem2 < 2) && (KielHyreQuest < 30)) {
		show "^3355FFHá quatro bem elaboradas^000000";
		show "^3355FFespadas posicionads^000000";
		show "^3355FFpróximas à quatro assustadoras^000000";
		show "^3355FFesculturas de serpentes.^000000";
		close;
	}

	else if ((KHCottagePoem1 <= 4) || (KHCottagePoem2 <= 2) && (KielHyreQuest < 30)) {
		show "^3355FFHá quatro bem elaboradas^000000";
		show "^3355FFespadas posicionadas^000000";
		show "^3355FFpróximas à quatro assustadoras^000000";;
		show "^3355FFesculturas de serpentes. Espere!^000000";
		show "^3355FFTalvez estejam relacionadas ao^000000";
		show "^3355FFpoema que você leu antes...^000000";
		next;

		switch(select("Nada haver!","Claro!")) {

		case 1:
			show "^3355FFImpossível...^000000";
			show "^3355FFDeve ser algum tipo^000000";
			show "^3355FFde coincidência...^000000";
			close;

		case 2:
			show "^3355FFClaro! E veja!^000000";
			show "^3355FFHá um buraco no topo^000000";
			show "^3355FFda cabeça de cada escultura^000000";
			show "^3355FFde serpente. Esses buracos parecem^000000";
			show "^3355FFbastante grandes para inserir cada^000000";
			show "^3355FFuma das espadas ornamentais próximas...^000000";
			next;

			switch(select("Ignorar","Inserir Espadas Ornamentais")) {

			case 1:
				show "^3355FFImpossível...^000000";
				show "^3355FFDeve ser algum^000000";
				show "^3355FFtipo de coincidência...^000000";
				close;

			case 2:
				if (KHCottagePoem1 != 4) {
					show "^3355FFNão pode... Puxar...^000000";
					show "^3355FFa espada! Deve estar^000000";
					show "^3355FFpresa no lugar^000000";
					show "^3355FFde alguma forma ou selada^000000";
					show "^3355FFpor alguma força estranha!^000000";
					close;
				}

				else {
					show "^3355FFVocê provavelmente deveria^000000";
					show "^3355FFtentar inserir cada espada^000000";
					show "^3355FFna serpente correta.^000000";
					show "^3355FFPrimeiro por favor selecione a^000000";
					show "^3355FFserpente que você irá^000000";
					show "^3355FFinserir a primeira espada.^000000";
					next;

					switch(select("Primeira Serpente","Segunda Serpente","Terceira Serpente","Quarta Serpente")) {

					case 1:
						set @KHfirstSword,1;
						break;

					case 2:
						set @KHfirstSword,2;
						break;

					case 3:
						set @KHfirstSword,3;
						break;

					case 4:
						set @KHfirstSword,4;
						break;

					}

					next;
					show "^3355FFAgora, por favor escolha^000000";
					show "^3355FFa serpente que você^000000";
					show "^3355FFirá inserir a segunda espada.^000000";
					next;

					switch(select("Primeira Serpente","Segunda Serpente","Terceira Serpente","Quarta Serpente")) {

					case 1:
						set @KHSecondSword,1;
						break;

					case 2:
						set @KHSecondSword,2;
						break;

					case 3:
						set @KHSecondSword,3;
						break;

					case 4:
						set @KHSecondSword,4;
						break;

					}

					next;

					show "^3355FFAgora, por favor selecione^000000";
					show "^3355FFa serpente que você^000000";
					show "^3355FFirá inserir a terceira espada.^000000";
					next;

					switch(select("Primeira Serpente","Segunda Serpente","Terceira Serpente","Quarta Serpente")) {

					case 1:
						set @KHThirdSword,1;
						break;


					case 2:
						set @KHThirdSword,2;
						break;

					case 3:
						set @KHThirdSword,3;
						break;

					case 4:
						set @KHThirdSword,4;
						break;

					}

					next;
					show "^3355FFFinalmente, por favor selecione^000000";
					show "^3355FFa serpente na qual você^000000";
					show "^3355FFirá inserir a quarta espada.^000000";
					next;

					switch(select("Primeira Serpente","Segunda Serpente","Terceira Serpente","Quarta Serpente")) {

					case 1:
						set @KHFouthSword,1;
						break;

					case 2:
						set @KHFouthSword,2;
						break;

					case 3:
						set @KHFouthSword,3;
						break;

					case 4:
						set @KHFouthSword,4;
						break;

					}

					if ((@KHFirstSword == 2) && (@KHSecondSword == 4) && (@KHThirdSword == 1) && (@KHFouthSword == 3)) {
						show "^3355FFSeus ouvidos são repentinamente^000000";
						show "^3355FFpreenchidos com um baixo zumbido^000000";
						show "^3355FFe sua mente e^000000";
						show "^3355FFcorpo parecem que estão^000000";
						show "^3355FFsendo levados^000000";
						set KHCottagePoem1,5;
						set KHCottagePoem2,3;
						close2;
						warp "kh_vila",178,72;
						end;
					}

					else {
						show "^3355FFNada aconteceu...^000000";
						show "^3355FFVocê provavelmente não^000000";
						show "^3355FFinseriu as espadas nas^000000";
						show "^3355FFserpentes corretas. Por enquanto,^000000";
						show "^3355FFvocê deveria retornar as espadas,^000000";
						show "^3355FFe então tentar novamente mais tarde.^000000";
						close;
					}
				}
			}
		}
	}

	else if ((KHCottagePoem1 == 5) && (KHCottagePoem2 == 3) || (KielHyreQuest >= 30)) {
		show "^3355FFAqui tem um caminho^000000";
		show "^3355FFoculto que leva à^000000";
		show "^3355FFum laboratório secreto.^000000";
		next;

		switch(select("Entrar","Cancelar")) {

		case 1:
			warp "kh_vila",178,72;
			end;

		case 2:
			close;

		}
	}

}

//----------------------------------------------------------------------------
// Cottage interior, Secret Room; left test tube
//----------------------------------------------------------------------------
kh_vila,179,68,0	script	Tubo de Testes::TestTubeKHQ1	111,{
	show "^3355FFEsse tubo de testes tem^000000";
	show "^3355FFum jovem rapaz vestido um^000000";
	show "^3355FFuniforme da Academia Kiel^000000";
	show "^3355FFHyre. De alguma forma, você^000000";
	show "^3355FFtem a sensação que já^000000";
	show "^3355FFo viu antes em algum lugar.^000000";
	close;
}


//----------------------------------------------------------------------------
// Cottage interior, Secret Room; Right test tube
//----------------------------------------------------------------------------
kh_vila,185,68,0	script	Tubo de Testes::TestTubeKHQ2	111,{
	if (KielHyreQuest == 28) {
		show "^3355FFUma estranha,^000000";
		show "^3355FFsábia senhora está^000000";
		show "^3355FFpresa nesse tubo de testes.^000000";
		show "^3355FFHá um pequeno botão vermelho^000000";
		show "^3355FFbem embaixo no tubo de testes.^000000";
		next;

		switch(select("Pressionar o Botão","Investigar Mais")) {

		case 1:

			show "[???]";
			show "O-Olá...? V-Você pode";
			show "me ouvir? Eu não lhe reconheço...";
			show "Mas... Talvez eu tenha esquecido?";
			show "Espere, espere. Se você é meu amigo,";
			show "então você sabe do que me chamar,";
			show "certo? Você sabe o que eu sou?";
			next;

			digit @KHInput$;

			if (@KHInput$ == "Um pequeno demônio perdido") {
				show "[???]";
				show "Heh... Heh heh...";
				show "Ele sabe... Hey, você";
				show "tem de lembrar desses";
				show "números, okay? N-não";
				show "esqueça, eles serão importantes...";
				show "^FF00004^000000, ^FF00007^000000, ^FF00002^000000, ^FF00009^000000, ^FF00006^000000, ^FF00001^000000. Isso é tudo...";
				next;
				show "^3355FF4772961^000000";
				show "^3355FFO que poderiam^000000";
				show "^3355FFesses números^000000";
				show "^3355FFpossivelmente significar?^000000";
				//KHCottagePoem1 and KHCottagePoem2 no longer needed-- deleting
				set KHCottagePoem1,0;
				set KHCottagePoem2,0;
				set KielHyreQuest,30;
				close;
			}

			else {
				show "[???]";
				show "Não... Não...";
				show "Isso não está certo.";
				show "Não acho que nós";
				show "éramos amigos. Não...";
				close;
			}

		case 2:
			show "^3355FFVamos investigar^000000";
			show "^3355FFessa área um pouquinho^000000";
			show "^3355FFmais antes.^000000";
			close;

		}

	}

	else if (KielHyreQuest >= 30) {
		show "^3355FFO que poderia o^000000";
		show "^3355FFnúmero 4772961^000000";
		show "^3355FFsignificar? Por enquanto, você^000000";
		show "^3355FFencontrou tudo que^000000";
		show "^3355FFprcisa desse lugar,^000000";
		show "^3355FFentão você deve voltar para Elly.^000000";
		close;
	}
	end;
}

//============================================================================

//============================================================================
// Robot Factory NPCs
//============================================================================

//----------------------------------------------------------------------------
// Robotic's Factory; Heavy Door
//----------------------------------------------------------------------------
kh_dun01,235,48,0	script	Porta Pesada::HeavyDoorKHQ1	111,{
	if ((KielHyreQuest >= 38) && (KielHyreQuest < 46)) {
		show "^3355FFHá uma larga e pesada^000000";
		show "^3355FFporta à sua frente^000000";
		next;

		switch(select("Abrir a Porta","Cancelar")) {

		case 1:
			digit @KHInput$;
			if (@KHInput$ == "Cartão de Acesso Azul") {
				show "^3355FFVocê abri com sucesso^000000";
				show "^3355FFa porta.^000000";
				close2;
				warp "kh_school",119,144;
				end;
			}

			else {
				show "^3355FFVocê tenta empurrar a^000000";
				show "^3355FFporta para abrir com toda^000000";
				show "^3355FFsua força, mas falha^000000";
				show "^3355FFem fazê-la se mexer.^000000";
				close;
			}

		case 2:
			show "^3355FFVocê decidiu deixar^000000";
			show "^3355FFessa porta quieta, até^000000";
			show "^3355FFque descubra como^000000";
			show "^3355FFconseguirá abrí-la^000000";
			close;

		}

	}

	else {
		show "^3355FFTHá uma larga e pesada^000000";
		show "^3355FFporta à sua frente^000000";
		close;
	}
}

//----------------------------------------------------------------------------
// Robotic's Factory; Heavy Door (These doors don't seem to serve any purpose)
//----------------------------------------------------------------------------
kh_dun01,76,233,0	script	Porta Pesada::HeavyDoorKHQ2	111,{
	if ((KielHyreQuest >= 38) && (KielHyreQuest < 46)) {
		show "^3355FFTHá uma larga e pesada^000000";
		show "^3355FFporta à sua frente^000000";
		next;

		switch(select("Open Door","Cancel")) {

		case 1:
			digit @KHInput$;
			 	show "^3355FFVocê tenta empurrar a^000000";
				show "^3355FFporta para abrir com toda^000000";
				show "^3355FFsua força, mas falha^000000";
				show "^3355FFem fazê-la se mexer.^000000";
			close;

		case 2:
			show "^3355FFVocê decidiu deixar^000000";
			show "^3355FFessa porta quieta, até^000000";
			show "^3355FFque descubra como^000000";
			show "^3355FFconseguirá abrí-la^000000";
			close;

		}

	}

	else {
		show "^3355FFTHá uma larga e pesada^000000";
		show "^3355FFporta à sua frente^000000";
		close;
	}

}

kh_dun01,106,233,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ3	111
kh_dun01,6,164,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ4	111
kh_dun01,6,133,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ5	111
kh_dun01,6,60,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ6	111
kh_dun01,6,30,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ7	111
kh_dun01,6,18,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ8	111
kh_dun01,235,70,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ9	111
kh_dun01,235,92,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ10	111
kh_dun01,235,114,0	duplicate(HeavyDoorKHQ2)	Porta Pesada::HeavyDoorKHQ11	111

//----------------------------------------------------------------------------
// Beautiful Lady and Beautiful Lady copies.
//----------------------------------------------------------------------------
kh_school,119,149,4	script	Bela Dama::BeatifulLadyKHQ1	894,{
	cutin "kh_ellisia",2;
	if (KielHyreQuest < 40) {
		show "[Allysia]";
		show "Hm? Não acho que";
		show "eu lhe conheça. Kiel Hyre";
		show "só tem amigos de Elly autorizados,";
		show "e confiáveis que podem";
		show "estar ajudando ela, para";
		show "ser aceito nessa área.";
		next;
		show "[Allysia]";
		show "Eu não encontro ^FF0000Elly^000000";
		show "Ela foi atacada também?";
		show "Você é ^FF0000Amigo de Elly^000000?";
		next;
		show "[Allysia]";
		show "Eu não acho Elly em lugar algum";
		show "por aqui. Só posso lhe deixar";
		show "entrar se você puder se identificar";
		show "como amigo de Elly.";
		show "Há alguma coisa que você";
		show "possa me apresentar como prova?";
		next;

		switch(select("Cartão de Acesso Amarelo","Cartão de Acesso Azul","Chave Dourada","Broche Luxuoso","...?")) {

		case 1:
			break;

		case 2:
			break;

		case 3:
			show "Ah, essa não é a";
			show "chave que Kiel Hyre deu";
			show "a Elly? Sim, estou convencida";
			show "que você a tem ajudado.";
			show "Estive esperando por você, então";
			show "deixe-me levá-lo ao meu quarto.";
			close2;
			cutin "",255;
			warp "kh_school",120,180;
			end;

		case 4:
			show "[Allysia]";
			show "A-Aquele é o inferno de";
			show "Kiel! ele lhe enviou";
			show "aqui para me pegar?! Eu";
			show "não estou me arriscando!";
			close2;
			cutin "",255;
			monster "kh_school",117,144,"Constant",1745,1;
			monster "kh_school",117,144,"Constant",1745,1;
			monster "kh_school",117,144,"Constant",1745,1;
			monster "kh_school",117,144,"Constant",1745,1;
			end;

		case 5:
			show "[Allysia]";
			show "......";
			show "........";
			show "...........";
			close2;
			cutin "",255;
			end;

		}

		show "[Allysia]";
		show "Hm? Isso não prova";
		show "que Elly realmente confia em você...";
		close2;
		cutin "",255;
		end;
	}

	else if (KielHyreQuest >= 40) {
		show "[Allysia]";
		show "Por favor me siga.";
		close2;
		cutin "",255;
		warp "kh_school",120,180;
		end;
	}
}


kh_school,117,149,4	script	Bela Dama::BeatifulLadyKHQ2	894,{
	end;
}

kh_school,118,149,4	duplicate(BeatifulLadyKHQ2)	Beautiful lady::BeatifulLadyKHQ3	894

kh_school,120,149,4	duplicate(BeatifulLadyKHQ2)	Beautiful lady::BeatifulLadyKHQ4	894

kh_school,121,149,4	duplicate(BeatifulLadyKHQ1)	Beautiful lady::BeatifulLadyKHQ5	894

//----------------------------------------------------------------------------
// Beautiful Lady "Allysia"
//----------------------------------------------------------------------------
kh_school,122,186,4	script	Bela Dama	894,{
	if (checkweight(7496,1) == 0) {
		show "^3355FF- Espere!! -";
		show "- Você está carregando muitos itens";
		show "- e não será capaz de aceitar mais. -";
		show "- Por favor arrume algum espaço";
		show "- no seu inventário antes de retornar. -^000000";
		close;
	}

	cutin "kh_ellisia",2;
	if (KielHyreQuest <= 38) {
		show "[Allysia]";
		show "Amigo(a) do protótipo Elly,";
		show "lhe dou as boas vindas. Como você";
		show "deve ter percebido, preciso de sua";
		show "ajuda. Kiel Hyre está ajudando";
		show "em algum lugar dentro dessa fábrica.";
		next;
		show "[Allysia]";
		show "É imperativo que";
		show "você procure por Kiel Hyre";
		show "e o resgate o mais rápido";
		show "que você possa!";
		next;

		switch(select("O que é essa fábrica?","O quê aconteceu a ^FF0000Kiel Hyre^000000?")) {

		case 1:
			show "[Allysia]";
			show "Essa fábrica é parte dos";
			show "negócios secretos da";
			show "Fundação Kiel Hyre, onde robôs";
			show "humanóides são fabricados. Eu mesma,";
			show "e todos os estudantes da academia";
			show "somos na verdade robôs, não humanos.";
			next;
			show "[Allysia]";
			show "O objetivo final da Fundação";
			show "Kiel Hyre é desenvolver";
			show "robôs superiores que ajudarão";
			show "a sociedade humana. Como robôs, nós";
			show "podemos fazer tarefas que são muito";
			show "perigosas ou difíceis para humanos.";
			break;

		case 2:
			show "[Allysia]";
			show "^3355FFKiehl^000000 estava para";
			show "fazer modificações anormais";
			show "aos robôs humanóides. Isso";
			show "foi reportado à Kiel Hyre,";
			show "que foi parar Kiehl.";
			show "No entanto, Hyre não retornou.";
			next;
			show "[Allysia]";
			show "Temendo que Kiehl pudesse";
			show "me quebrar, Kiel Hyre trouxe";
			show "uma cópia de mim no lugar. Ainda posso";
			show "detectar os batimentos cardíacos de Kiel Hyre,";
			show "enão ele deve estar bem, mas seu";
			show "próprio filho pode machucá-lo breve.";
			next;
			show "[Allysia]";
			show "Pegue esse esse cartão";
			show "que vai lhe permitir";
			show "entrar em áreas secretas";
			show "dentro dessa fábrica. Se você";
			show "encontrar Kiel Hyre, por favor";
			show "me avise imediatamente.";
			additem 7496,1; //Red_Keycard
			set KielHyreQuest,40;
			break;

		}

		close2;
		cutin "",255;
		end;

	}

	else if (KielHyreQuest == 40) {
		show "[Allysia]";
		show "Ainda posso detectar";
		show "os batimentos cardíacos de Kiel Hyre,";
		show "mas seu filho Kiehl pode";
		show "fazer algo desesperado contra";
		show "ele logo. Por favor, localize Kiel";
		show "Hyre antes que isso aconteça!";
		close2;
		cutin "",255;
		warp "kh_dun01",22,216;
		end;
	}

	else if (KielHyreQuest == 42) {
		show "[Allysia]";
		show "Você já";
		show "localizou Kiel Hyre?";
		next;
		show "^3355FFVocê conta a Allysia onde^000000";
		show "^3355FFKiel Hyre estava trancado^000000";
		show "^3355FFe lhe entrega o fragmento^000000";
		show "^3355FFde metal que Kiel Hyre lhe^000000";
		show "^3355FFdeu. Ela pega o fragmento^000000";
		show "^3355FFe coloca no pulso dela.^000000";
		next;
		show "[Allysia]";
		show "...Código secreto de Kiel Hyre";
		show "confirmado. área B_2_3.";
		show "Sinais vitais estão normais.";
		show "Envelope recebido. Enviando";
		show "desenhos de Bonecos Modificados...";
		next;
		show "[Allysia]";
		show "Certo, Recebi as ordens";
		show "de Kiel Hyre, e";
		show "devo cumpri-las...";
		set KielHyreQuest,44;
		delitem 7497,1; //Metal_Fragment
		close2;
		cutin "",255;
		end;
	}

	else if (KielHyreQuest == 44) {
		show "[Allysia]";
		show "Certo, Tenho uma missão";
		show "à cumprir para Kiel Hyre,";
		show "e não tenho muito tempo.";
		show "Deixe-me lhe dar algumas instruções";
		show "específicas rapidamente.";
		next;
		show "[Allysia]";
		show "Primeiramente, preciso pegar seus";
		show "cartões por razões de segurança.";
		show "Segundamente, me encontre na mansão";
		show "de Kiel Hyre em Lighthalzen.";
		show "Mostre a Chave Dourada para";
		show "ser admitido nas áreas";
		delitem 7492,1; //Yellow_Keycard
		delitem 7495,1; //Blue_Keycard
		delitem 7496,1; //Red_Keycard
		set KielHyreQuest,46;
		next;
		show "[Allysia]";
		show "Eu entendo que isso";
		show "é repentino, e não estou";
		show "lhe dando uma explicação direta";
		show "mas algo horrível";
		show "vai acontecer se eu não";
		show "me apressar o mais rápido possível.";
		close2;
		warp "yuno_fild08",73,172;
		cutin "",255;
		end;
	}
	
	else if (KielHyreQuest >= 44) {
		show "[Allysia]";
		show "Eu entendo que isso";
		show "é repentino, e não estou";
		show "lhe dando uma explicação direta";
		show "mas algo horrível";
		show "vai acontecer se eu não";
		show "me apressar o mais rápido possível.";
		close2;
		warp "yuno_fild08",73,172;
		cutin "",255;
		end;
	}
	
}

//----------------------------------------------------------------------------
// Signboard (another useless NPC?)
//----------------------------------------------------------------------------
kh_dun01,163,223,4	script	Tabuleta	857,{
	show "[Noticia]";
	show "Bichinhos de estimação são proibidos";
	show "nessa área. (Bichinhos que";
	show "provêm assistência especial";
	show "para deficientes visuais estão";
	show "exclusos dessa regra.)";
	close;
}

//----------------------------------------------------------------------------
// Mechanical Devices for accessing restricted area
//----------------------------------------------------------------------------
kh_dun01,166,223,0	script	Dispositivo de Acesso::KHKeyardReader	111,{
	if ((KielHyreQuest <= 38) || (KielHyreQuest >= 44)) {
		show "^3355FFVocê encontrou^000000";
		show "^3355FFum dispositivo mecânico.^000000";
		show "^3355FFParece que pode ser^000000";
		show "^3355FFoperado inserindo o^000000";
		show "^3355FFcartão correto no slot.^000000";
		close;
	}

	else if ((KielHyreQuest == 40) && (countitem(7496) >= 1)) {
		show "^3355FFVocê encontrou^000000";
		show "^3355FFum dispositivo mecânico.^000000";
		show "^3355FFParece que pode ser^000000";
		show "^3355FFoperado inserindo o^000000";
		show "^3355FFcartão correto no slot.^000000";
		next;


		digit @KHInput$;
		if (@KHInput$ == "Cartão de Acesso Vermelho") {
			show "^3355FFA porta abre assim que^000000";
			show "^3355FFvocê insere o Cartão de Acesso Vermelho..^000000";
			close2;
			warp "kh_dun01",170,227;
			end;
		}
		else {
			show "^3355FFNada aconteceu.^000000";
			close;
		}

	}

}

kh_dun01,162,206,0	duplicate(KHKeyardReader)	Mechanical Device	111

//----------------------------------------------------------------------------
// Keep monsters out of the quest area.
// Silly really sinc ehte rest of it's a dungeon
//----------------------------------------------------------------------------
//kh_dun01,180,220,0	script	Warp de Monstro#kh1::KHMobWarp	-1,5,20,{
//OnTouchNPC:
//	warp "kh_dun01",178,138;
//	end;
//}

//kh_dun01,190,220,0	duplicate(KHMobWarp)	Monster Warp#kh2	-1,5,20
//kh_dun01,200,250,0	duplicate(KHMobWarp)	Monster Warp#kh3	-1,5,20
//kh_dun01,210,220,0	duplicate(KHMobWarp)	Monster Warp#kh4	-1,5,20
//kh_dun01,220,220,0	duplicate(KHMobWarp)	Monster Warp#kh5	-1,5,10

//----------------------------------------------------------------------------
// Kiel Hyre - OnTouch
//----------------------------------------------------------------------------
kh_dun01,224,233,0	script	Porta_Kiel_Hyre	-1,5,5,{
OnTouch:
	if (KielHyreQuest == 40) {
		if (checkweight(7497,1) == 0) {
			show "^3355FF- Wait!! -";
			show "- Você está carregando muitos ítens";
			show "- e não será capaz de aceitar mais. -";
			show "- Por favor abra algum espaço";
			show "- no seu inventario antes de retornar. -^000000";
			close;
		}

		show "^3355FFVocê pode ouvir fracamente^000000";
		show "^3355FFuma voz do outro lado^000000";
		show "^3355FFdessa porta.^000000";
		next;
		show "[????]";
		show "...Kiehl...";
		show "...Como se atreve...!";
		next;
		show "["+strcharinfo(0)+"]";
		show "Senhor Kiel Hyre?";
		show "É você aí dentro?";
		next;
		show "[Kiel Hyre]";
		show "Q-Quem está aí?";
		show "Identifique-se!";
		next;
		show "["+strcharinfo(0)+"]";
		show "Sou... Sou...";
		next;
		show "você explica sua história^000000";
		show "para a voz atrás da^000000";
		show "porta, e lhe diz o que^000000";
		show "aconteceu à Elly e Allysia.^000000";
		next;
		show "[Kiel Hyre]";
		show "...Sim... Sou eu.";
		show "Sou Kiel Hyre, aprisionado";
		show "aqui. Ele foi tão longe";
		show "como modificar Elly, eh?";
		show "..................";
		next;
		show "[Kiel Hyre]";
		show "Rápido, leve esse";
		show "módulo para Allysia!";
		show "Ela saberá o que fazer";
		show "com ele. Se você está realmente";
		show "nos ajudando, então ela terá";
		show "algumas instruções para você também.";
		next;
		show "^3355FFKiel Hyre passa^000000";
		show "^3355FFum estranho fragmento^000000";
		show "^3355FFde metal pela^000000";
		show "^3355FFfresta entre a^000000";
		show "^3355FFporta e o chão.^000000";
		additem 7497,1; //Metal_Fragment
		set KielHyreQuest,42;
		close;
	}


	else if (KielHyreQuest >= 42) {
		show "[Kiel Hyre]";
		show "......";
		close;
	}

}

//----------------------------------------------------------------------------
// Robot Factory Second Floor Entrances
//----------------------------------------------------------------------------
kh_dun01,44,203,0	script	Dispositivo de Acesso#1::KHAccess	111,{
	if (countitem(7509) < 1) {
		show "^3355FFVocê encontrou";
		show "um dispositivo mecânico.";
		show "Parece que pode ser";
		show "operado inserindo-se o";
		show "cartão correto no slot.^000000";
		close;
	}

	else {
		show "^3355FFVocê encontrou";
		show "um dispositivo mecânico.";
		show "Parece que pode ser";
		show "operado inserindo-se o";
		show "cartão correto no slot.^000000";
		next;

		digit @KHInput$;
		if (@KHInput$ == "Cartão de Acesso Exuberante") {
			show "^3355FFAssim que você insere o";
			show "Cartão de Acesso Exuberante";
			show "no slot de cartão,";
			show "a porta se escancara";
			show "revelando um longo lance";
			show "de escadas para baixo.^000000";
			next;

			switch(select("Descer as Escadas","Cancelar")) {

			case 1:
				warp "kh_dun02",41,198;
				end;

			case 2:
				show "^3355FFParece que essa porta";
				show "se fechou automaticamente";
				show "depois de um tempo limite";
				show "pré programado que passou.^000000";
				close;

			}

		}

		else {
			show "^3355FFvocê tenta empurrar a";
			show "porta com toda a sua";
			show "força, mas falha em";
			show "fazê-la se mover.^000000";
			close;
		}

	}

}

kh_dun01,36,195,0	duplicate(KHAccess)	Dispositivo de Acesso#2	111

//============================================================================

//============================================================================
// Kiel Hyre Mansion NPCs, and Kiehl's Room NPCs
//============================================================================

//----------------------------------------------------------------------------
// Kiel's Steward
//----------------------------------------------------------------------------
kh_mansion,78,55,5	script	Mordomo::StewardKHQ1	109,{
	if (KielHyreQuest < 46) {
		show "[Mordomo]";
		show "Isso é uma residência privada,";
		show "por favor saia.";
		close2;
		warp "lighthalzen",188,201;
		end;
	}

	if ((KielHyreQuest >= 46) && (KielHyreQuest < 50)) {
		show "[Mordomo]";
		show "Saudações.";
		show "você foi convidado";
		show "pelo mestre";
		show "dessa mansão?";
		next;

		switch(select("Mostrar a Chave Dourada","????")) {

		case 1:
			show "[Mordomo]";
			show "Ah, Mestre "+strcharinfo(0)+".";
			show "Estava aguardando a sua";
			show "chegada. Por favor, por aqui.";
			close2;
			warp "kh_mansion",21,14;
			end;

		case 2:
			show "[Mordomo]";
			show "Se você não foi";
			show "convidado pelo mestre";
			show "dessa mansão, então eu";
			show "temo que tenha de insistir em";
			show "sua partida imediata!";
			close2;
			warp "lightalzen",188,201;
			end;

		}

	}

	if ((KielHyreQuest >= 50) && (KielHyreQuest < 64)) {
		L_SeeKielHyre:
		show "[Mordomo]";
		show "Ah, Mestre "+strcharinfo(0)+".";
		show "É um prazer em";
		show "receber sua compania";
		show "novamente. Você";
		show "gostaria de ver meu mestre?";
		next;

		switch(select("Sim","Não")) {

		case 1:
			show "[Mordomo]";
			show "Muito bem.";
			show "Por aqui~";
			close2;
			warp "kh_mansion",21,14;
			end;

		case 2:
			show "[Mordomo]";
			show "Muito bem.";
			show "Por favor, sinta-se";
			show "em casa.";
			close;

		}

	}

	if ((KielHyreQuest == 52) || (KielHyreQuest == 54) || (KielHyreQuest >= 64) && (KielHyreQuest <= 70)) {
		show "[Mordomo]";
		show "Ah, Mestre "+strcharinfo(0)+".";
		show "É um prazer em";
		show "receber sua compania";
		show "novamente. Você";
		show "gostaria de ver meu mestre, ou...?";
		next;

		switch(select("^FF0000Kiel Hyre^000000","^3355FFMitchell^000000")) {

		case 1:
			show "[Mordomo]";
			show "Muito bem.";
			show "Por aqui~";
			close2;
			warp "kh_mansion",21,14;
			end;

		case 2:
			show "[Mordomo]";
			show "Oh...? Você deve";
			show "estar aqui para trazer";
			show "boas novas. Com licença...";
			next;
			show "^3355FFO Mordomo furtivamente^000000";
			show "^3355FFolhou em volta pra checar^000000";
			show "^3355FFse alguém o estava observando.^000000";
			next;
			show "[Mordomo]";
			show "Acredito que seja";
			show "seguro o bastante em deixar";
			show "você vê-lo agora...";
			show "Por favor, rápido por aqui.";
			close2;
			warp "kh_mansion",20,87;
			end;

		}

	}

	if (KielHyreQuest >= 70) {
		goto L_SeeKielHyre;
	}

}

//----------------------------------------------------------------------------
// Kiel Hyre
//----------------------------------------------------------------------------
kh_mansion,22,28,4	script	Kiel Hyre	903,{
	set @now_weight,MaxWeight-Weight;
	if (@now_weight < 2000) {
		show "^3355FFSó um segundo...";
		show "Você está carregando";
		show "muitos itens com você";
		show "agora, então você vai";
		show "precisar liberar mais";
		show "espaço no seu inventario antes...^000000";
		close;
	}

	cutin "kh_kyel02",2;
	if (KielHyreQuest < 46) {
		show "[Kiel Hyre]";
		show ".........";
		close;
	}

	else if (KielHyreQuest == 46) {
		cutin "kh_kyel01",2;
		show "[Kiel Hyre]";
		show "Ah, você deve ser "+strcharinfo(0)+".";
		show "Gostaria de lhe agradecer por salvar";
		show "minha vida. Você deve ter muitas";
		show "perguntas a me fazer, então eu";
		show "farei o melhor para lhe dar respostas.";
		next;

		L_Menu:

		switch(select("Robôs?","^3355FFKiehl^000000?","Broche de ^FF0000Elly^000000?")) {

		case 1:
			show "[Kiel Hyre]";
			show "Andei pesquisando";
			show "robótica por trinta e dois";
			show "anos agora. Tenho orgulho de";
			show "dizer que tive sucesso";
			show "Onde o grande Sábio";
			show "Varmundt não teve.";
			next;
			show "[Kiel Hyre]";
			show "Era meu sonho em";
			show "desenvolver robôs humanóides";
			show "de humanos. Aqueles Guardiões";
			show "poderiam ser robôs também, mas eles";
			show "não operam usando vontade própria.";
			next;
			show "[Kiel Hyre]";
			show "Se você quiser saber mais";
			show "especificamente sobre";
			show "robótica, por quê você não fala";
			show "com ^3355FFAllysia^000000? Ela pode explicar";
			show "tudo muito mais suscintamente";
			show "que eu. Eu tendo a errar...";
			if (@KHQ1Read < 1) { set @KHQ1Read,1; }
			break;

		case 2:
			show "[Kiel Hyre]";
			show "^3355FFKiehl^000000 é meu único filho,";
			show "mas o amor da minha vida";
			show "morreu assim que deu à luz a";
			show "ele. Eu admito que ele é";
			show "um gênio em design";
			show "mecânico e desenvolvimento.";
			next;
			show "[Kiel Hyre]";
			show "Ele é altamente responsável";
			show "pela criação da Terceira";
			show "Geração de robôs como Elly.";
			show "Infelizmente, ele está tentando";
			show "modificar suas criações para";
			show "algum propósito sinistro.";
			next;
			show "[Kiel Hyre]";
			show "Eu tentei pará-lo,";
			show "mas acabei ficando";
			show "trancado dentro da fábrica.";
			show "Não sei porque ele quer";
			show "fazer isso. Ainda não tenho";
			show "absolutamente nenhuma pista...";
			if (@KHQ2Read < 1) { set @KHQ2Read,1; }
			break;

		case 3:
			show "[Kiel Hyre]";
			show "Aquele broche que Elly estava";
			show "segurando tem o ^3355FFemblema de Kiehl^000000";
			show "entalhado nele. Ah e aquele";
			show "homem de preto ameaçando os";
			show "estudantes? Aquele era provavelmente";
			show "^3355FFKaiser^000000, o guarda-costas de Kiehl.";
			next;
			show "[Kiel Hyre]";
			show "Kaiser...";
			show "Eu não sei";
			show "nada sobre ele.";
			show "Nunca nem olhei seu";
			show "rosto! Kiehl simplesmente o contratou";
			show "sem que eu soubesse...";
			if (@KHQ3Read < 1) { set @KHQ3Read,1; }
			break;

		}

		if ((@KHQ1Read == 1) && (@KHQ2Read == 1) && (@KHQ3Read == 1)) {
			show "[Kiel Hyre]";
			show "Se você não tiver";
			show "mais perguntas para mim,";
			show "então você por favor";
			show "me deixe descansar?? Ainda não";
			show "estou me sentido bem do tempo";
			show "que fiquei trancado na fábrica.";
			delitem 7493,1; //Golden_Key
			delitem 7494,1; //Exquisite_Button
			set KielHyreQuest,48;
		}

		else { 
			next;
			goto L_Menu; 
		}

	}

	else if (KielHyreQuest == 48) {
		show "Ah, Quase esqueci.";
		show "Por favor, peque isso como";
		show "uma pequena recompensa por";
		show "ter salvo minha vida.";
		set KielHyreQuest,50;
		additem 12105,1; //Taming_Gift_Set
		getexp 700000,0;
	}

	else if ((KielHyreQuest >= 50) && (KielHyreQuest < 64)) {
		show "Se você não tiver";
		show "mais perguntas para mim,";
		show "então você por favor";
		show "me deixe descansar?? Ainda não";
		show "estou me sentido bem do tempo";
		show "que fique trancado na fábrica.";
	}

	else if (KielHyreQuest == 64) {
		cutin "kh_kyel01",2;
		show "[Kiel Hyre]";
		show "Hm? Há algo ";
		show "que você";
		show "gostaria de";
		show "me perguntar?";
		next;
		show "["+strcharinfo(0)+"]";
		show "Eu não tenho evidências";
		show "concretas suficientes ainda,";
		show "mas eu devo ter algumas";
		show "perguntas em breve.";
	}

	else if (KielHyreQuest == 68) {
		cutin "kh_kyel02",2;
		show "[Kiel Hyre]";
		show "Ah, "+strcharinfo(0)+".";
		show "É você. Então como posso";
		show "lhe ajudar hoje?";
		next;

		switch(select("Sobre ^3355FFAllysia^000000...")) {

		case 1:
			show "["+strcharinfo(0)+"]";
			show "Sabe, eu estava olhando";
			show "nessa casa deserta";
			show "em Yuno, e descobri";
			show "um velho porta retratos de uma mulher";
			show "que se parece muito com Allysia.";
			next;
			cutin "kh_kyel02",2;
			show "[Kiel Hyre]";
			show "Oh...";
			show "Isso é tudo?";
			show "Pensei que você tinha";
			show "uma pergunta sobre robótica.";
			next;
			cutin "kh_Kyel03",2;
			show "[Kiel Hyre]";
			show "De qualquer forma, é uma";
			show "estranha coincidência.";
			show "Bem, suporto que não é";
			show "tão estranho encontrar";
			show "pessoas parecidas com outras...";
			next;
			show "["+strcharinfo(0)+"]";
			show "Eu não acho que seja só";
			show "uma coincidência. A mulher";
			show "naquele pequeno retrato de trinta anos";
			show "também era chamada Allysia, e ela";
			show "ela trabalhava na rua Orsimier";
			show "em Yuno. Isso lhe diz algo?";
			next;
			cutin "kh_kyel02",2;
			show "[Kiel Hyre]";
			show "......";
			show ".........";
			show "............";
			next;
			cutin "kh_kyel01",2;
			show "["+strcharinfo(0)+"]";
			show "Então pensei que essa";
			show "Allysia deve ter sido a";
			show "mulher que você amou, e";
			show "que você baseou a aparência dos";
			show "seus robôs nela.";
			next;
			cutin "kh_kyel02",2;
			show "[Kiel Hyre]";
			show "............";
			next;
			cutin "kh_kyel01",2;
			show "["+strcharinfo(0)+"]";
			show "Acho que foi isso que aconteceu:";
			show "quando você era um jovem, pobre";
			show "você se apaixonou por";
			show "Allysia. Entretanto, ela estava";
			show "apaixonada por Rosimier, que";
			show "era rico e poderoso.";
			next;
			show "["+strcharinfo(0)+"]";
			show "Entretanto, Rosimier estava";
			show "noivo de uma outra";
			show "mulher, e ele acabou por";
			show "casar-se com sua noiva, assim";
			show "partindo o coração de Allysia.";
			next;
			show "["+strcharinfo(0)+"]";
			show "Sentindo-se traída, seu";
			show "coração partido, Allysia pulou";
			show "em um rio. Então você decidiu";
			show "se vingar de Rosimier, então";
			show "acabou por se juntar com a";
			show "Corporação Rekenber!";
			next;
			cutin "kh_Kyel03",2;
			show "[Kiel Hyre]";
			show "Hahahahahahaha!";
			show "Oh, Que imaginação~";
			show "Isso é muito ridículo...";
			show "Ainda assim, eu admito, talvez";
			show "eu tenha feito o modelo Allysia depois";
			show "de ver aquela mulher há muito tempo.";
			next;
			show "[Kiel Hyre]";
			show "Eu quase esqueci";
			show "dela! Acho que nós";
			show "eramos amigos... Ainda assim,";
			show "de onde você teve a idéia";
			show "de que eu pudesse";
			show "estar apaixonado por ela?";
			next;

			switch(select("Revelar o retrato de Kiel da Cabana")) {

			case 1:
				cutin "kh_kyel02",2;
				show "[Kiel Hyre]";
				show "O-O quê...";
				show "Como...";
				show "Onde você...?";
				next;
				show "["+strcharinfo(0)+"]";
				show "Kiel Hyre, eu encontrei esse";
				show "retrato seu quando jovem";
				show "na casa do";
				show "homem que comprou o anel de Allysia.";
				show "Eu até falei com o pescador";
				show "que descobriu o corpo de Allysia.";
				next;
				show "["+strcharinfo(0)+"]";
				show "Você pagou uma quantia absurda";
				show "de dinheiro para comprar o anel de";
				show "Allysia. Como você pode me dizer";
				show "que você não a amava?";
				next;
				cutin "kh_Kyel03",2;
				show "[Kiel Hyre]";
				show "*Droga...*";
				show "Você me pegou, você me pegou.";
				show "Eu não queria que você descobrisse";
				show "a verdade. Você está certo.";
				show "Eu amei Allysia, e desenvolvi";
				show "meu robô para se parecer com ela.";
				next;
				show "[Kiel Hyre]";
				show "Eu nunca poderia a esquecer.";
				show "Nunca. Mas nunca faria";
				show "nada para ferir o";
				show "Rosimiers! Sou um cientista!";
				show "Eu o odiei quando eu era jovem,";
				show "mas as coisas são diferentes agora!";
				next;
				show "[Kiel Hyre]";
				show "Eu não derramei lágrimas quando o";
				show "Rosimiers caiu, mas eu não fui o";
				show "responsável. Além do mais eu não";
				show "tinha os recursos ou a";
				show "capacidade de causar...";
				next;
				cutin "kh_kyel02",2;
				show "["+strcharinfo(0)+"]";
				show "Infelizmente acho que as";
				show "evidências mostram o contrário.";
				next;

				switch(select("Mostrar o retrato de Rosimiers")) {

				case 1:
					show "["+strcharinfo(0)+"]";
					show "Dê uma boa olhada";
					show "nesse retrato que";
					show "encontrei na antiga casa de";
					show "Rosimiers. Percebe";
					show "algo... incriminador?";
					next;
					cutin "kh_Kyel03",2;
					show "[Kiel Hyre]";
					show "Com excessão daquele";
					show "James Rosimier, você quer";
					show "dizer? Não! Não vejo";
					show "nada errado com";
					show "essa imagem ao todo.";
					next;
					show "["+strcharinfo(0)+"]";
					show "Dê uma boa olhada";
					show "no relógio de bolso";
					show "no retrato. Aquele é";
					show "o relógio de bolso que você";
					show "usa hoje, não é?";
					next;
					cutin "kh_kyel02",2;
					show "[Kiel Hyre]";
					show "...!!!";
					next;
					show "["+strcharinfo(0)+"]";
					show "Você pode não ter causado";
					show "a queda de Rosimiers";
					show "por si só, mas com a ajuda da";
					show "Corporação Rekenber eu";
					show "diria que era inteiramente possível!";
					next;
					cutin "kh_Kyel03",2; 
					show "[Kiel Hyre]";
					show "Bem jogado, aventureiro.";
					show "Bem jogado. Eu não me arrependo";
					show "do que fiz: eles mataram minha";
					show "Allysia! Se  James não a tivese";
					show "traído, se ele não a tivesse feito";
					show "cometer suicídio...";
					next;
					show "["+strcharinfo(0)+"]";
					show "Aí é que você está errado!";
					show "Allysia foi assassinada, ela não";
					show "cometeu suicídio. Dê uma boa";
					show "olhada nesse bilhete aqui!";
					next;
					show "[Kiel Hyre]";
					show "O quê?!";
					next;

					switch(select("Mostrar o bilhete de James")) {

					case 1:
						show "[Kiel Hyre]";
						show "O que isso prova?";
						show "Isso não mostra que";
						show "James não traiu Allysia.";
						show "Como isso muda tudo?";
						show "Ela está morta, nada que eu faça";
						show "trará ela de volta prá mim!";
						next;
						show "["+strcharinfo(0)+"]";
						show "Eu nunca disse que James não";
						show "a traiu. Olhe na data";
						show "no bilhete. James fez planos";
						show "de fugir com ela em 20 de Agosto";
						show "Entretanto, o corpo dela foi";
						show "encontrado no mesmo dia.";
						next;
						show "["+strcharinfo(0)+"]";
						show "Portanto, Allysia deve ter";
						show "morrido em 19 de Agosto. Se ela";
						show "estava planejando em fugir com";
						show "seu amor no dia seguinte, então";
						show "ela não tinha razão para se matar!";
						next;
						show "[Kiel Hyre]";
						show "Não, isso não está certo!";
						show "Ela provavelmente não podia";
						show "confiar em mim. Ela deve ter";
						show "percebido que ela não era nada";
						show "além de um brinquedo para ele!";
						next;
						show "["+strcharinfo(0)+"]";
						show "Ah sim? Digo que ela pulou";
						show "no rio por que você";
						show "encontrou-se com ela naquele dia.";
						show "Agora, dê uma boa olhada nisso!";
						next;

						switch(select("Mostrar o bilhete de K.H.")) {

						case 1:
							show "["+strcharinfo(0)+"]";
							show "Esse bilhete foi escrito por";
							show "um home com suas iniciais,";
							show "K.H. Essas iniciais estavam também";
							show "escritas no retrato dela. Você";
							show "deve ter escrito esse bilhete:";
							show "há muitas coincidências!";
							next;
							show "["+strcharinfo(0)+"]";
							show "De acordo com esse bilhete,";
							show "você disse a Allysia que você";
							show "queria vê-la novamente";
							show "no lugar onde se encontraram antes.";
							show "Acho que você a viu novamente...";
							show "em 19 de Agosto, o dia que ela morreu!";
							next;
							show "["+strcharinfo(0)+"]";
							show "Estou presumindo que o lugar que vocês";
							show "se encontraram primeiro foi próximo ao";
							show "rio. Chega de suas mentiras:";
							show "Me conte o que realmente aconteceu!";
							next;
							cutin "kh_kyel02",2;
							show "[Kiel Hyre]";
							show "............";
							show ".........";
							show "......";
							next;
							cutin "kh_Kyel03",2;
							show "[Kiel Hyre]";
							show "Hah... Ha ha ha...";
							show "Sim... Está certo...";
							show "Aquela noite horrível.";
							show "Eu lembro muito bem...";
							show ".....................";
							next;
							cutin "kh_kyel02",2;
							show "[Kiel Hyre]";
							show "Aquela noite, quando ela veio";
							show "ao rio, para me encontrar como";
							show "eu havia pedido, eu implorei a ela para";
							show "fugir comigo, ao invés";
							show "de esperar por aquele James.";
							next;
							show "[Kiel Hyre]";
							show "Ela insistiu que James";
							show "nunca a trairia, e ele";
							show "prometeu a levar";
							show "com ele no dia seguinte. você";
							show "pode imaginar como aquilo me fez";
							show "sentir? Eu não era nada prá ela.";
							next;
							show "[Kiel Hyre]";
							show "Meus sentimentos não importavam para";
							show "ela. Ela ficou irritada";
							show "com aquele anel... Eu perdi o controle";
							show "e tentei tirar aquela coisa maldita";
							show "dela e jogar";
							show "dentro do rio...";
							next;
							show "[Kiel Hyre]";
							show "Mas sabe de uma coisa?";
							show "Ela se debateu, ela realmente";
							show "lutou comigo! Era apenas uma pequena";
							show "briga, mas então antes que eu percebesse";
							show "o chão debaixo de nós";
							show "cedeu e... as chuvas...";
							next;

							switch(select(".........")) {

							case 1:
								show "[Kiel Hyre]";
								show "Não estou certo o que";
								show "foi. A chuva enfraqueceu";
								show "o chão, algo estava";
								show "errado... e ela simplesmente...";
								show "simplesmente... O rio a engoliu...";
								show "Me senti vazio. Ela se foi. ";
								set KielHyreQuest,70;
								delitem 7498,1; //Losimier's_House_Key
								delitem 7499,1; //Portrait_of_a_Family
								delitem 7500,1; //Portrait_of_a_Lady
								delitem 7501,1; //K.H's_Letter
								delitem 7502,1; //James's_Memo
								delitem 7503,1; //Portrait_of_a_Guy
								close;

							}

						}

					}

				}

			}

		}

	}

	else if (KielHyreQuest == 70) {
		cutin "kh_kyel01",2;
		show "[Kiel Hyre]";
		show "Você já sabe que";
		show "ela foi encontrada morta no";
		show "dia seguinte. Mas o que realmente";
		show "partiu meu coração foi que";
		show "ela segurou aquele anel tão firmemente";
		show "em sua mão, mesmo na morte...";
		next;
		cutin "kh_kyel03",2;
		show "[Kiel Hyre]";
		show "A família dele tinha tudo";
		show "enquanto eu não tinha nada. E";
		show "ele teve a audácia de tirar";
		show "Allysia de mim?!";
		show "Como isso poderia estar certo?";
		next;
		show "[Kiel Hyre]";
		show "Ainda que ela tenha falecido";
		show "eu ainda queria provar";
		show "para Allysia que tipo de pessoa";
		show "horrível James era realmente.";
		show "E então foi quando me juntei à";
		show "Corporação Rekenber.";
		next;
		show "[Kiel Hyre]";
		show "Desenvolvi a primeiríssima";
		show "Geração de Robôs, a qual";
		show "eu chamei Allysia, e vendi os";
		show "esquemas para Rekenber. Eu lhes dei";
		show "robôs, e eles me deram dinheiro,";
		show "poder, subordinados obedientes.";
		next;
		show "[Kiel Hyre]";
		show "Claro eu sabia que usariam";
		show "meus robôs para espionar e matar!";
		show "Mas sabe de uma coisa? Eu não";
		show "me importava desde que eles me dessem";
		show "os meios para minha vingança. Era";
		show "a parceria perfeita, realmente.";
		next;
		show "[Kiel Hyre]";
		show "Você me pegou";
		show "bem onde você queria.";
		show "Para quem você está trabalhando";
		show "e exatamente o que";
		show "você quer? Meus esquemários?";
		show "Minha morte? Tudo...?";
		next;
		cutin "kh_kyel01",2;
		show "["+strcharinfo(0)+"]";
		show "Na verdade, eu só quero";
		show "perguntar sobre a natureza";
		show "da sua relação profissional com";
		show "a Corporação Rekenber";
		show "e sobre Kiehl.";
		next;
		show "[Kiel Hyre]";
		show "Kiehl, ne? Depois de ouvir";
		show "minha história doida, acho";
		show "que você já suspeita da";
		show "verdade sobre ele... Ele também é";
		show "um robô, especificamente o primeiro";
		show "da segunda geração de modelos.";
		next;
		show "[Kiel Hyre]";
		show "Sua mente foi desenvolvida usando.";
		show "uma forma experimental e instável,";
		show "de Pergaminhos de Mágica Condensada";
		show "Ele foi o único robô";
		show "da Segunda Geração que";
		show "foi permitido existir.";
		next;
		show "[Kiel Hyre]";
		show "Eu fiquei muito apegado";
		show "a Kiehl. Não é de se surpreender,";
		show "vendo que robótica se";
		show "tornou minha vida. Eu até o criei";
		show "como meu próprio filho, e ensinei-lhe";
		show "tudo sobre robótica";
		next;
		show "[Kiel Hyre]";
		show "Kiehl agora é um gênio,";
		show "e até desenvolveu a";
		show "Terceira Geração de Robôs.";
		show "Infelizmente eu falhei em";
		show "educá-lo propriamente com";
		show "moral e ética humana.";
		next;

		switch(select("......")) {

		case 1:
			show "[Kiel Hyre]";
			show "Ele está transformando";
			show "a Terceira Geração de robôs";
			show "em máquinas de matar. Por isso";
			show "eu tentei colocá-los todos";
			show "na academia, então eles poderiam";
			show "aprender o comportamento humano.";
			next;
			show "[Kiel Hyre]";
			show "Mesmo que a academia";
			show "tenha atrasado os planos de Kiehl,";
			show "ele foi bem sucedido em";
			show "converter todos os robôs";
			show "em incontroláveis máquinas";
			show "de destruição em massa.";
			next;
			show "[Kiel Hyre]";
			show "Sim, ele estava trabalhando";
			show "juntamente com Rekenber.";
			show "Seu verdadeiro objetivo é";
			show "criar máquinas mortíferas";
			show "para uso de Rekenber.";
			next;
			show "[Kiel Hyre]";
			show "Você sabe todos os segredos";
			show "do meu passado agora. Não estou";
			show "aborrecido com você ou nada,";
			show "mas eu tenho algo";
			show "que gostaria de lhe pedir.";
			next;
			show "[Kiel Hyre]";
			show "Por favor, pare Kiehl!";
			show "Eu não quero que essa loucura";
			show "destrua mais robôs!";
			show "Vejo cada um e todos";
			show "eles como se fossem meus filhos!";
			next;
			show "[Kiel Hyre]";
			show "Sei que devo tomar";
			show "total responsabilidade por tudo";
			show "que aconteceu. Eu prometo";
			show "que vou pagar por";
			show "meus atos, assim que tudo";
			show "estiver resolvido.";

			next;

			select("Aceitar","Okay","Aham");

			show "[Kiel Hyre]";
			show "Muitíssimo obrigado!";
			show "Você pode encontrar Kiehl";
			show "no nível subterrâneo";
			show "dessa mansão.";
			set KielHyreQuest,72;

		}

	}

	else if (KielHyreQuest == 72) {
		cutin "kh_kyel01",2;
		//I believe this text goes here o_o
		show "[Kiel Hyre]";
		show "Ele fica em um quarto velho";
		show "onde ele foi criado, mas";
		show "ele reconstruiu como um tipo";
		show "de caverna para manter todos";
		show "fora. Incluindo eu. Sim, ele";
		show "não confia em ninguém mais...";
		next;
		show "[Kiel Hyre]";
		show "Quando você o encontrar, quero";
		show "que você tire o anel de Allysia";
		show "do coração dele. Se você";
		show "o remover, vai impedir";
		show "dele se tornar selvagem.";
		next;

		switch(select("Anel de Allysia?")) {

		case 1:
			show "[Kiel Hyre]";
			show "Sim... Seu anel é o";
			show "começo de tudo. Eu coloquei";
			show "aquilo no coração dele para";
			show "que eu nunca esquecesse o que";
			show "o Rosimiers fez para mim.";
			next;
			show "[Kiel Hyre]";
			show "Acho que o crescimento de Kiehl";
			show "é tão mais poderoso que o que armas";
			show "normais podem não funcionar nele";
			show "mais. Use esse";
			show "dispositivo que fará com que seu";
			show "suprimento de energia flutue.";
			additem 7504,1; //Power_Source
			next;
			cutin "kh_kyel03",2;
			show "[Kiel Hyre]";
			show "Se você conseguir ligar isso";
			show "no corpo de Kiehl, então";
			show "ele não poderá usar o corpo";
			show "dele com poder total. Enquanto ele";
			show "estiver enfraquecido, abra o seu peito";
			show "e tire o anel do seu coração.";
			next;
			show "[Kiel Hyre]";
			show "Me avise assim";
			show "Que você estiver pronto, Então eu o";
			show "guiarei ao quarto de Kiehl.";
			set KielHyreQuest,74;
			break;

		}

	}

	else if ((KielHyreQuest >= 74) && (KielHyreQuest <= 104)) {
		show "[Kiel Hyre]";
		show "Você está pronto";
		show "para confrontar";
		show "Kiehl agora?";
		next;

		switch(select("Sim","Não")) {

		case 1:
			show "[Kiel Hyre]";
			show "Há... uma passagem";
			show "secreta que está aberta agora.";
			show "Apenas vá para a minha direita";
			show "mas tenha cuidado. Kiehl";
			show "é extremamente perigoso.";
			enablenpc "Kiehl_Room_Warp";
			donpcevent "Kiehl_Room_Warp::OnEnable";
			break;

		case 2:
			show "[Kiel Hyre]";
			show "Por favor leve o";
			show "tempo que precisar. Eu imagino";
			show "que não será fácil.";
			break;

		}

	}

	else if ((KielHyreQuest >= 74) && (KielHyreQuest <= 106)) {
		cutin "kh_kyel01",2;
		show "[Kiel Hyre]";
		show "Você retornou...!";
		show "Então você conseguiu";
		show "recuperar o Anel de Allysia";
		show "do coração de Kiehl?";
		next;

		if (countitem(7508) < 1) {
			show "[Kiel Hyre]";
			show "Quer dizer... Você não o tem?";
			show "Por favor, recupere o Anel de Allysia";
			show "do coração de Kiehl!";
			next;
			enablenpc "Kiehl_Room_Warp";
			donpcevent "Kiehl_Room_Warp::OnEnable";
			close2;
			cutin "",255;
		}

		show "[Kiel Hyre]";
		show "O-O quê aconteceu...?";
		show "Kiehl desenvolveu um novo";
		show "corpo para ele? I-Isso";
		show "o faz a Quarta Geração";
		show "de robôs. Eu não tinha";
		show "idéia que ele era tão esperto.";
		next;
		show "[Kiel Hyre]";
		show "Espere, agora pensando melhor";
		show "eu vi corpos de robôs que";
		show "pareciam com Kiehl quando eu estava";
		show "trancado na fábrica. Então ele";
		show "estava usando aquelas cópias para";
		show "desenvolver atualizações pessoais.";
		next;
		show "[Kiel Hyre]";
		show "Aqui, por favor pegue esse";
		show "cartão que deixará você";
		show "entrar e investigar os";
		show "níveis mais profundos da fábrica.";
		show "Eu investigarei o quarto de Kiehl.";
		set KielHyreQuest,108;
		additem 7509,1; //Gorgeous_Keycard
		next;

		if (sex == 0) {
			if (getpartnerid() == 0) set @KHTitle$,"Miss";
			else set @KHSTitle$,"Mrs";
		}
		else set @KHTitle$,"Sr.";

		show "[Kiel Hyre]";
		show "Kiehl é minha responsabilidade...";
		show "Não importa qual o custo";
		show "eu tenho de pará-lo! Oh,";
		show "e aqui, por favor pegue isso";
		show "com toda minha gratidão por";
		show "sua ajuda, "+@KHTitle+". "+strcharinfo(0)+".";
		additem 616,1;  //Old card Album
		delitem 7508,1; //Elisia's_Ring
		delitem 7487,1; //Culinary_Wine
		delitem 7488,1; //Delivery_Package
		delitem 7489,1; //Cottage Key
		delitem 7493,1; //Golden_Key
		delitem 7494,1; //Exquisite_Button
		delitem 7495,1; //Blue_Keycard
		delitem 7490,1; //Letter to Elly
		delitem 7492,1; //Yellow_Keycard
		delitem 7516,1;	//Green_Keycard
		delitem 7491,1; //Iron_Box
		delitem 7496,1; //Red_Keycard
		delitem 7497,1; //Metal_Fragment
		delitem 7504,1; //Power_Source
		delitem 7498,1; //Losimier's_House_Key
		delitem 7499,1; //Portrait_of_a_Family
		delitem 7500,1; //Portrait_of_a_Lady
		delitem 7501,1; //K.H's_Letter
		delitem 7502,1; //James's_Memo
		delitem 7503,1;	//Portrait_of_a_Guy
		delitem 7505,1; //Toy_Key
		getexp 1000000,0;
	}

	else if (KielHyreQuest >= 108) {
		show "[Kiel Hyre]";
		show "......";
		show ".........";
		show "............";
	}

	close2;
	cutin "",255;
	end;
}


//----------------------------------------------------------------------------
// Allysia
//----------------------------------------------------------------------------
kh_mansion,18,30,4	script	Allysia	894,{
	cutin "kh_ellisia",2;
	if (KielHyreQuest <= 68) {
		show "[Allysia]";
		show "Quem é você?";
		show "Como chegou aqui?";
		show "Vá embora";
		close;
	}

	else if (KielHyreQuest < 70) {
		show "[Allysia]";
		show "você deve estar surpreso";
		show "por tudo que tem";
		show "acontecido. Talvez tudo";
		show "fosse mais fácil de entender";
		show "se eu explicasse sobre robôs?";
		next;

		switch(select("Sim","Não")) {

		case 1:
			show "[Allysia]";
			show "Os robôs que você tem";
			show "encontrado são bonecos mecânicos";
			show "automatizados que podem";
			show "pensar e operar independentemente.";
			show "Muitos sábios tentaram desenvolver";
			show "seus próprios robôs, mas falharam.";
			next;
			show "[Allysia]";
			show "Meu mestre, Kiel Hyre, esteve";
			show "estudando robótica desde que";
			show "tinha vinte anos e";
			show "desenvolveu três diferentes";
			show "gerações de robôs, a primeira,";
			show "segunda e terceira gerações.";
			next;

			switch(select("Primeira Geração","Segunda Geração","Terceira Geração")) {

			case 1:
				show "[Allysia]";
				show "Eu sou um bom exemplo da";
				show "Primeira Geração de Robôs de";
				show "Kiel. Fui construída usando";
				show "um esqueleto mecânico pesado,";
				show "um coração robótico e pele";
				show "quimicamente sintetizada.";
				next;
				show "[Allysia]";
				show "Minha unidade de processamento central,";
				show "equivalente à seu cérebro, é";
				show "essencialmente um Pergaminho de Memória";
				show "baseado no esboço de Pergaminhos";
				show "Mágicos que vocês";
				show "aventureiros usam em batalha.";
				next;
				show "[Allysia]";
				show "Sou o mais velho tipo de";
				show "robô humanóide, então eu peso";
				show "muito, e minha mente pode somente";
				show "processar uma quantidade limitada de";
				show "dados. Então, eu não posso expressar";
				show "emoções similarmente à um humano.";
				break;

			case 2:
				show "[Allysia]";
				show "A Primeira Geração de robôs";
				show "foram desenvolvidas na maioria de";
				show "partes mecânicas, mas a";
				show "Segunda Geração de Robôs";
				show "incorporaram a ciência e tecnologia";
				show "dos Homunculus.";
				next;
				show "[Allysia]";
				show "A Segunda Geração de robôs";
				show "parecem ter mais fida, já que";
				show "têm pele artificial e carne";
				show "criadas, ainda assim são";
				show "construídos de um pesado";
				show "esqueleto mecânico.";
				next;
				show "[Allysia]";
				show "A tecnologia elemental de";
				show "pergaminhos dos Sábios também usada";
				show "para desenvolver o Pergaminho de";
				show "memória condensada, uma unidade de";
				show "processamento central superior à";
				show "usada na Primeira Geração de robôs.";
				next;
				show "[Allysia]";
				show "Então os Pergaminhos de Memória";
				show "Condensados eram 100,000 vezes";
				show "mais poderosos que os Pergaminhos";
				show "de Memória comuns, eles eram";
				show "problemáticos e tendiam";
				show "à muitos erros e problemas";
				next;
				show "[Allysia]";
				show "A Segunda Geração de Robôs";
				show "eram capazes de expressar";
				show "emoções humanas, mas sua";
				show "produção foi interrompida após seis";
				show "anos pois foram considerados";
				show "defeituosos.";
				break;

			case 3:
				show "[Allysia]";
				show "A Terceira Geração de robôs";
				show "foram desenvolvidas na sua maioria";
				show "pelo filho de Kiel Hyre, Kiehl,";
				show "e não usam esqueletos";
				show "mecânicos: Todo o corpo";
				show "é basicamente um homunculus.";
				next;
				show "[Allysia]";
				show "Com seus corpos orgânicos";
				show "e corações artificiais avançados";
				show "feitos da imitação de Pedados do Coração";
				show "de Ymir , eles podem experimentar";
				show "fenômenos psicológicos";
				show "como simples humanos.";
				next;
				show "[Allysia]";
				show "Kiehl conseguiu desenvolver";
				show "uma forma mais estável do";
				show "Pergaminho de Memória Condensada";
				show "que não sofre dos";
				show "erros críticos, e pode ser";
				show "produzido em massa a baixo custo.";
				next;
				show "[Allysia]";
				show "Elly é atualmente um protótipo";
				show "da Terceira Geração. Uma vez";
				show "que melhoramos os protótipos,";
				show "começamos a produção em massa.";
				show "De fato, a academia é nosso";
				show "campo de testes de protótipos.";
				next;
				show "[Allysia]";
				show "O fto de que um protótipo de";
				show "robôs podem interagir assim como";
				show "humanos reais, é prova de nosso";
				show "sucesso em robótica.";
				break;

			}
		case 2:
			show "[Allysia]";
			show "Por favor me avise se";
			show "quiser aprender mais sobre";
			show "os robôs de Kiel Hyre.";
			break;

		}

	}

	else if (KielHyreQuest >= 70) {
		show "[Allysia]";
		show "......";
		show ".........";
		show "............";
	}

	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// Abduction triggering NPC
//----------------------------------------------------------------------------
lighthalzen,188,200,0	script	Abduction_trigger	-1,3,1,{
OnTouch:
	if (KielHyreQuest == 50) {
		show "^3355FFConforme você sai^000000";
		show "^3355FFda mansão, algo^000000";
		show "^3355FFbate sobre sua cabeça^000000";
		show "^3355FFe você instantaneamente^000000";
		show "^3355FFperde a consciência...^000000";
		close2;
		percentheal -99,0;
		warp "kh_mansion",30,75;
	}
	end;
}

//----------------------------------------------------------------------------
// Mysterious Woman "Mitchell Layla"
//----------------------------------------------------------------------------
kh_mansion,25,79,4	script	Mulher Misteriosa	727,3,3,{
L_StartDialog:
	if (KielHyreQuest == 50) {
		show "^3355FFVocê acordou com sua^000000";
		show "^3355FFcabeça latejando de dor,^000000";
		show "^3355FFe uma mulher misteriosa^000000";
		show "^3355FFparada em sua frente.^000000";
		next;
		show "[??????]";
		show "Hm? Oh, você acordou";
		show "antes do que eu pensava.";
		show "Você deve se sentir confuso,";
		show "mas ouça atentamente. Se não";
		show "então não posso garantir";
		show "sua segurança, okay? Certo.";
		next;
		show "[??????]";
		show "Tudo o que você precisa saber é";
		show "que sou um agente secreto da";
		show "República de Schwaltzvalt";
		show "Estamos investigando a";
		show "atividade anormal entre Kiel";
		show "Hyre e a Corporação Rekenber.";
		next;
		show "[??????]";
		show "Vimos você entrar na";
		show "mansão e conversar com";
		show "Kiel Hyre, então basicamente";
		show "você está aqui para interrogatório.";
		show "Agora me diga a verdade. Como";
		show "você conheceu Kiel Hyre?";
		next;

		switch(select("Eu vou contar tudo!","Não sei de nada!")) {

		case 2:
			show "[??????]";
			show "Não...sabe...de nada?";
			show "Tem certeza disso? Somente";
			show "poucos selecionados podem falar";
			show "com Kiel Hyre pessoalmente. Você";
			show "deve ter alguma conexão";
			show "com ele. Estou certo, não estou?";
			next;
			show "["+strcharinfo(0)+"]";
			show "......";
			show ".........";
			show "............";
			next;
			show "[??????]";
			show "você está tentando o proteger?";
			show "Acho que você não deve estar";
			show "entendendo o tipo de";
			show "pessoa que você realmente está tratando";
			show "aqui. vou lhe dizer o que";
			show "descobri sobre ele...";
			next;
			show "[??????]";
			show "Kiel Hyre. Diretor executivo da";
			show "fundação Kiel Hyre,";
			show "fabricante de vários";
			show "equipamentos. Sua companhia começou";
			show "como uma pequena loja em Einbroch";
			show "cuja tecnologia lentamente ficou famosa.";
			next;
			show "[??????]";
			show "A Corporação Rekenber ofereceu";
			show "uma fusão com a Fundação Kiel Hyre";
			show "Ainda não estamos certos";
			show "por que eles queriam Kiel";
			show "Hyre em particular par consertar";
			show "e desenvolver seus Guardiões...";
			next;
			show "[??????]";
			show "Também não temos certeza por que";
			show "eles queriam repentinamente";
			show "se focar mais no desenvolvimento de";
			show "Guardiões. Então repentinamente";
			show "o filho de Kiel Hyre";
			show "aparece do nada.";
			next;
			show "[??????]";
			show "É muito suspeito.";
			show "Não há registros de seu";
			show "nascimento ou nada. Ainda assim, talvez";
			show "Kiel Hyre realmente deve ter tido ele";
			show "com sua secretária, Allysia.";
			show "Bem, ninguém tem certeza.";
			next;
			show "[??????]";
			show "De qualquer forma, o filho e herdeiro";
			show "de Kiel Hyre, Kiehl, ajudou";
			show "seu pai a estabelecer essa";
			show "academia especial como sua";
			show "forma de repagar a sociedade.";
			next;
			show "[??????]";
			show "Quase todas as corporações e";
			show "organizações tentaram colocar seus";
			show "espiões dentro dessa academia,";
			show "mas todos eles foram rejeitados.";
			show "É estranho, pelo menos um";
			show "deles deveria ter conseguido.";
			next;
			show "[??????]";
			show "E recentemente, Kiehl Hyre";
			show "teve um encontro secreto com";
			show "executivos de Rekenber para anunciar";
			show "seu novo projeto. Ele pretende";
			show "criar avançados robôs humanóides";
			show "que substituirão os guardiões!";
			next;
			show "[??????]";
			show "Nossos espiões reportaram que";
			show "Kiel Hyre não foi encontrado";
			show "para aquela reunião,";
			show "assim como sua secretária";
			show "de confiança, Allysia. Ele...";
			show "Ele simplesmente desapareceu!";
			next;
			show "[??????]";
			show "Então, Kiel Hyre aparece";
			show "em sua mansão depois de todo";
			show "esse tempo como se nada tivesse";
			show "acontecido! Ao mesmo tempo,";
			show "Kiehl desaparece, com a";
			show "desculpa de conduzir pesquisas.";
			next;
			show "[??????]";
			show "Rekenber está patrocinando";
			show "ambos Kiehl e Kiel, mas";
			show "há algum conflito";
			show "acontecendo entre pai e";
			show "filho, eu simplesmente sei! Agora me";
			show "diga, o que está havendo?";
			next;
			show "[??????]";
			show "Não tenho certeza o quão bem você";
			show "conhece esse país, mas o";
			show "fato que Rekenber está envolvida";
			show "deve lhe dizer que essas não são";
			show "boas pessoas. Conte-me o que";
			show "você sabe sobre eles!";
			next;
		case 1:
			show "^3355FFVocê conta à mulher^000000";
			show "^3355FFtudo o que sabe^000000";
			show "^3355FFsobre Kiel Hyre. Sua^000000";
			show "^3355FFvoz treme de tristeza^000000";
			show "^3355FFtoda vez que menciona Elly.^000000";
			next;
			show "[??????]";
			show "Entendo, entendo...";
			show "Aquela pobre menina... Tão...";
			show "Seu envolvimento nisso";
			show "é uma coincidência? Nesse";
			show "caso, quero sua ajuda";
			show "na nossa investigação.";
			next;

			switch(select("OKay","......")) {

			case 1:
				L_Help:
				show "[??????]";
				show "Ótimo.";
				show "Sou a agente Mitchell Layla.";
				show "Daqui para frente, você está trabalhando";
				show "para a República Schwaltzvalt!";
				set KielHyreQuest,52;
				close;

			case 2:
				show "[??????]";
				show "Se você não cooperar,";
				show "então não posso garantir";
				show "sua segurança, aventureiro";
				next;
				show "["+strcharinfo(0)+"]";
				show "Huh? O quê...?";
				show "O que isso quer dizer?";
				show "você está me ameaçando?";
				next;
				menu "Apenas faça o que ela diz.",L_Help;
			}

		}

	}

	else if (KielHyreQuest == 52) {
		show "[Mitchell]";
		show "Tenho algumas informações";
		show "novas para você.";
		show "Há uma velha senhora em";
		show "Yuno que conheceu uma mulher";
		show "chamada Allysia 30 anos atrás.";
		next;
		show "[Mitchell]";
		show "A história é que essa";
		show "Allysia de 30 anos atrás";
		show "cometeu suicídio e é";
		show "idêntica à secretária de";
		show "Kiel Hyre, que também";
		show "se chama Allysia.";
		next;
		show "[Mitchell]";
		show "Isso é muita";
		show "coincidência. Quero que você";
		show "vá a Yuno e investigue.";
		show "Quando terminar, fale com";
		show "o gerente de Kiel Hyre, e";
		show "ele vai lhe trazer até mim.";
		next;
		show "[Mitchell]";
		show "Sim, eu sei.";
		show "Aquele cara na verdade";
		show "trabalha para mim. De qualquer forma,";
		show "quando estiver pronto para ir";
		show "para Yuno, me avise, e você";
		show "poderá embarcar no avião federal.";
		set KielHyreQuest,54;
		close;
	}

	else if (KielHyreQuest == 54) {
		show "[Mitchell]";
		show "Está pronto?";
		show "Vou deixá-lo embarcar";
		show "no avião federal, para que";
		show "você chegue a Yuno, e";
		show "termine sua missão rapidamente.";
		next;

		switch(select("Sim","Não")) {

		case 1:
			show "[Mitchell]";
			show "Boa sorte. Uma vez";
			show "completada sua missão,";
			show "assegure-se de reportar-se";
			show "ao gerente de Kiel Hyre para";
			show "que ele lhe traga a mim.";
			close2;
			warp "yuno",54,209;
			end;
		case 2:
			show "[Mitchell]";
			show "A vontade...";
			show "Mas tenha em mente que";
			show "não sou uma mulher paciente!";
			close;

		}

	}

	else if (KielHyreQuest == 64) {
		show "[Mitchell]";
		show "Ah, você está de volta.";
		show "O que você tem";
		show "para reportar da sua";
		show "investigação?";
		next;
		show "[Mitchell]";
		show ".....................";
		show "Ah, entendo. Bom trabalho.";
		show "Por que você não fala com Kiel";
		show "Hyle e o confronta com";
		show "o que você descobriu sobre";
		show "seu passado? Sim, tosta ele.";
		next;
		show "[Mitchell]";
		show "Use esse microfone oculto,";
		show "assim poderemos lhe ajudar se";
		show "estiver em perigo. Quero";
		show "que você descubra quem Kiel";
		show "é realmente, e qual sua";
		show "relação com Rekenber.";
		set KielHyreQuest,68;
		next;
		warp "kh_mansion",83,50;
		end;
	}


	else if (KielHyreQuest >= 68) {
		show "[Mitchell]";
		show "Você não deveria";
		show "estar partindo agora?";
		next;
		warp "kh_mansion",83,50;
		end;
	}

OnTouch:
	if (KielHyreQuest <= 50) {
		goto L_StartDialog;
	}
	end;
}

//----------------------------------------------------------------------------
// Warp portal into Kiehl's 'Room'
// - Anyone can enter
// - After 30-40 seonds this NPC should be disabled.
//----------------------------------------------------------------------------
kh_mansion,29,27,0	script	Kiehl_Room_Warp	45,2,2,{
OnTouch:
	warp "kh_kiehl01",10,31;
	end;

OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Kiehl_Room_Warp";
	end;

OnInit:
	disablenpc "Kiehl_Room_Warp";
	end;
}

//============================================================================

//============================================================================
// Rosimier NPCs and other Related NPCs
//============================================================================

//----------------------------------------------------------------------------
// Odd Grandma
//----------------------------------------------------------------------------
yuno,256,141,4	script	Vovó Estranha	846,{
	if (KielHyreQuest < 54) {
		show "[Vovó]";
		show "Aonde você vai,";
		show "meu querido? Onde";
		show "está você, meu queridinho?";
		close;
	}

	else if (KielHyreQuest == 54) {
		show "[Vovó]";
		show "Canção de ninar...";
		show "Diz boa noite...";
		show "Acalma nenenzinho...";
		show "Vá dormiiiirrrr~";
		next;

		switch(select("O que está fazendo?","Um, eu não vejo um bebê...")) {

		case 1:
			show "[Vovó]";
			show "Oh? meu bebê não para de";
			show "chorar e não parece";
			show "dormir. Ela precisa";
			show "descansar para que eu possa trabalhar.";
			show "A casa está tão bagunçada,";
			show "e o chefe tão descontente...";
			set KielHyreQuest,56;
			next;

			switch(select("Um, eu não vejo um bebê...")) {

			case 1:
				show "[Vovó]";
				//Missing text, needs another run through.
				show "Allysia...?!";
				show "Allysia, onde você";
				show "foi? Era para você";
				show "voltar para casa";
				show "há muito tempo atrás!";
				close;

			}

		case 2:
			//Missing text, needs another run through.
			show "[Vovó]";
			show "Allysia...?!";
			show "Allysia, onde você";
			show "foi? Era para você";
			show "voltar para casa";
			show "há muito tempo atrás!";
			close;

		}

	}

	else if ((KielHyreQuest >= 56) && (KielHyreQuest < 60)) {
		show "Allysia...?!";
		show "Allysia, onde você";
		show "foi? Era para você";
		show "voltar para casa";
		show "há muito tempo atrás!";

		if (countitem(7500) < 1) { 
			close;
		}

		else {
			next;

			switch(select("Allysia? ela não está...")) {

			case 1:
				cutin "kh_ellisia_port",1;
				show "^3355FFvocê mostra o retrato";
				show "de Allysia para a velha senhora.^000000";
				next;
				cutin "",255;
				show "[Vovó]";
				show "Oh, você conhece";
				show "Allysia? Ela está";
				show "desaparecida! Ela saiu de casa";
				show "ontem e ainda não";
				show "voltou! V-Você pode";
				show "me dizer onde ela está?!";
				close;
			}

		}

	}

	else if (KielHyreQuest >= 60) {
		show "[Vovó]";
		show "Não se preocupe, Allysia...";
		show "Mamãe sempre estará";
		show "aqui para você. Não precisa";
		show "ficar triste...";
		close;
	}

}

//----------------------------------------------------------------------------
// Old Lady; gives you the key to the Rosimier Mansion
//----------------------------------------------------------------------------
yuno,250,132,2	script	Velha Senhora	711,{
	if (KielHyreQuest < 56) {
		show "[Velha Senhora]";
		show "Oooh, minhas pernas e costas";
		show "estão tão doídas. Esse velhos";
		show "ossos doem todos...";
		close;
	}

	else if (KielHyreQuest == 56) {
		if (checkweight(7498,1) == 0) {
			show "^3355FF- Espere!! -";
			show "- você está carregando muitos ítens";
			show "- e não será capaz de aceitar mais. -";
			show "- Por favor disponibilize algum espaço";
			show "- no seu inventario antes de retornar. -^000000";
			close;
		}

		show "[Velha Senhora]";
		show "Deuses, eu odeio esse";
		show "tempo! Me lembra";
		show "como fiquei velha!";
		show "Resfria meus ossos, isso sim!";
		next;

		switch(select("......","Você conhece aquela Vovó?")) {

		case 1:
			show "[Velha Senhora]";
			show "Maldição! Se pelo menos eu não";
			show "tivesse tido todas aquelas aventuras";
			show "na minha juventude! Aí talvez";
			show "eu não sofresse tanto na";
			show "minha idade avançada!";
			close;

		case 2:
			show "[Velha Senhora]";
			show "Oh... Sim. Ela era";
			show "a mãe da minha melhor";
			show "amiga, ^3355FFAllysia^000000. Desde que";
			show "ela cometeu suicídio, as coisas";
			show "não têm sido as mesmas. Sua";
			show "mãe perdeu a sanidade...";
			next;

			switch(select("Era ^3355FFAllysia^000000...?")) {

			case 1:
				show "[Velha Senhora]";
				show "Oh, Allysia era uma moça";
				show "tão bonita. Tantos";
				show "homens quiseram ela, especialmente";
				show "aquele James Rosimier.";
				show "Lembro de ter ouvido que eles";
				show "iriam se casar...";
				next;
				show "[Velha Senhora]";
				show "Eu estava tão feliz por ela!";
				show "Mas então, repentinamente,";
				show "ela se matou. Bem,";
				show "isso é o que todos dizem.";
				show "Mesmo hoje, não tenho tanta";
				show "certeza do que aconteceu.";
				next;

				switch(select("Espere, quem é James Rosimier?")) {

				case 1:
					show "[Velha Senhora]";
					show "Oh, James pertencia a ";
					show "uma das famílias mais antigas";
					show "e ricas em Yuno. Tudo";
					show "estava indo bem para eles, mas";
					show "algum tempo depois que Allysia morreu,";
					show "a família foi a falência.";
					next;
					show "[Velha Senhora]";
					show "A cidade gerencia a";
					show "velha residência deles agora. Por";
					show "alguma razão, eles decidiram";
					show "me confiar a chave mestra";
					show "da Mansão Rosimier.";
					next;

					switch(select("Pode me emprestar essa Chave Mestra?")) { 

					case 1:
						show "[Velha Senhora]";
						show "Bem, não é para eu realmente";
						show "entregar ela para simplesmente";
						show "qualquer um, mas posso dizer que";
						show "você está trabalhando com Allysia";
						show "com os melhores interesses no coração.";
						next;
						show "[Velha Senhora]";
						show "Entretanto, você tem de";
						show "assegurar-se de trazê-la de volta";
						show "para mim antes que o pessoal da";
						show "prefeitura me pergunte por ela.";
						show "Muito bem então, espero que você ache";
						show "o que está procurando.";
						set KielHyreQuest,58;
						additem 7498,1; //Losimier's_House_Key
						close;
					}

				}

			}

		}

	}

	else if ((KielHyreQuest == 58) &&
		(countitem(7499) < 1) || 
		(countitem(7500) < 1) || 
		(countitem(7501) < 1) || 
		(countitem(7502) < 1)) {
		show "[Velha Senhora]";
		show "Por favor depressa. Encontre";
		show "o que quer que esteja procurando";
		show "na Mansão Rosimier.";
		show "Posso arrumar problemas se";
		show "o pessoal da prefeitura";
		show "vier e me perguntar pela chave...";
		close;
	}

	else if ((KielHyreQuest == 58) &&
		(countitem(7499) == 1) && 
		(countitem(7500) == 1) && 
		(countitem(7501) == 1) && 
		(countitem(7502) == 1)) {
		show "[Velha Senhora]";
		show "Oh você acabou sua";
		show "busca na mansão?";
		show "Deprimente não é?";
		show "Os credores basicamente";
		show "pilharam tudo";
		show "há muito tempo atrás.";
		next;

		switch(select("Por que ^3355FFAllysia^000000...?")) {

		case 1:
			show "[Velha Senhora]";
			show "Bem, eu sabia que aquele James";
			show "e Allysia estavam apaixonados,";
			show "e ele prometeu casar com";
			show "ela. Agora, supostamente sua";
			show "família já o tinha noivado";
			show "com outra mulher.";
			next;
			show "[Velha Senhora]";
			show "O tempo passou, e ele";
			show "foi forçado a cassar com sua";
			show "noiva. Allysia era devastadoramente";
			show "linda. Acho que talvez";
			show "por isso ela... você sabe...";
			next;
			show "[Velha Senhora]";
			show "Escute, se você quiser saber";
			show "mais sobre o que aconteceu,";
			show "então acho que você deveria falar";
			show "com o ^3355FFpescador que vive^000000";
			show "^3355FFao sul da Academia Kiel Hyre.^000000";
			next;
			show "[Velha Senhora]";
			show "Ele é quem encontrou";
			show "o corpo de Allysia no rio,";
			show "em tão ele pode ter uma melhor";
			show "idéia do que aconteceu.";
			set KielHyreQuest,60;
			delitem 7498,1; //Losimier's_House_Key 
			close;

		}

	}

	else if (KielHyreQuest >= 60) {
		show "[Velha Senhora]";
		show "Sim, A chuva está vindo.";
		show "Posso sentir nos meus ossos.";
		close;
	}

}


//----------------------------------------------------------------------------
// Warp portal into Rosimier Mansion
//----------------------------------------------------------------------------
yuno,273,141,0	script	Rosimmir_Entrance	45,2,2,{
OnTouch:
	if (countitem(7498) < 1)
		warp "yuno",270,141;
	else 
		warp "kh_rossi",20,92;
	end;
}

//----------------------------------------------------------------------------
// Rosimier Mansion, first floor; Table
//----------------------------------------------------------------------------
kh_rossi,23,23,0	script	Mesa	111,{
	if (countitem(7499) < 1) {
		if (checkweight(7499,1) == 0) {
			show "^3355FF- Espere!! -";
			show "- Você está carregando muitos ítens";
			show "- e não será capaz de aceitar mais. -";
			show "- Por favor disponibiliza algum espaço";
			show "- no seu inventario antes de retornar. -^000000";
			close;
		}

		cutin "kh_family_port",1;
		show "^3355FFvocê examina a mesa,^000000";
		show "^3355FFe encontra um porta retratos^000000";
		show "^3355FFdentro da gaveta aberta.^000000";
		additem 7499,1; //Portrait_of_a_Family
	}

	else {
		show "^3355FFA gaveta aberta dessa^000000";
		show "^3355FFmesa está vazia agora.^000000";
	}

	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// Rosimier Mansion, first floor; Shelf
//----------------------------------------------------------------------------
kh_rossi,92,40,0	script	Estante::ShelfKHQ1	111,{
	if (countitem(7500) < 1) {
		if (checkweight(7500,1) == 0) {
			show "^3355FF- Espere!! -";
			show "- Você está carregando muitos ítens";
			show "- e não será capaz de aceitar mais. -";
			show "- Por favor disponibiliza algum espaço";
			show "- no seu inventario antes de retornar. -^000000";
			close;
		}

		show "^3355FFHá caixas trancadas^000000";
		show "^3355FFnessas prateleiras..^000000";
		show "^3355FFTalvez se você usar essa^000000";
		show "^3355FFchave mestra da mansão, você^000000";
		show "^3355FFpode conseguir abrí-las.^000000";
		next;

		switch(select("Usar Chave","Passar")) {

		case 1:
			show "^3355FFQual caixa você^000000";
			show "^3355FFquer tentar abrir?^000000";
			next;

			switch(select("Primeira caixa","Segunda Caixa")) {

			case 1:
				show "^3355FFvocê usa a chave Mestra para^000000";
				show "^3355FFdestrancar a caixa, e obtem^000000";
				show "^3355FFum retrato de uma mulher que^000000";
				show "^3355FFse parece com a assistente de^000000";
				show "^3355FFKiel Hyre, Allysia.^000000";
				next;
				cutin "kh_ellisia_port",2;
				show "^3355FFA mensagem, ''Para meu amor,^000000";
				show "^3355FFAllysia. De James.'' está^000000";
				show "^3355FFescrita nas costas.^000000";
				additem 7500,1; //Portrait_of_a_Lady
				close2;
				cutin "",255;
				end;

			case 2:
				show "^3355FFEssa caixa está vazia.^000000";
				close;

			}

		case 2:
			show "^3355FFEssa caixa está vazia.^000000";
			close;

		}

	}

	else {
		show "^3355FFVocê encontrou um retrato^000000";
		show "^3355FFde uma mulher em uma das^000000";
		show "^3355FFcaixas nessa prateleira.^000000";
		close;
	}

}


//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Desk
//----------------------------------------------------------------------------
kh_rossi,144,287,0	script	Mesa::DeskKHQ2	111,{
	if (checkweight(7501,1) == 0) {
		show "^3355FF- Espere!! -";
		show "- Você está carregando muitos itens";
		show "- e não será capaz de aceitar mais. -";
		show "- Por favor disponibiliza algum espaço";
		show "- no seu inventario antes de retornar. -^000000";
		close;
	}

	show "^3355FFA mesa tem^000000";
	show "^3355FFtrês gavetas^000000";
	next;

	switch(select("Primeira Gaveta","Segunda Gaveta","Terceira Gaveta","Cancelar;")) {

	case 1:
		show "^3355FFA primeira gaveta está trancada.^000000";
		close;

	case 2:
		if (countitem(7501) < 1) {
			show "^3355FFHá uma carta dentro^000000";
			show "^3355FFdessa segunda gaveta. Foi^000000";
			show "^3355FFenviada por uma pessoa^000000";
			show "^3355FFcom as iniciais, K.H.,^000000";
			show "^3355FFe endereçada à Allysia.^000000";
			additem 7501,1; //K.H's_Letter
			close;
		}

		else {
			show "^3355FFEssa gaveta está vazia.^000000";
			close;

		}

	case 3:
		show "^3355FFHá um pequeno bilhete^000000";
		show "^3355FFdentro dessa terceira gaveta.^000000";
		show "^3355FFFoi escrito por James, e^000000";
		show "^3355FFmenciona que ele quer se^000000";
		show "^3355FFcasar com Allysia, e ela^000000";
		show "^3355FFrecebeu um anel de noivado.^000000";
		close;

	case 4:
		show "......";
		show ".........";
		show "............";
		close;

	}

}

//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Bookshelf
//----------------------------------------------------------------------------
kh_rossi,149,288,0	script	Estante::BookshelfKHQ2	111,{
	if (countitem(7502) < 1) {
		if (checkweight(7502,1) == 0) {
			show "^3355FF- Espere!! -";
			show "- Você está carregando muitos itens";
			show "- e não será capaz de aceitar mais. -";
			show "- Por favor disponibiliza algum espaço";
			show "- no seu inventario antes de retornar. -^000000";
			close;
		}

		show "^3355FFVocYe encontra uma estante^000000";
		show "^3355FFempoeirada cheia de^000000";
		show "^3355FFvários livros. Você^000000";
		show "^3355FFencontra um bilhete dobrado entre^000000";
		show "^3355FFos livros enquanto os examina.^000000";
		additem 7502,1; //James's_Memo
		close;
	}

	else {
		show "^3355FFvocê encontrou uma estante^000000";
		show "^3355FFempoeirada cheia de^000000";
		show "^3355FFvários livros.^000000";
		close;
	}

}

//----------------------------------------------------------------------------
// Fisherman
//----------------------------------------------------------------------------
yuno_fild12,232,222,0	script	Velho Pescador#1	709,{
	if (KielHyreQuest < 60) {
		show "[Pescador]";
		show "Esses dias, é tão mais";
		show "difícil caçar e pescar.";
		show "Desde que eles construíram";
		show "essa fábrica, os peixes";
		show "começaram a mudar,";
		show "e parecem diferentes também...";
		close;
	}

	else if (KielHyreQuest == 60) {
		show "[Pescador]";
		show "Eh? Você quer algo?";
		show "Heh, jovens! Eu sei";
		show "o quanto vocês adoram esmolas,";
		show "mas você não vai ter nenhuma.";
		show "Agora me traga algum";
		show "peixe cru, e eu serei mais amigável~";

		if (countitem(544) >= 10)  {
			next;
			show "[Pescador]";
			show "Oh, todos esses peixes";
			show "para mim? Heh, que";
			show "generosidade a sua. Se você vai";
			show "ser tão generoso, então";
			show "eu suponho que eu deva lhe pagar";
			show "o favor. Pergunte-me qualquer coisa~";
			next;

			switch(select("30 anos atrás, uma mulher se matou...")) {

			case 1:
				show "[Pescador]";
				show "Oh? Ohh. Oh sim.";
				show "Eu me lembro disso. Sim.";
				show "Foi em 20 de Agosto, no";
				show "aniversário da minha esposa. Aquele dia,";
				show "ao invés de pegar peixes,";
				show "eu peguei uma mulher morta.";
				next;
				show "[Pescador]";
				show "Claro, eu reportei à";
				show "polícia de Yuno. Eles me disseram";
				show "que ela se matou já que";
				show "tinha sido traída por seu amante,";
				show "que por acaso era também seu";
				show "empregador. Coisa realmente trágica.";
				next;
				show "[Pescador]";
				show "Ainda assim, quanto estávamos";
				show "retirando o seu corpo do";
				show "rio, sua mão deixou cair";
				show "um anel. Eu peguei,";
				show "esperando vendê-lo mais tarde por";
				show "algum zeny. Eu sei, eu sei...";
				next;
				show "[Pescador]";
				show "Tive muita sorte que a";
				show "policia não me viu pegá-lo";
				show "Mais tarde naquele dia, um cara";
				show "veio e me ofereceu";
				show "uma bolada por ele.";
				show "Acho que foi meu dia de sorte!";
				next;
				show "[Pescador]";
				show "Descobri mais tarde que ele era";
				show "algum tipo de engenheiro mecânico--";
				show "ou algo assim. ele vendeu tudo";
				show "para comprar aquele anel, então acho";
				show "que o queria desesperadamente.";
				show "Então ele simplesmente desapareceu.";
				next;
				show "[Pescador]";
				show "O nome dele...?";
				show "Era algo parecido com...";
				show "Heil? Hyre? De qualquer forma, foi";
				show "há muito tempo atrás. Oh,";
				show "sua velha casa ainda está por aí.";
				next;
				show "[Pescador]";
				show "Se você for bem";
				show "curioso, você pode até";
				show "dar uma checada também.";
				show "Vejamos, ele viveu em";
				show "uma cabana próximo ao acampamento";
				show "noroeste da guarda florestal.";
				delitem 544,10; //Fish_Slice
				set KielHyreQuest,62;
				close;
			}

		}

		else {
			close;
		}

	}

	else if (KielHyreQuest >= 62) {
		show "[Pescador]";
		show "Você não se lembra";
		show "o que eu lhe disse? Aquele";
		show "cara vivia numa cabana próximo";
		show "ao acampamento noroeste";
		show "da guarda florestal, Por que";
		show "você não dá uma checada lá?";
		close;
	}

}

//----------------------------------------------------------------------------
// Kiel Hyre's hut; Wooden Board
//----------------------------------------------------------------------------
yuno_fild09,158,217,0	script	Placa de Madeira#1	111,{
	if ((KielHyreQuest < 62) || (KielHyreQuest >= 64)) {
		show "^3355FFÉ uma inútil^000000";
		show "^3355FFplaca de madeira^000000";
		show "^3355FFnos arbustos.^000000";
		close;
	}

	else if (KielHyreQuest == 62) {
		if (checkweight(7503,1) == 0) {
			show "^3355FF- Espere!! -";
			show "- Você está carregando muitos itens";
			show "- e não será capaz de aceitar mais. -";
			show "- Por favor disponibiliza algum espaço";
			show "- no seu inventario antes de retornar. -^000000";
			close;
		}

		show "^000oFFVocê encontrou uma grande^000000";
		show "^3355FFplaca de madeira encravada^000000";
		show "^3355FFcom as iniciais, 'K.H.'^000000";
		next;
		cutin "kh_kyel_port",2;
		show "^3355FFVocê encontrou o retrato de^000000";
		show "^3355FFum jovem, que se parece^000000";
		show "^3355FFcom uma versão mais nova^000000";
		show "^3355FFde Kiel Hyre, em um porta^000000";
		show "^3355FFretratos quebrado debaixo^000000";
		show "^3355FFda placa de madeira.^000000";
		set KielHyreQuest,64;
		additem 7503,1;	//Portrait_of_a_Guy
		next;
		cutin "",255;
		show "^3355FFVocê tem informação^000000";
		show "^3355FFsuficiente agora,^000000";
		show "^3355FFentão você deveria se^000000";
		show "^3355FFreportar à Mitchell.^000000";
		close;
	}

}

//============================================================================
// Kiehl Hyre's Room and Boss NPCs
//============================================================================
// Beyond here the NPC for the final areas.
// Now, this area is not someplace you wanna slow down so
// you can pick up dialog. I used packet logging to pull
// what I could and for the sake of the two people with me,
// did not bother doing all the proper proper NPC positioning
// or some of the 'error/wrong option' dialogs.
// All the doors are kind of weird.
//============================================================================

//----------------------------------------------------------------------------
// Kiehl's Room; Receiver (Gives black keycards upon killing mobs)
//----------------------------------------------------------------------------
kh_kiehl01,17,39,0	script	Receptor	111,{
	if (.KHKilled < 1) {
		show "^333333*BBBZZZ*^000000";
		if (KielHyreQuest == 74) {
			next;
			show "[????]";
			show "^333333*Bzzzz...*";
			show "Eu nunca te vi";
			show "antes. Foi papai que mandou";
			show "você para me matar? Veremos";
			show "sobre isso! Vá em frente,";
			show "tente me encontrar, aventureiro.^000000.";
			set KielHyreQuest,76;
		}
		close2;
		set .KHKilled,2;
		monster "kh_kiehl01",16,32,"Alicel",1739,1,"Receptor::OnMyMobDead";
		monster "kh_kiehl01",18,31,"Aliot",1740,1,"Receptor::OnMyMobDead";
		end;
	}

	else {
		end;
	}

OnMyMobDead:
	set .KHKilled,.KHKilled-1;
	if (.KHKilled < 1) { 
		makeitem 7506,1,"this",19,36; 
		set .KHKilled,0;
	}
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Flower Vase (Gives...password...for Box)
//----------------------------------------------------------------------------
kh_kiehl01,13,40,0	script	Vaso de Flores	111,{
	if (KielHyreQuest < 74) {
		show "^3355FFVocê encontrou";
		show "um vaso de flores.^000000";
		close;
	}

	if (KielHyreQuest >= 74) {
		show "^3355FFvocê encontrou";
		show "um vaso de flores.^000000";
		next;

		switch(select("Pegar o Vaso","Quebrar o Vaso","Virar o vaso de ponta cabeça")) {

		case 1:
			show "^3355FFO vaso está vazio.^000000";
			close;

		case 2:
			show "^3355FFVocê não pode destruir";
			show "esse vaso, mesmo";
			show "batendo com toda a sua";
			show "força. Deve ter sido";
			show "especialmente fabricado pela";
			show "Corporação Rekenber.^000000";
			close;

		case 3:
			show "^3355FFAs seguintes palavras";
			show "estão escritas no";
			show "fundo do vaso.^000000";
			next;
			show "[Mensagem do Vaso]";
			show "''O coelho frequentemente";
			show "observa a porta";
			show "A noite come a";
			show "laranja azeda.''";
			close;

		}

	}

}


//----------------------------------------------------------------------------
// Kiehl's Room; Box
//----------------------------------------------------------------------------
kh_kiehl01,19,25,0	script	Baú::BoxKHQ3	111,{
	if (countitem(7505) < 1) {
		if (checkweight(7505,1) == 0) {
			show "^3355FF- Espere!! -";
			show "- Você está carregando muitos itens";
			show "- e não será capaz de aceitar mais. -";
			show "- Por favor disponibiliza algum espaço";
			show "- no seu inventario antes de retornar. -^000000";
			close;
		}

		show "^3355FFVocê encontrou um baú";
		show "com um botão para cada letra";
		show "do alfabeto sobre ela.^000000";
		next;
		digit @KHInput$;
		if (@KHInput$ == "ABRA A PORTA") {
			show "^3355FFAssim que você entra";
			show "a senha, a porta próxima";
			show "emite um barulho agradável";
			show "e o baú se abre";
			show "para revelar uma pequena chave.^000000";
			additem 7505,1; //Toy_Key
			close;
		}

		else {
			show "^3355FFNada aconteceu.^000000";
			close;
		}

	}

	else {
		show "^3355FFAqui é onde você";
		show "encontrou a chave de brinquedo^000000";
		close;
	}

}

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (First)
// - Anyone can pass through this door
// - Consume one Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,44,33,0	script	Grande Porta#BigDoorKHQ1	111,{
	if (.KHDoor1Opened == 0) {
		show "^3355FFA porta está trancada,";
		show "mas há um slot estreito";
		show "perto da maçaneta.^000000";
		next;
		digit @KHInput$;
		if (@KHInput$ == "Cartão de Acesso Preto") {
			if (countitem(7506) >= 1) {
				show "^3355FFVocê insere o";
				show "Cartão de Acesso Preto no";
				show "slot, e bem sucedidamente";
				show "destranca e abre a porta.^000000";
				delitem 7506,1; //Black_Keycard
				donpcevent "Big_Door_1_Warp::OnEnable";
				enablenpc "Big_Door_1_Warp";
				set .KHDoor1Opened,1;
				close;
			}

		}

		show "^3355FFvocê tenta empurrar a";
		show "porta com toda a";
		show "sua força, mas falha";
		show "em fazê-la se mover.^000000";
		close;
	}

	else {
		show "^3355FFA porta está aberta.^000000";
		close;
	}

}

kh_kiehl01,43,33,0	script	Big_Door_1_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnInit:
	disablenpc "Big_Door_1_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_1_Warp";
	set getvariableofnpc(.KHDoor1Opened,"Grande Porta#BigDoorKHQ1"),0;
	end;

OnTouch:
	warp "kh_kiehl01",55,33;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (second)
// - Consume Toy Key when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,174,40,0	script	Grande Porta#BigDoorKHQ2	111,{
	if (.KHDoor2Opened == 0) {
		show "^3355FFA porta está trancada,";
		show "mas há uma pequena";
		show "fechadura próxima à maçaneta.^000000";
		next;
		digit @KHInput$;
		if (@KHInput$ == "Chave de Brinquedo") {
			if (countitem(7505) >= 1) {
				show "^3355FFVocê insere a chave na";
				show "fechadura, e a porta";
				show "se destranca assim que";
				show "você gira a chave.^000000";
				delitem 7505,1; //Toy_Key
				donpcevent "Big_Door_2_Warp::OnEnable";
				enablenpc "Big_Door_2_Warp";
				set .KHDoor2Opened,1;
				close;
			}

		}

		show "^3355FFVocê tenta empurrar a";
		show "porta com toda a sua";
		show "força mas falha em";
		show "fazê-la se mover.^000000";
		close;
	}


	else {
		show "^3355FFA porta está aberta.^000000";
		close;
	}

}

kh_kiehl01,174,39,0	script	Big_Door_2_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnInit:
	disablenpc "Big_Door_2_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_2_Warp";
	set getvariableofnpc(.KHDoor2Opened,"Grande Porta#BigDoorKHQ2"),0;
	end;

OnTouch:
	warp "kh_kiehl01",173,52;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (Third)
// - Consume one Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,77,108,0	script	Grande Porta#BigDoorKHQ3	111,{
	if (.KHDoor3Opened == 0) {
		show "^3355FFA porta está trancada,";
		show "mas há um slot estreito";
		show "próximo à maçaneta.^000000";
		next;
		digit @KHInput$;
		if (@KHInput$ == "Cartão de Acesso Preto") {
			if (countitem(7506) >= 1) {
				show "^3355FFvocê insere o";
				show "Cartão de Acesso Preto no";
				show "slot, e bem sucedidamente";
				show "destranca e abre a porta.^000000";
				delitem 7506,1; //Black_Keycard
				donpcevent "Big_Door_3_Warp::OnEnable";
				enablenpc "Big_Door_3_Warp";
				set .KHDoor3Opened,1;
				close;
			}

		}

		show "^3355FFVocê tenta empurar a";
		show "porta com toda a sua";
		show "força, mas falha em";
		show "fazê-la se mover.^000000";
		close;
	}

	else {
		show "^3355FFA porta está aberta.^000000";
		close;
	}

}

kh_kiehl01,78,108,0	script	Big_Door_3_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnInit:
	disablenpc "Big_Door_3_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_3_Warp";
	set getvariableofnpc(.KHDoor3Opened,"Grande Porta#BigDoorKHQ3"),0;
	end;

OnTouch:
	warp "kh_kiehl01",68,108;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (Fourth)
// - Consume TWO Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,42,177,0	script	Grande Porta#BigDoorKHQ4	111,{
	if (.KHDoor4Opened == 0) {
		show "^3355FFA porta está trancada,";
		show "mas há um slot estreito";
		show "próximo à maçaneta.^000000";
		next;
		digit @KHInput$;
		if (@KHInput$ == "Cartão de Acesso Preto") {
			if (countitem(7506) >= 2) {
				show "^3355FFVocê inseriu o";
				show "Cartão de Acesso Preto no";
				show "slot, e bem sucedidamente";
				show "destrancou e abriu a porta.^000000";
				delitem 7506,2; //Black_Keycard
				donpcevent "Big_Door_4_Warp::OnEnable";
				enablenpc "Big_Door_4_Warp";
				set .KHDoor4Opened,1;
				close;
			}
		}

		show "^3355FFVocê tenta empurar a";
		show "porta com toda a sua";
		show "força, mas falha em";
		show "fazê-la se mover.^000000";
		close;
	}


	else {
		show "^3355FFA porta está aberta.^000000";
		close;
	}

}

kh_kiehl01,41,177,0	script	Big_Door_4_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnInit:
	disablenpc "Big_Door_4_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_4_Warp";
	set getvariableofnpc(.KHDoor4Opened,"Grande Porta#BigDoorKHQ4"),0;
	end;

OnTouch:
	warp "kh_kiehl01",49,177;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Robots
//----------------------------------------------------------------------------
kh_kiehl01,15,179,0	script	Robôs#kh1	111,{
	if (.KHKilled < 1) {
		show "^3355FFAssim que você";
		show "toca o tubo de testes,";
		show "um monte de robôs";
		show "repentinamente aparecem.^000000.";
		close2;
		set .KHKilled,4;
		monster "kh_kiehl01",18,181,"Aliot",1740,1,"Robôs#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,180,"Alicel",1739,1,"Robôs#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,179,"Aliot",1740,1,"Robôs#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,178,"Alicel",1739,1,"Robôs#kh1::OnMyMobDead";
		end;
	}

	else  {
		end;
	}

OnMyMobDead:
	set .KHKilled,.KHKilled-1;
	if (.KHKilled < 1) { 
		makeitem 7506,1,"this",18,180;
		set .KHKilled,0;
	}
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Dummy Robots
//----------------------------------------------------------------------------
kh_kiehl01,15,177,0	script	Robôs#kh2::RobotsKHQ	111,{
	end;
}
kh_kiehl01,15,180,0	duplicate(RobotsKHQ)	Robôs#kh3	111
kh_kiehl01,15,182,0	duplicate(RobotsKHQ)	Robôs#kh4	111
kh_kiehl01,35,187,0	duplicate(RobotsKHQ)	Robôs#kh5	111
kh_kiehl01,37,187,0	duplicate(RobotsKHQ)	Robôs#kh6	111
kh_kiehl01,39,187,0	duplicate(RobotsKHQ)	Robôs#kh7	111
kh_kiehl01,41,187,0	duplicate(RobotsKHQ)	Robôs#kh8	111

//----------------------------------------------------------------------------
// Kiehl's Room; Big Door, (Fifth, and final)
// - Anyone can pass through this door
// - Consumes 4 Solid Iron Pieces
//----------------------------------------------------------------------------
kh_kiehl01,166,187,0	script	Grande Porta#BigDoorKHQ5	111,{
	if (($@KHQuestBusy == 0) && (KielHyreQuest >= 74) && (KielHyreQuest <= 106)) {
		if (KielHyreQuest < 86) {
			show "^3355FFEssa porta larga..";
			show "está só encostada.";
			show "Se você ouvir atentamente,";
			show "poderá ouvir a porta";
			show "ranger bem baixinho.^000000";
			next;
			select("Empurrar a Porta","Chutar a Porta","Balançar a Porta","Puxar a Porta","Levantar a Porta");
			show "^3355FFUm grupo de monstros";
			show "aparecem repentinamente assim";
			show "que você aplicou";
			show "pressão na porta.";
			show "Isso deve ser algum";
			show "tipo de dispositivo de segurança.^000000";
			close2;
			set @KHDoorPushAttempt,@KHDoorPushAttempt+1;
			monster "kh_kiehl01",163,183,"Alicel",1739,1;
			monster "kh_kiehl01",163,179,"Aliot",1740,1;
			monster "kh_kiehl01",169,183,"Alicel",1739,1;
			monster "kh_kiehl01",169,179,"Aliot",1740,1;
			if (@KHDoorPushAttempt >= 3) { 
				set KielHyreQuest,86; 
			}
			end;
		}

		else if ((KielHyreQuest > 84) && (KielHyreQuest < 94)) {
			show "^3355FFVocê aplica alguma";
			show "pressão sobre a porta,";
			show "e descobre que você pode";
			show "movê-la lentamente, mas";
			show "não pode abrí-la totalmente.^000000";
			next;
			show "^3355FFSe você segurasse algo";
			show "na fresta entre a porta";
			show "e o batente, e";
			show "conseguisse alavancar, então você";
			show "pode ser capaz de abrí-la.^000000";
			next;

			switch(select("Aço","Ferro Enferrujado","Pedaço de Ferro Sólido","Pedaço de Ferro","Parafuso","Cancelar")) {

			case 1:
				set @KHPryingItem$,"Aço";
				break;

			case 2:
				set @KHPryingItem$,"Ferro Enferrujado";
				break;

			case 3:
				if (countitem(7507) >= 1) {
					if (KielHyreQuest < 92) {
						show "^3355FFvocê insere uma ponta de";
						show "um pedaço de ferro sólido na";
						show "fresta da porta num resistente";
						show "esforço de fazer com que a porta abra";
						show "A fresta aumenta um pouco mais,";
						show "no entanto você quebra um de seus";
						show "Pedaços de Ferro Sólido.^000000";
						set KielHyreQuest,KielHyreQuest+2;
						delitem 7507,1; //Hard_Piece_of_Steel
						close;
					}

					else if (KielHyreQuest == 92) {
						show "^3355FFCom um empurrão forte,";
						show "você coloca um Pedaço de Ferro";
						show "Sólido no batente da porta,";
						show "fazendo com que a porta se abra";
						show "Incapaz de resistir à";
						show "extrema força, esse Pedaço";
						show "de Ferro Sólido fica em farelos.^000000";
						set KielHyreQuest,94;
						delitem 7507,1; //Hard_Piece_of_Steel
						close;
					}

				}

				else {
					show "^3355FFSe ao menos você tivesse um Pedaço";
					show "de Ferro Sólido você poderia usar para";
					show "tentar abrir essa porta.^000000";
					close;
				}

			case 4:
				set @KHPryingItem$,"Pedaço de Ferro";
				break;

			case 5:
				set @KHPryingItem$,"Parafuso";
				break;

			case 6:
				show "^3355FFVamos procurar por algo";
				show "pesado que possamos usar para";
				show "abrir essa porta.^000000";
				close;

			}

			show "^3355FFEsse "+@KHPryingItem$+" é muito";
			show "fraco para o que você está usando";
			show "e se quebra.^000000";
			close;

		}

		else if ((KielHyreQuest >= 94) && (KielHyreQuest <= 104)) {
			if (.KHDoor5Opened == 0) {
				show "^3355FFA porta larga";
				show "está totalmente aberta, e.";
				show "você pode entrar agora.^000000";
				next;

				switch(select("Sim","Não")) {

				case 1:
					close2;
					donpcevent "Big_Door_5_Warp::OnEnable";
					enablenpc "Big_Door_5_Warp";
					set .KHDoor5Opened,1;
					end;

				case 2:
					show "^3355FFQuem sabe o que tem";
					show "do outro lado dessa porta. Vamos";
					show "pensar sobre isso antes de ir entrando..^000000";
					close;

				}
			}

			else {
				show "^3355FFA porta está aberta.^000000";
				close;
			}

		}

		else {
			show "^3355FFEsta porta larga..";
			show "está encostada.";
			show "Se você ouvir atentamente,";
			show "você pode ouvir a porta";
			show "ranger bem baixinho.^000000";
			close;
		}

	}

	else {
		show "^3355FFEsta porta larga..";
		show "está encostada.";
		show "Se você ouvir atentamente,";
		show "você pode ouvir a porta";
		show "ranger bem baixinho.^000000";
		close;
	}

}

kh_kiehl01,166,186,0	script	Big_Door_5_Warp	45,1,1,{
	end;

OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_5_Warp";
	set getvariableofnpc(.KHDoor5Opened,"Grande Porta#BigDoorKHQ5"),0;
	end;

OnInit:
	disablenpc "Big_Door_5_Warp";
	end;

OnTouch:

	if (KielHyreQuest >= 46)
		warp "kh_kiehl02",50,6;
	else
		warp "kh_kiehl01",166,183;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Kiehl_Room_Trap (Entry way trap)
//----------------------------------------------------------------------------
kh_kiehl02,49,10,0	script	Kiehl_Room_Trap	-1,5,3,{
	end;

OnTouch:
	if (.KHTrapSprung < 1) {
		set .KHTrapSprung,1;
		set $@KHQuestBusy,1;
		initnpctimer;
		monster "kh_kiehl02",47,13,"Aliot",1740,1;
		monster "kh_kiehl02",54,13,"Alicel",1739,1;
		monster "kh_kiehl02",49,13,"Constant",1745,1;
		monster "kh_kiehl02",51,13,"Aliot",1740,1;
		monster "kh_kiehl02",53,13,"Alicel",1739,1;
		monster "kh_kiehl02",49,13,"Constant",1745,1;
	}
	end;


OnTimer300000:
OnTimer600000:
OnTimer900000:
	if (getmapusers("kh_kiehl02") == 0) {
		donpcevent "KiehlRoom::OnReset";
		stopnpctimer;
	}
	end;

OnTimer1200000:
	donpcevent "KiehlRoom::OnReset";
	stopnpctimer;
	end;

OnGlobalTimerOff:
	stopnpctimer;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Kiehl
// - Timer will drop to 3 minutes once Kiehl is defeated.
//----------------------------------------------------------------------------
kh_kiehl02,50,52,4	script	Kiehl#Original	902,{
	set @now_weight,MaxWeight-Weight;
	if (@now_weight < 2000) {
		show "^3355FF- Espere!! -";
		show "- Você está carregando muitos ítens";
		show "- e não será capaz de aceitar mais. -";
		show "- Por favor libere algum espaço";
		show "- no seu inventario antes de retornar. -^000000";
		close;
	}

	cutin "kh_kiel01",2;
	if ((KielHyreQuest < 94) || (KielHyreQuest >= 106)) {
		show "[Kiehl]";
		show ".........";
		close2;
		cutin "",255;
		close;
	}

	if ((KielHyreQuest == 94) && (getvariableofnpc(.KHKilled,"KiehlRoom") < 5)) {
		show "[Kiehl]";
		show "Estou surpreso que tenha chegado";
		show "tão longe, aventureiro~";
		show "Lhe ofereço as boas vindas ao meu";
		show "humilde quarto. Acredito que";
		show "tenha vindo pelo Pergaminho de";
		show "Memória Condensada... minha mente.";
		next;
		show "[Kiehl]";
		show "Você pode entender";
		show "porque não posso deixá-lo o ter,";
		show "então se você realmente quer o";
		show "Pergaminho de Memória Condensada,";
		show "mostre-me do que é capaz!";
		close2;
		cutin "",255;
		set getvariableofnpc(.KHKilled,"KiehlRoom"),0;
		monster "kh_kiehl02",49,48,"Aliot",1740,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",46,50,"Alicel",1739,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",49,50,"Constant",1745,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",53,53,"Aliot",1740,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",49,55,"Alicel",1739,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",49,53,"Constant",1745,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",46,53,"Aliot",1740,1,"KiehlRoom::OnKiehlMobDead";
		donpcevent "Kiehl#Original::OnChangeState";
		disablenpc "Kiehl#Original";
		end;
	}

	else if ((KielHyreQuest == 94) && (getvariableofnpc(.KHKilled,"KiehlRoom") >= 5)) {
		cutin "kh_kiel03",2;
		show "[Kiehl]";
		show "Hmpf! Você é muito bom.";
		show "Papai deve ter gasto";
		show "muito dinheiro para lhe contratar";
		show "Então ele lhe enviou";
		show "para me matar?";
		next;
		show "["+strcharinfo(0)+"]";
		show "Kiel Hyre me enviou para lhe pedir";
		show "para parar de tornar toda a";
		show "Terceira Geração de Robôs";
		show "em máquinas mortíferas! Como";
		show "pode fazer algo assim";
		show "a outros robôs como você?";
		next;
		cutin "kh_kiel01",2;
		show "[Kiehl]";
		show "Por que não? Foi dito que o homem";
		show "foi criado à imagem de Deus.";
		show "Bem, robôs foram feitos à";
		show "imagem do homem. Vocês humanos matam";
		show "uns aos outros tanto quanto";
		show "podem, até onde eu sei.";
		next;
		show "[Kiehl]";
		show "Pode não ser ético";
		show "para eu prover armas";
		show "para humanos que precisam delas...";
		show "Mas o que elas são?";
		show "Armas. É mais humano";
		show "para robôs lutarem que humanos.";
		next;
		show "[Kiehl]";
		show "Robôs não sentem naturalmente";
		show "dor ou emoções.";
		show "Não até que são especialmente";
		show "programados. Desculpe mas não";
		show "planejo parar o que estou fazendo.";
		next;
		cutin "kh_kiel04",2;
		show "["+strcharinfo(0)+"]";
		show "Humanidade pode não ser";
		show "perfeita, mas pense";
		show "com quem você está trabalhando!";
		show "Rekenber é o resumo do";
		show "mal humano! Como você pode";
		show "ajudá-los assim?";
		next;
		cutin "kh_kiel02",2;
		show "[Kiehl]";
		show "Tive um grande relacionamento";
		show "com Rekenber. Estou totalmente ciente";
		show "de suas capacidades. Você";
		show "lembra do primeiro quarto que";
		show "passou à caminho daqui, o";
		show "que tinha todos os brinquedos?";
		next;
		show "[Kiehl]";
		show "Aposto que não sabia que lá";
		show "estava 5 robôs da Segunda";
		show "Geração. Eu e meus quatro outros";
		show "irmãos e irmãs. Papai";
		show "construiu aquele quarto para que todos";
		show "os cinco pudessem viver juntos.";
		next;
		cutin "kh_kiel03",2;
		show "[Kiehl]";
		show "Eu sou o único que";
		show "sobreviveu. Eu retornei para";
		show "papai e até consegui um";
		show "nome. Mas sim, eu sei";
		show "o quão ruim Rekenber é realmente.";
		next;
		show "[Kiehl]";
		show "Eu não... Eu não quero";
		show "falar sobre isso mais";
		show "Você me deixou... Apenas saia.";
		show "Acho que vou deixá-lo viver.";
		next;
		cutin "",255;
		show "[Mitchell]";
		show "Parado!";
		show "Kiehl Hyre, você está";
		show "preso por criar e";
		show "negociar armas ilegais!";
		set KielHyreQuest,100;
		donpcevent "::OnKHAgent";
		enablenpc "Mitchell#KiehlRoom";
		enablenpc "Agent#KHAgent1";
		enablenpc "Agent#KHAgent2";
		enablenpc "Agent#KHAgent3";
		enablenpc "Agent#KHAgent4";
		next;
		goto L_Continue;
	}

	else if ((KielHyreQuest == 100) && (getvariableofnpc(.KHKilledBoss,"KiehlRoom") < 1)) {
		L_Continue:
		set getvariableofnpc(.KHKilledBoss,"KiehlRoom"),0;
		cutin "kh_kiel01",2;
		show "[Kiehl]";
		show "Ah, agentes da República";
		show "Schwaltzvalt. Heh. Eu nunca tive";
		show "tantos convidados antes.";
		show "Bem, acho que isso significa";
		show "que teremos de lutar afinal";
		show "você e eu. *Droga* Pena...";
		next;
		show "[Kiehl]";
		show "Primeiro, para ser justo,";
		show "deixe-me cuidar dessas";
		show "chateações. Eles são apenas";
		show "descerebrados fazendo seu";
		show "trabalho--mais ou menos como robôs--mas";
		show "não se preocupe, eles não serão feridos.";
		next;
		donpcevent "::OnKHSpiderWeb";
		show "[Mitchell]";
		show "Nããooooo!";
		next;
		cutin "kh_kiel03",2;
		show "[Kiehl]";
		show "E agora, você e eu podemos";
		show "ter um duelo adequado, humano";
		show "estou interessado em ver o quanto";
		show "você é realmente forte~";
		close2;
		cutin "",255;
		monster "kh_kiehl02",50,52,"Kiehl",1733,1,"KiehlRoom::OnKiehlDead";
		donpcevent "Kiehl#Original::OnChangeState";
		disablenpc "Kiehl#Original";
		end;
	}

	else if ((KielHyreQuest == 100) && (getvariableofnpc(.KHKilledBoss,"KiehlRoom") == 1)) {
		cutin "kh_kiel02",2;
		show "[Kiehl]";
		show "M-Maldição...!";
		show "Bem jogado, aventureiro";
		show "Bem jogado. Eu deveria";
		show "saber que papai enviaria";
		show "o melhor de todos atrás de mim. Ainda assim,";
		show "você falhou em realmente me derrotar.";
		next;
		show "[Kiehl]";
		show "Ainda tenho alguns";
		show "trunfos sobrando";
		show "Acho... Eu lhe levarei";
		show "para o inferno comigo... Bem";
		show "se robôs puderem ir para lá~";
		announce "*Jeeeezzzgggg~ Geezzz~ Grrrr~ Clank~*",bc_map,0xFF0000;
		next;
		show "[Mitchell]";
		show "Não...! Estamos trancados";
		show "no quarto! Estamos";
		show "presos aqui!";
		next;
		show "[Kiehl]";
		show "Yay~ Vamos queimar";
		show "tudo abaixo~";
		next;
		show "[Mitchell]";
		show "Rápido, "+strcharinfo(0)+",";
		show "use o dispositivo de força de";
		show "Kiel Hyre, aquele que era";
		show "para bagunçar com";
		show "a fonte de força de Kiehl!";
		show "Rápido, use-o agora!";
		next;
		delitem 7504,1; //Power_Source
		announce "*Gzzzz~ Gzzzz~*",bc_map,0xFF0000;
		next;
		show "[Kiehl]";
		show "O-O quê? Não p-posso";
		show "me mover! Esse dia está simplesmente";
		show "cheio de surpresas. Oh, bem.";
		show "Acho que é hora de eu";
		show "usar meu outro trunfo.";
		next;
		show "[Mitchell]";
		show "O quê...?";
		show "Quantos trunfos";
		show "você tem?";
		next;
		show "[????]";
		show "Estou tão desapontado...";
		show "Não posso acreditar que ninguém";
		show "de vocês pensou nisso...";
		next;
		show "[Mitchell]";
		show "Quem é você...?";
		show "Apareça!";
		next;
		donpcevent "Kiehl#Copy::OnChangeState";
		enablenpc "Kiehl#Copy";
		show "[????]";
		show "Por favor.";
		show "Não me insulte.";
		show "Você conhece essa voz.";
		show "Esteve falando com";
		show "você o tempo todo~";
		next;
		show "[Mitchell]";
		show "Impossível!";
		show "Como pode ter";
		show "dois de você...?!";
		next;
		cutin "kh_kiel01",0;
		show "[Kiehl]";
		show "Hahahahaha!";
		show "Eu sou um robô!";
		show "Posso fazer corpos extras";
		show "trocar de cérebros com eles";
		show "É extremamente";
		show "conveniente, se quer saber.";
		next;
		cutin "kh_kiel03",2;
		show "[Kiehl]";
		show "De qualquer forma, não quero aparecer";
		show "mas acho que posso";
		show "revelar para você meu trunfo final";
		show "Primeiro de tudo, eu sei tudo";
		show "sobre você. Sra. Mitchell Layla~";
		next;
		show "[Mitchell]";
		show "O quê? Como você";
		show "sabe meu nome?";
		next;
		show "[Kiehl]";
		show "Bem, eu tenho alguns";
		show "espiões meus...";
		show "Eu o deixarei explicar.";
		next;
		show "[Homem Mascarado]";
		show "Mitchell...";
		show "Sinto muito que";
		show "você tenha se envolvido";
		show "nisso tudo.";
		next;
		show "[Mitchell]";
		show "Wolkeus? Wolkeus Kaiser?!";
		show "Você é o espião? Mas você arriscou";
		show "sua vida para salvar nosso presidente!";
		show "Não! Oh, Deus! Como isso pode estar";
		show "acontecendo?! Tudo é simplesmente...";
		show "Isso tudo é loucura! Tudo!";
		next;
		show "[Wolkeus]";
		show "Isso é apenas o resultado";
		show "de planos elaborados que";
		show "fizemos anos atrás. Eu não";
		show "esperava que você ficasse tão surpresa,";
		show "Mitchell. É assim que o jogo é";
		show "jogado. Você sabe disso.";
		next;
		show "[Mitchell]";
		show "Senhor Presidente...";
		show "Eu falhei... Me desculpe...";
		next;
		show "[Kiehl]";
		show "Bem, Kaiser, ela se deu";
		show "muito mal, mas ao menos";
		show "você está sendo um cavalheiro";
		show "sobre isso. Bem eu gostaria que";
		show "todos nós ficássemos bem";
		show "informados, mas...";
		next;
		cutin "kh_kiel01",2;
		show "[Kiehl]";
		show "Melhor fazermos nossas";
		show "despedidas aqui. Esse";
		show "lugar vai sumir em";
		show "cinco minutos. Ah, e";
		show "Sra. Layla, você vem";
		show "conosco. Temos perguntas~";
		next;
		show "[Kiehl]";
		show "Estou curioso em quais são";
		show "os planos do Presidente.";
		show "Senhor Kaiser, poderia";
		show "escoltar a Sra. Layla, por favor.";
		next;
		show "[Wolkeus Kaiser]";
		show "Desculpe, Mitchell.";
		show "Tenho de fazê-lo...";
		next;
		show "[Mitchell]";
		show "Não, afaste-se! Deixe-me ir!";
		show "Me solta, Wolkeus!";
		donpcevent "::OnKHAgent";
		disablenpc "Mitchell#KiehlRoom";
		disablenpc "Agent#KHAgent1";
		disablenpc "Agent#KHAgent2";
		disablenpc "Agent#KHAgent3";
		disablenpc "Agent#KHAgent4";
		next;
		cutin "kh_kiel02",2;
		show "[Kiehl]";
		show "Ótimo, acabamos com";
		show "aquele negócio feio. Agora,";
		show "onde eu estava. Ah sim.";
		show "Sim. Desculpe. Não temos";
		show "mais tempo para brincar.";
		next;
		show "[Kiehl]";
		show "Aqui, aventureiro.";
		show "Estou ciente que meu pai";
		show "lhe enviou aqui para pegar isso.";
		show "Considere meu presente final";
		show "para ele. Estou surpreso que ele deixou";
		show "esse anel dentro de mim.";
		next;
		cutin "kh_kiel04",2;
		show "[Kiehl]";
		show "Eu imagino que deve";
		show "ser precioso para ele. Mas";
		show "fico imaginado porque ele o colocou";
		show "dentro de mim? Bem, de qualquer forma,";
		show "tenho uma mensagem que gostaria";
		show "que você entregasse a ele por mim.";
		next;
		cutin "kh_kiel01",2;
		show "[Kiehl]";
		show "Primeiro... Acho que devemos";
		show "nos livrar dessa";
		show "coisa velha. Foi um bom";
		show "corpo, e me serviu";
		show "bem por 23 anos. Sentirei falta";
		show "dele. Descanse bem, velho Kiehl.";
		next;
		show "[Kiehl]";
		show "Agora, esse era o corpo";
		show "que meu pai fez.";
		show "Por favor dia a ele que";
		show "isso quer dizer que não somos";
		show "mais parentes";
		show "um do outro.";
		next;
		show "[Kiehl]";
		show "O corpo que estou usando agora?";
		show "Eu mesmo fiz com a mais";
		show "avançada tecnologia. Considere-o...";
		show "a Quarta Geração de corpos de robôs";
		show "se quiser. Papai vai";
		show "entender o que quero dizer.";
		next;
		show "[Kiehl]";
		show "De qualquer forma, por favor diga a ele";
		show "isso, e livre-se desse anel velho";
		show "que estava no meu corpo antigo de robô,";
		show "e entregue para ele. Por enquanto";
		show "vamos sair daqui: só";
		show "temos apenas 3 minutos para evacuar.";
		next;
		show "[Kiehl]";
		show "Você é um oponente valoroso,";
		show "e um humano que eu respeito.";
		show "Eu não sei se vamos nos encontrar";
		show "novamente, mas quem sabe?";
		show "De qualquer forma, abrirei a";
		show "saída para você. Até mais ver~";
		set KielHyreQuest,104;
		donpcevent "Kiehl_Room_Exit::OnEnable";			
		enablenpc "Kiehl_Room_Exit";
		close2;
		cutin "",255;
		donpcevent "Kiehl#Copy::OnChangeState";
		disablenpc "Kiehl#Copy";
		initnpctimer;
		end;
	}

	if (KielHyreQuest == 104) {
		cutin "kh_kiel02",2;
		show "^3355FFvocê recuperou o";
		show "anel do coração do velho corpo";
		show "robótico de Kiehl.^000000";
		additem 7508,1; //Elisia's_Ring
		set KielHyreQuest,106;
		enablenpc "Kiehl_Room_Exit";
		close2;
		cutin "",255;
		end;
	}

	else {
		show "......";
		close2;
		cutin "",255;
		end;
	}

OnTimer180000:
	stopnpctimer;
	mapannounce "kh_kiehl02","Beeeeeeeeeeeeep~",bc_npc,0xFF0000;
	donpcevent "KiehlRoom::OnReset";
	end;

OnTimer179000:
	mapannounce "kh_kiehl02","Faltando 1 segundo para a detonação",bc_npc,0xFF0000;
	end;

OnTimer178000:
	mapannounce "kh_kiehl02","Faltando 2 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer177000:
	mapannounce "kh_kiehl02","Faltando 3 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer176000:
	mapannounce "kh_kiehl02","Faltando 4 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer175000:
	mapannounce "kh_kiehl02","Faltando 5 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer170000:
	mapannounce "kh_kiehl02","Faltando 10 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer160000:
	mapannounce "kh_kiehl02","Faltando 20 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer150000:
	mapannounce "kh_kiehl02","Faltando 30 segundos para a detonação",bc_npc,0xFF0000;
	end;

OnTimer120000:
	mapannounce "kh_kiehl02","Faltando 1 minuto para a detonação.",bc_npc,0xFF0000;
	end;

OnTimer60000:
	mapannounce "kh_kiehl02","Faltando 2 minutos para a detonação.",bc_npc,0xFF0000;
	end;

OnTimer1000:
	mapannounce "kh_kiehl02","Faltando 3 minutos para a detonação.",bc_npc,0xFF0000;
	end;

OnChangeState:
	misceffect 215;
	end;

OnInit:
	disablenpc "Mitchell#KiehlRoom";
	disablenpc "Agent#KHAgent1";
	disablenpc "Agent#KHAgent2";
	disablenpc "Agent#KHAgent3";
	disablenpc "Agent#KHAgent4";
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; NPC for mob control, timers, and other junk.
//----------------------------------------------------------------------------
kh_kiehl02,1,1,0	script	KiehlRoom	-1,{
	end;

OnKiehlMobDead:
	set .KHKilled,.KHKilled+1;
	if (.KHKilled == 5) { 
		donpcevent "Kiehl#Original::OnChangeState";
		enablenpc "Kiehl#Original"; 
	}
	end;

OnKiehlDead:
	set .KHKilledBoss,1;
	donpcevent "Kiehl#Original::OnChangeState";
	enablenpc "Kiehl#Original";
	end;
	
OnReset:
	donpcevent "Kiehl_Room_Trap::OnGlobalTimerOff";
	if (getmapusers("kh_kiehl02") > 0)
		mapwarp "kh_kiehl02","lighthalzen",192,200;
	killmonsterall "kh_kiehl02";
	disablenpc "Kiehl_Room_Exit";
	disablenpc "Mitchell#KiehlRoom";
	disablenpc "Agent#KHAgent1";
	disablenpc "Agent#KHAgent2";
	disablenpc "Agent#KHAgent3";
	disablenpc "Agent#KHAgent4";
	disablenpc "Kiehl#Copy";
	enablenpc "Kiehl#Original"; 
	set .KHKilledBoss,0;
	set .KHKilled,0;
	set getvariableofnpc(.KHTrapSprung,"Kiehl_Room_Trap"),0;
	set $@KHQuestBusy,0;
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Mitchell and Agents. (Floating NPC + Duplicates)
//----------------------------------------------------------------------------
-	script	Agent#KHAgent1::KHAgent	-1,{
	end;

OnKHAgent:
	misceffect 215;
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}


kh_kiehl02,49,55,6	duplicate(KHAgent)	Mitchell#KiehlRoom	727

kh_kiehl02,53,52,4	duplicate(KHAgent)	Agent#KHAgent1	880

kh_kiehl02,51,49,1	duplicate(KHAgent)	Agent#KHAgent2	880

kh_kiehl02,47,50,0	duplicate(KHAgent)	Agent#KHAgent3	880

kh_kiehl02,46,53,6	duplicate(KHAgent)	Agent#KHAgent4	880


//----------------------------------------------------------------------------
// Kiehl's Room; Copy of Kiehl.
//----------------------------------------------------------------------------
kh_kiehl02,48,53,6	script	Kiehl#Copy	902,{
	end;

OnChangeState:
	misceffect 215;
	end;

OnInit:
	disablenpc "Kiehl#Copy";
	end;
}

//----------------------------------------------------------------------------
// Kiehl's Room; Kiehl_Room_Exit
//----------------------------------------------------------------------------
kh_kiehl02,50,59,0	script	Kiehl_Room_Exit	45,1,1,{
OnTouch:
	if (getmapusers("kh_kiehl02") < 1)
		donpcevent "KiehlRoom::OnReset";
	warp "lighthalzen",193,202;
	end;

OnEnable:
	misceffect 215;
	end;

OnInit:
	disablenpc "Kiehl_Room_Exit";
	end;
}

//============================================================================